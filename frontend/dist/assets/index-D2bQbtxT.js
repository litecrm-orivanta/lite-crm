(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function Mm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $m={exports:{}},ha={},Fm={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),ug=Symbol.for("react.portal"),dg=Symbol.for("react.fragment"),fg=Symbol.for("react.strict_mode"),mg=Symbol.for("react.profiler"),hg=Symbol.for("react.provider"),pg=Symbol.for("react.context"),xg=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),yg=Symbol.for("react.memo"),vg=Symbol.for("react.lazy"),kd=Symbol.iterator;function bg(e){return e===null||typeof e!="object"?null:(e=kd&&e[kd]||e["@@iterator"],typeof e=="function"?e:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Om=Object.assign,Um={};function hr(e,t,n){this.props=e,this.context=t,this.refs=Um,this.updater=n||zm}hr.prototype.isReactComponent={};hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wm(){}Wm.prototype=hr.prototype;function Jc(e,t,n){this.props=e,this.context=t,this.refs=Um,this.updater=n||zm}var eu=Jc.prototype=new Wm;eu.constructor=Jc;Om(eu,hr.prototype);eu.isPureReactComponent=!0;var Ed=Array.isArray,Bm=Object.prototype.hasOwnProperty,tu={current:null},Vm={key:!0,ref:!0,__self:!0,__source:!0};function Hm(e,t,n){var r,l={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Bm.call(t,r)&&!Vm.hasOwnProperty(r)&&(l[r]=t[r]);var i=arguments.length-2;if(i===1)l.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];l.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)l[r]===void 0&&(l[r]=i[r]);return{$$typeof:Al,type:e,key:o,ref:a,props:l,_owner:tu.current}}function wg(e,t){return{$$typeof:Al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Al}function Ng(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cd=/\/+/g;function Qa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ng(""+e.key):t.toString(36)}function xo(e,t,n,r,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Al:case ug:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+Qa(a,0):r,Ed(l)?(n="",e!=null&&(n=e.replace(Cd,"$&/")+"/"),xo(l,t,n,"",function(u){return u})):l!=null&&(nu(l)&&(l=wg(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(Cd,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",Ed(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+Qa(o,i);a+=xo(o,t,n,c,l)}else if(c=bg(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+Qa(o,i++),a+=xo(o,t,n,c,l);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ul(e,t,n){if(e==null)return e;var r=[],l=0;return xo(e,r,"","",function(o){return t.call(n,o,l++)}),r}function jg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},go={transition:null},Sg={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:go,ReactCurrentOwner:tu};function Gm(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ul,forEach:function(e,t,n){Ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ul(e,function(){t++}),t},toArray:function(e){return Ul(e,function(t){return t})||[]},only:function(e){if(!nu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=hr;le.Fragment=dg;le.Profiler=mg;le.PureComponent=Jc;le.StrictMode=fg;le.Suspense=gg;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sg;le.act=Gm;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Om({},e.props),l=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=tu.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Bm.call(t,c)&&!Vm.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Al,type:e.type,key:l,ref:o,props:r,_owner:a}};le.createContext=function(e){return e={$$typeof:pg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hg,_context:e},e.Consumer=e};le.createElement=Hm;le.createFactory=function(e){var t=Hm.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:xg,render:e}};le.isValidElement=nu;le.lazy=function(e){return{$$typeof:vg,_payload:{_status:-1,_result:e},_init:jg}};le.memo=function(e,t){return{$$typeof:yg,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=go.transition;go.transition={};try{e()}finally{go.transition=t}};le.unstable_act=Gm;le.useCallback=function(e,t){return et.current.useCallback(e,t)};le.useContext=function(e){return et.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return et.current.useDeferredValue(e)};le.useEffect=function(e,t){return et.current.useEffect(e,t)};le.useId=function(){return et.current.useId()};le.useImperativeHandle=function(e,t,n){return et.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return et.current.useMemo(e,t)};le.useReducer=function(e,t,n){return et.current.useReducer(e,t,n)};le.useRef=function(e){return et.current.useRef(e)};le.useState=function(e){return et.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return et.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return et.current.useTransition()};le.version="18.3.1";Fm.exports=le;var p=Fm.exports;const U=Mm(p);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg=p,Eg=Symbol.for("react.element"),Cg=Symbol.for("react.fragment"),Tg=Object.prototype.hasOwnProperty,Ag=kg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pg={key:!0,ref:!0,__self:!0,__source:!0};function Ym(e,t,n){var r,l={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Tg.call(t,r)&&!Pg.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Eg,type:e,key:o,ref:a,props:l,_owner:Ag.current}}ha.Fragment=Cg;ha.jsx=Ym;ha.jsxs=Ym;$m.exports=ha;var s=$m.exports,Ui={},Km={exports:{}},bt={},Xm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,_){var D=R.length;R.push(_);e:for(;0<D;){var M=D-1>>>1,W=R[M];if(0<l(W,_))R[M]=_,R[D]=W,D=M;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var _=R[0],D=R.pop();if(D!==_){R[0]=D;e:for(var M=0,W=R.length,K=W>>>1;M<K;){var Y=2*(M+1)-1,X=R[Y],Z=Y+1,B=R[Z];if(0>l(X,D))Z<W&&0>l(B,X)?(R[M]=B,R[Z]=D,M=Z):(R[M]=X,R[Y]=D,M=Y);else if(Z<W&&0>l(B,D))R[M]=B,R[Z]=D,M=Z;else break e}}return _}function l(R,_){var D=R.sortIndex-_.sortIndex;return D!==0?D:R.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],d=1,f=null,m=3,x=!1,y=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=R)r(u),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(u)}}function N(R){if(b=!1,v(R),!y)if(n(c)!==null)y=!0,A(S);else{var _=n(u);_!==null&&O(N,_.startTime-R)}}function S(R,_){y=!1,b&&(b=!1,g(C),C=-1),x=!0;var D=m;try{for(v(_),f=n(c);f!==null&&(!(f.expirationTime>_)||R&&!I());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var W=M(f.expirationTime<=_);_=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(c)&&r(c),v(_)}else r(c);f=n(c)}if(f!==null)var K=!0;else{var Y=n(u);Y!==null&&O(N,Y.startTime-_),K=!1}return K}finally{f=null,m=D,x=!1}}var E=!1,L=null,C=-1,k=5,T=-1;function I(){return!(e.unstable_now()-T<k)}function $(){if(L!==null){var R=e.unstable_now();T=R;var _=!0;try{_=L(!0,R)}finally{_?F():(E=!1,L=null)}}else E=!1}var F;if(typeof h=="function")F=function(){h($)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,P=j.port2;j.port1.onmessage=$,F=function(){P.postMessage(null)}}else F=function(){w($,0)};function A(R){L=R,E||(E=!0,F())}function O(R,_){C=w(function(){R(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,A(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var _=3;break;default:_=m}var D=m;m=_;try{return R()}finally{m=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,_){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=m;m=R;try{return _()}finally{m=D}},e.unstable_scheduleCallback=function(R,_,D){var M=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?M+D:M):D=M,R){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,R={id:d++,callback:_,priorityLevel:R,startTime:D,expirationTime:W,sortIndex:-1},D>M?(R.sortIndex=D,t(u,R),n(c)===null&&R===n(u)&&(b?(g(C),C=-1):b=!0,O(N,D-M))):(R.sortIndex=W,t(c,R),y||x||(y=!0,A(S))),R},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(R){var _=m;return function(){var D=m;m=_;try{return R.apply(this,arguments)}finally{m=D}}}})(qm);Xm.exports=qm;var _g=Xm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=p,yt=_g;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qm=new Set,nl={};function Ss(e,t){sr(e,t),sr(e+"Capture",t)}function sr(e,t){for(nl[e]=t,e=0;e<t.length;e++)Qm.add(t[e])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wi=Object.prototype.hasOwnProperty,Rg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Td={},Ad={};function Dg(e){return Wi.call(Ad,e)?!0:Wi.call(Td,e)?!1:Rg.test(e)?Ad[e]=!0:(Td[e]=!0,!1)}function Ig(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mg(e,t,n,r){if(t===null||typeof t>"u"||Ig(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,n,r,l,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ve[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ve[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ve[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ve[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ve[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ve[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ve[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ve[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ve[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var su=/[\-:]([a-z])/g;function ru(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(su,ru);Ve[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(su,ru);Ve[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(su,ru);Ve[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ve[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ve[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function lu(e,t,n,r){var l=Ve.hasOwnProperty(t)?Ve[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mg(t,n,l,r)&&(n=null),r||l===null?Dg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var kn=Lg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),ou=Symbol.for("react.strict_mode"),Bi=Symbol.for("react.profiler"),Zm=Symbol.for("react.provider"),Jm=Symbol.for("react.context"),au=Symbol.for("react.forward_ref"),Vi=Symbol.for("react.suspense"),Hi=Symbol.for("react.suspense_list"),iu=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),eh=Symbol.for("react.offscreen"),Pd=Symbol.iterator;function jr(e){return e===null||typeof e!="object"?null:(e=Pd&&e[Pd]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,Za;function Or(e){if(Za===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Za=t&&t[1]||""}return`
`+Za+e}var Ja=!1;function ei(e,t){if(!e||Ja)return"";Ja=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var l=u.stack.split(`
`),o=r.stack.split(`
`),a=l.length-1,i=o.length-1;1<=a&&0<=i&&l[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(l[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||l[a]!==o[i]){var c=`
`+l[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Ja=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Or(e):""}function $g(e){switch(e.tag){case 5:return Or(e.type);case 16:return Or("Lazy");case 13:return Or("Suspense");case 19:return Or("SuspenseList");case 0:case 2:case 15:return e=ei(e.type,!1),e;case 11:return e=ei(e.type.render,!1),e;case 1:return e=ei(e.type,!0),e;default:return""}}function Gi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ms:return"Fragment";case Is:return"Portal";case Bi:return"Profiler";case ou:return"StrictMode";case Vi:return"Suspense";case Hi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jm:return(e.displayName||"Context")+".Consumer";case Zm:return(e._context.displayName||"Context")+".Provider";case au:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case iu:return t=e.displayName||null,t!==null?t:Gi(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return Gi(e(t))}catch{}}return null}function Fg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gi(t);case 8:return t===ou?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function th(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zg(e){var t=th(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bl(e){e._valueTracker||(e._valueTracker=zg(e))}function nh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=th(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Do(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yi(e,t){var n=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _d(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sh(e,t){t=t.checked,t!=null&&lu(e,"checked",t,!1)}function Ki(e,t){sh(e,t);var n=Kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xi(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xi(e,t.type,Kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ld(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xi(e,t,n){(t!=="number"||Do(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ur=Array.isArray;function Ks(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function qi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(Ur(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kn(n)}}function rh(e,t){var n=Kn(t.value),r=Kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Dd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vl,oh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Og=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(e){Og.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yr[t]=Yr[e]})});function ah(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yr.hasOwnProperty(e)&&Yr[e]?(""+t).trim():t+"px"}function ih(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=ah(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Ug=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zi(e,t){if(t){if(Ug[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function Ji(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=null;function cu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tc=null,Xs=null,qs=null;function Id(e){if(e=Ll(e)){if(typeof tc!="function")throw Error(H(280));var t=e.stateNode;t&&(t=va(t),tc(e.stateNode,e.type,t))}}function ch(e){Xs?qs?qs.push(e):qs=[e]:Xs=e}function uh(){if(Xs){var e=Xs,t=qs;if(qs=Xs=null,Id(e),t)for(e=0;e<t.length;e++)Id(t[e])}}function dh(e,t){return e(t)}function fh(){}var ti=!1;function mh(e,t,n){if(ti)return e(t,n);ti=!0;try{return dh(e,t,n)}finally{ti=!1,(Xs!==null||qs!==null)&&(fh(),uh())}}function rl(e,t){var n=e.stateNode;if(n===null)return null;var r=va(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var nc=!1;if(yn)try{var Sr={};Object.defineProperty(Sr,"passive",{get:function(){nc=!0}}),window.addEventListener("test",Sr,Sr),window.removeEventListener("test",Sr,Sr)}catch{nc=!1}function Wg(e,t,n,r,l,o,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Kr=!1,Io=null,Mo=!1,sc=null,Bg={onError:function(e){Kr=!0,Io=e}};function Vg(e,t,n,r,l,o,a,i,c){Kr=!1,Io=null,Wg.apply(Bg,arguments)}function Hg(e,t,n,r,l,o,a,i,c){if(Vg.apply(this,arguments),Kr){if(Kr){var u=Io;Kr=!1,Io=null}else throw Error(H(198));Mo||(Mo=!0,sc=u)}}function ks(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Md(e){if(ks(e)!==e)throw Error(H(188))}function Gg(e){var t=e.alternate;if(!t){if(t=ks(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Md(l),e;if(o===r)return Md(l),t;o=o.sibling}throw Error(H(188))}if(n.return!==r.return)n=l,r=o;else{for(var a=!1,i=l.child;i;){if(i===n){a=!0,n=l,r=o;break}if(i===r){a=!0,r=l,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=l;break}if(i===r){a=!0,r=o,n=l;break}i=i.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function ph(e){return e=Gg(e),e!==null?xh(e):null}function xh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xh(e);if(t!==null)return t;e=e.sibling}return null}var gh=yt.unstable_scheduleCallback,$d=yt.unstable_cancelCallback,Yg=yt.unstable_shouldYield,Kg=yt.unstable_requestPaint,Ae=yt.unstable_now,Xg=yt.unstable_getCurrentPriorityLevel,uu=yt.unstable_ImmediatePriority,yh=yt.unstable_UserBlockingPriority,$o=yt.unstable_NormalPriority,qg=yt.unstable_LowPriority,vh=yt.unstable_IdlePriority,pa=null,en=null;function Qg(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(pa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:ey,Zg=Math.log,Jg=Math.LN2;function ey(e){return e>>>=0,e===0?32:31-(Zg(e)/Jg|0)|0}var Hl=64,Gl=4194304;function Wr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~l;i!==0?r=Wr(i):(o&=a,o!==0&&(r=Wr(o)))}else a=n&~l,a!==0?r=Wr(a):o!==0&&(r=Wr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ut(t),l=1<<n,r|=e[n],t&=~l;return r}function ty(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ny(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ut(o),i=1<<a,c=l[a];c===-1?(!(i&n)||i&r)&&(l[a]=ty(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function rc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bh(){var e=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),e}function ni(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function sy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Ut(n),o=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~o}}function du(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ut(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var de=0;function wh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nh,fu,jh,Sh,kh,lc=!1,Yl=[],zn=null,On=null,Un=null,ll=new Map,ol=new Map,Dn=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(e,t){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":ll.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(t.pointerId)}}function kr(e,t,n,r,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[l]},t!==null&&(t=Ll(t),t!==null&&fu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function ly(e,t,n,r,l){switch(t){case"focusin":return zn=kr(zn,e,t,n,r,l),!0;case"dragenter":return On=kr(On,e,t,n,r,l),!0;case"mouseover":return Un=kr(Un,e,t,n,r,l),!0;case"pointerover":var o=l.pointerId;return ll.set(o,kr(ll.get(o)||null,e,t,n,r,l)),!0;case"gotpointercapture":return o=l.pointerId,ol.set(o,kr(ol.get(o)||null,e,t,n,r,l)),!0}return!1}function Eh(e){var t=as(e.target);if(t!==null){var n=ks(t);if(n!==null){if(t=n.tag,t===13){if(t=hh(n),t!==null){e.blockedOn=t,kh(e.priority,function(){jh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=oc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ec=r,n.target.dispatchEvent(r),ec=null}else return t=Ll(n),t!==null&&fu(t),e.blockedOn=n,!1;t.shift()}return!0}function zd(e,t,n){yo(e)&&n.delete(t)}function oy(){lc=!1,zn!==null&&yo(zn)&&(zn=null),On!==null&&yo(On)&&(On=null),Un!==null&&yo(Un)&&(Un=null),ll.forEach(zd),ol.forEach(zd)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,lc||(lc=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,oy)))}function al(e){function t(l){return Er(l,e)}if(0<Yl.length){Er(Yl[0],e);for(var n=1;n<Yl.length;n++){var r=Yl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zn!==null&&Er(zn,e),On!==null&&Er(On,e),Un!==null&&Er(Un,e),ll.forEach(t),ol.forEach(t),n=0;n<Dn.length;n++)r=Dn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)Eh(n),n.blockedOn===null&&Dn.shift()}var Qs=kn.ReactCurrentBatchConfig,zo=!0;function ay(e,t,n,r){var l=de,o=Qs.transition;Qs.transition=null;try{de=1,mu(e,t,n,r)}finally{de=l,Qs.transition=o}}function iy(e,t,n,r){var l=de,o=Qs.transition;Qs.transition=null;try{de=4,mu(e,t,n,r)}finally{de=l,Qs.transition=o}}function mu(e,t,n,r){if(zo){var l=oc(e,t,n,r);if(l===null)fi(e,t,r,Oo,n),Fd(e,r);else if(ly(l,e,t,n,r))r.stopPropagation();else if(Fd(e,r),t&4&&-1<ry.indexOf(e)){for(;l!==null;){var o=Ll(l);if(o!==null&&Nh(o),o=oc(e,t,n,r),o===null&&fi(e,t,r,Oo,n),o===l)break;l=o}l!==null&&r.stopPropagation()}else fi(e,t,r,null,n)}}var Oo=null;function oc(e,t,n,r){if(Oo=null,e=cu(r),e=as(e),e!==null)if(t=ks(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oo=e,null}function Ch(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xg()){case uu:return 1;case yh:return 4;case $o:case qg:return 16;case vh:return 536870912;default:return 16}default:return 16}}var $n=null,hu=null,vo=null;function Th(){if(vo)return vo;var e,t=hu,n=t.length,r,l="value"in $n?$n.value:$n.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[o-r];r++);return vo=l.slice(e,1<r?1-r:void 0)}function bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kl(){return!0}function Od(){return!1}function wt(e){function t(n,r,l,o,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Kl:Od,this.isPropagationStopped=Od,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=wt(pr),_l=ke({},pr,{view:0,detail:0}),cy=wt(_l),si,ri,Cr,xa=ke({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cr&&(Cr&&e.type==="mousemove"?(si=e.screenX-Cr.screenX,ri=e.screenY-Cr.screenY):ri=si=0,Cr=e),si)},movementY:function(e){return"movementY"in e?e.movementY:ri}}),Ud=wt(xa),uy=ke({},xa,{dataTransfer:0}),dy=wt(uy),fy=ke({},_l,{relatedTarget:0}),li=wt(fy),my=ke({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=wt(my),py=ke({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xy=wt(py),gy=ke({},pr,{data:0}),Wd=wt(gy),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},by={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=by[e])?!!t[e]:!1}function xu(){return wy}var Ny=ke({},_l,{key:function(e){if(e.key){var t=yy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(e){return e.type==="keypress"?bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jy=wt(Ny),Sy=ke({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=wt(Sy),ky=ke({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),Ey=wt(ky),Cy=ke({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ty=wt(Cy),Ay=ke({},xa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Py=wt(Ay),_y=[9,13,27,32],gu=yn&&"CompositionEvent"in window,Xr=null;yn&&"documentMode"in document&&(Xr=document.documentMode);var Ly=yn&&"TextEvent"in window&&!Xr,Ah=yn&&(!gu||Xr&&8<Xr&&11>=Xr),Vd=" ",Hd=!1;function Ph(e,t){switch(e){case"keyup":return _y.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _h(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $s=!1;function Ry(e,t){switch(e){case"compositionend":return _h(t);case"keypress":return t.which!==32?null:(Hd=!0,Vd);case"textInput":return e=t.data,e===Vd&&Hd?null:e;default:return null}}function Dy(e,t){if($s)return e==="compositionend"||!gu&&Ph(e,t)?(e=Th(),vo=hu=$n=null,$s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ah&&t.locale!=="ko"?null:t.data;default:return null}}var Iy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Iy[e.type]:t==="textarea"}function Lh(e,t,n,r){ch(r),t=Uo(t,"onChange"),0<t.length&&(n=new pu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,il=null;function My(e){Bh(e,0)}function ga(e){var t=Os(e);if(nh(t))return e}function $y(e,t){if(e==="change")return t}var Rh=!1;if(yn){var oi;if(yn){var ai="oninput"in document;if(!ai){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),ai=typeof Yd.oninput=="function"}oi=ai}else oi=!1;Rh=oi&&(!document.documentMode||9<document.documentMode)}function Kd(){qr&&(qr.detachEvent("onpropertychange",Dh),il=qr=null)}function Dh(e){if(e.propertyName==="value"&&ga(il)){var t=[];Lh(t,il,e,cu(e)),mh(My,t)}}function Fy(e,t,n){e==="focusin"?(Kd(),qr=t,il=n,qr.attachEvent("onpropertychange",Dh)):e==="focusout"&&Kd()}function zy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ga(il)}function Oy(e,t){if(e==="click")return ga(t)}function Uy(e,t){if(e==="input"||e==="change")return ga(t)}function Wy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:Wy;function cl(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!Wi.call(t,l)||!Vt(e[l],t[l]))return!1}return!0}function Xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qd(e,t){var n=Xd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xd(n)}}function Ih(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ih(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mh(){for(var e=window,t=Do();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Do(e.document)}return t}function yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function By(e){var t=Mh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ih(n.ownerDocument.documentElement,n)){if(r!==null&&yu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,o=Math.min(r.start,l);r=r.end===void 0?o:Math.min(r.end,l),!e.extend&&o>r&&(l=r,r=o,o=l),l=qd(n,o);var a=qd(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vy=yn&&"documentMode"in document&&11>=document.documentMode,Fs=null,ac=null,Qr=null,ic=!1;function Qd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ic||Fs==null||Fs!==Do(r)||(r=Fs,"selectionStart"in r&&yu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&cl(Qr,r)||(Qr=r,r=Uo(ac,"onSelect"),0<r.length&&(t=new pu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Fs)))}function Xl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var zs={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},ii={},$h={};yn&&($h=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function ya(e){if(ii[e])return ii[e];if(!zs[e])return e;var t=zs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $h)return ii[e]=t[n];return e}var Fh=ya("animationend"),zh=ya("animationiteration"),Oh=ya("animationstart"),Uh=ya("transitionend"),Wh=new Map,Zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(e,t){Wh.set(e,t),Ss(t,[e])}for(var ci=0;ci<Zd.length;ci++){var ui=Zd[ci],Hy=ui.toLowerCase(),Gy=ui[0].toUpperCase()+ui.slice(1);qn(Hy,"on"+Gy)}qn(Fh,"onAnimationEnd");qn(zh,"onAnimationIteration");qn(Oh,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn(Uh,"onTransitionEnd");sr("onMouseEnter",["mouseout","mouseover"]);sr("onMouseLeave",["mouseout","mouseover"]);sr("onPointerEnter",["pointerout","pointerover"]);sr("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Jd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Hg(r,t,void 0,e),e.currentTarget=null}function Bh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==o&&l.isPropagationStopped())break e;Jd(l,i,u),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==o&&l.isPropagationStopped())break e;Jd(l,i,u),o=c}}}if(Mo)throw e=sc,Mo=!1,sc=null,e}function pe(e,t){var n=t[mc];n===void 0&&(n=t[mc]=new Set);var r=e+"__bubble";n.has(r)||(Vh(t,e,2,!1),n.add(r))}function di(e,t,n){var r=0;t&&(r|=4),Vh(n,e,r,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function ul(e){if(!e[ql]){e[ql]=!0,Qm.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||di(n,!1,e),di(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,di("selectionchange",!1,t))}}function Vh(e,t,n,r){switch(Ch(t)){case 1:var l=ay;break;case 4:l=iy;break;default:l=mu}n=l.bind(null,t,n,e),l=void 0,!nc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function fi(e,t,n,r,l){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===l||i.nodeType===8&&i.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;a=a.return}for(;i!==null;){if(a=as(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}mh(function(){var u=o,d=cu(n),f=[];e:{var m=Wh.get(e);if(m!==void 0){var x=pu,y=e;switch(e){case"keypress":if(bo(n)===0)break e;case"keydown":case"keyup":x=jy;break;case"focusin":y="focus",x=li;break;case"focusout":y="blur",x=li;break;case"beforeblur":case"afterblur":x=li;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Ey;break;case Fh:case zh:case Oh:x=hy;break;case Uh:x=Ty;break;case"scroll":x=cy;break;case"wheel":x=Py;break;case"copy":case"cut":case"paste":x=xy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Bd}var b=(t&4)!==0,w=!b&&e==="scroll",g=b?m!==null?m+"Capture":null:m;b=[];for(var h=u,v;h!==null;){v=h;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,g!==null&&(N=rl(h,g),N!=null&&b.push(dl(h,N,v)))),w)break;h=h.return}0<b.length&&(m=new x(m,y,null,n,d),f.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==ec&&(y=n.relatedTarget||n.fromElement)&&(as(y)||y[vn]))break e;if((x||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=u,y=y?as(y):null,y!==null&&(w=ks(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(b=Ud,N="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(b=Bd,N="onPointerLeave",g="onPointerEnter",h="pointer"),w=x==null?m:Os(x),v=y==null?m:Os(y),m=new b(N,h+"leave",x,n,d),m.target=w,m.relatedTarget=v,N=null,as(d)===u&&(b=new b(g,h+"enter",y,n,d),b.target=v,b.relatedTarget=w,N=b),w=N,x&&y)t:{for(b=x,g=y,h=0,v=b;v;v=As(v))h++;for(v=0,N=g;N;N=As(N))v++;for(;0<h-v;)b=As(b),h--;for(;0<v-h;)g=As(g),v--;for(;h--;){if(b===g||g!==null&&b===g.alternate)break t;b=As(b),g=As(g)}b=null}else b=null;x!==null&&ef(f,m,x,b,!1),y!==null&&w!==null&&ef(f,w,y,b,!0)}}e:{if(m=u?Os(u):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var S=$y;else if(Gd(m))if(Rh)S=Uy;else{S=zy;var E=Fy}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=Oy);if(S&&(S=S(e,u))){Lh(f,S,n,d);break e}E&&E(e,m,u),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&Xi(m,"number",m.value)}switch(E=u?Os(u):window,e){case"focusin":(Gd(E)||E.contentEditable==="true")&&(Fs=E,ac=u,Qr=null);break;case"focusout":Qr=ac=Fs=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,Qd(f,n,d);break;case"selectionchange":if(Vy)break;case"keydown":case"keyup":Qd(f,n,d)}var L;if(gu)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else $s?Ph(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Ah&&n.locale!=="ko"&&($s||C!=="onCompositionStart"?C==="onCompositionEnd"&&$s&&(L=Th()):($n=d,hu="value"in $n?$n.value:$n.textContent,$s=!0)),E=Uo(u,C),0<E.length&&(C=new Wd(C,e,null,n,d),f.push({event:C,listeners:E}),L?C.data=L:(L=_h(n),L!==null&&(C.data=L)))),(L=Ly?Ry(e,n):Dy(e,n))&&(u=Uo(u,"onBeforeInput"),0<u.length&&(d=new Wd("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=L))}Bh(f,t)})}function dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uo(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=rl(e,n),o!=null&&r.unshift(dl(e,o,l)),o=rl(e,t),o!=null&&r.push(dl(e,o,l))),e=e.return}return r}function As(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ef(e,t,n,r,l){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,l?(c=rl(n,o),c!=null&&a.unshift(dl(n,c,i))):l||(c=rl(n,o),c!=null&&a.push(dl(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Ky=/\r\n?/g,Xy=/\u0000|\uFFFD/g;function tf(e){return(typeof e=="string"?e:""+e).replace(Ky,`
`).replace(Xy,"")}function Ql(e,t,n){if(t=tf(t),tf(e)!==t&&n)throw Error(H(425))}function Wo(){}var cc=null,uc=null;function dc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,qy=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,Qy=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(e){return nf.resolve(null).then(e).catch(Zy)}:fc;function Zy(e){setTimeout(function(){throw e})}function mi(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),al(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);al(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xr=Math.random().toString(36).slice(2),Jt="__reactFiber$"+xr,fl="__reactProps$"+xr,vn="__reactContainer$"+xr,mc="__reactEvents$"+xr,Jy="__reactListeners$"+xr,ev="__reactHandles$"+xr;function as(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vn]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sf(e);e!==null;){if(n=e[Jt])return n;e=sf(e)}return t}e=n,n=e.parentNode}return null}function Ll(e){return e=e[Jt]||e[vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function va(e){return e[fl]||null}var hc=[],Us=-1;function Qn(e){return{current:e}}function xe(e){0>Us||(e.current=hc[Us],hc[Us]=null,Us--)}function me(e,t){Us++,hc[Us]=e.current,e.current=t}var Xn={},qe=Qn(Xn),it=Qn(!1),gs=Xn;function rr(e,t){var n=e.type.contextTypes;if(!n)return Xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function ct(e){return e=e.childContextTypes,e!=null}function Bo(){xe(it),xe(qe)}function rf(e,t,n){if(qe.current!==Xn)throw Error(H(168));me(qe,t),me(it,n)}function Hh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(H(108,Fg(e)||"Unknown",l));return ke({},n,r)}function Vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xn,gs=qe.current,me(qe,e),me(it,it.current),!0}function lf(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=Hh(e,t,gs),r.__reactInternalMemoizedMergedChildContext=e,xe(it),xe(qe),me(qe,e)):xe(it),me(it,n)}var dn=null,ba=!1,hi=!1;function Gh(e){dn===null?dn=[e]:dn.push(e)}function tv(e){ba=!0,Gh(e)}function Zn(){if(!hi&&dn!==null){hi=!0;var e=0,t=de;try{var n=dn;for(de=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dn=null,ba=!1}catch(l){throw dn!==null&&(dn=dn.slice(e+1)),gh(uu,Zn),l}finally{de=t,hi=!1}}return null}var Ws=[],Bs=0,Ho=null,Go=0,kt=[],Et=0,ys=null,fn=1,mn="";function rs(e,t){Ws[Bs++]=Go,Ws[Bs++]=Ho,Ho=e,Go=t}function Yh(e,t,n){kt[Et++]=fn,kt[Et++]=mn,kt[Et++]=ys,ys=e;var r=fn;e=mn;var l=32-Ut(r)-1;r&=~(1<<l),n+=1;var o=32-Ut(t)+l;if(30<o){var a=l-l%5;o=(r&(1<<a)-1).toString(32),r>>=a,l-=a,fn=1<<32-Ut(t)+l|n<<l|r,mn=o+e}else fn=1<<o|n<<l|r,mn=e}function vu(e){e.return!==null&&(rs(e,1),Yh(e,1,0))}function bu(e){for(;e===Ho;)Ho=Ws[--Bs],Ws[Bs]=null,Go=Ws[--Bs],Ws[Bs]=null;for(;e===ys;)ys=kt[--Et],kt[Et]=null,mn=kt[--Et],kt[Et]=null,fn=kt[--Et],kt[Et]=null}var gt=null,xt=null,we=!1,zt=null;function Kh(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function of(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,xt=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ys!==null?{id:fn,overflow:mn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,xt=null,!0):!1;default:return!1}}function pc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xc(e){if(we){var t=xt;if(t){var n=t;if(!of(e,t)){if(pc(e))throw Error(H(418));t=Wn(n.nextSibling);var r=gt;t&&of(e,t)?Kh(r,n):(e.flags=e.flags&-4097|2,we=!1,gt=e)}}else{if(pc(e))throw Error(H(418));e.flags=e.flags&-4097|2,we=!1,gt=e}}}function af(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function Zl(e){if(e!==gt)return!1;if(!we)return af(e),we=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dc(e.type,e.memoizedProps)),t&&(t=xt)){if(pc(e))throw Xh(),Error(H(418));for(;t;)Kh(e,t),t=Wn(t.nextSibling)}if(af(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=Wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=gt?Wn(e.stateNode.nextSibling):null;return!0}function Xh(){for(var e=xt;e;)e=Wn(e.nextSibling)}function lr(){xt=gt=null,we=!1}function wu(e){zt===null?zt=[e]:zt.push(e)}var nv=kn.ReactCurrentBatchConfig;function Tr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var l=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=l.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function Jl(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cf(e){var t=e._init;return t(e._payload)}function qh(e){function t(g,h){if(e){var v=g.deletions;v===null?(g.deletions=[h],g.flags|=16):v.push(h)}}function n(g,h){if(!e)return null;for(;h!==null;)t(g,h),h=h.sibling;return null}function r(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function l(g,h){return g=Gn(g,h),g.index=0,g.sibling=null,g}function o(g,h,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<h?(g.flags|=2,h):v):(g.flags|=2,h)):(g.flags|=1048576,h)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,h,v,N){return h===null||h.tag!==6?(h=wi(v,g.mode,N),h.return=g,h):(h=l(h,v),h.return=g,h)}function c(g,h,v,N){var S=v.type;return S===Ms?d(g,h,v.props.children,N,v.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pn&&cf(S)===h.type)?(N=l(h,v.props),N.ref=Tr(g,h,v),N.return=g,N):(N=Co(v.type,v.key,v.props,null,g.mode,N),N.ref=Tr(g,h,v),N.return=g,N)}function u(g,h,v,N){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=Ni(v,g.mode,N),h.return=g,h):(h=l(h,v.children||[]),h.return=g,h)}function d(g,h,v,N,S){return h===null||h.tag!==7?(h=ms(v,g.mode,N,S),h.return=g,h):(h=l(h,v),h.return=g,h)}function f(g,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=wi(""+h,g.mode,v),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Wl:return v=Co(h.type,h.key,h.props,null,g.mode,v),v.ref=Tr(g,null,h),v.return=g,v;case Is:return h=Ni(h,g.mode,v),h.return=g,h;case Pn:var N=h._init;return f(g,N(h._payload),v)}if(Ur(h)||jr(h))return h=ms(h,g.mode,v,null),h.return=g,h;Jl(g,h)}return null}function m(g,h,v,N){var S=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:i(g,h,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wl:return v.key===S?c(g,h,v,N):null;case Is:return v.key===S?u(g,h,v,N):null;case Pn:return S=v._init,m(g,h,S(v._payload),N)}if(Ur(v)||jr(v))return S!==null?null:d(g,h,v,N,null);Jl(g,v)}return null}function x(g,h,v,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return g=g.get(v)||null,i(h,g,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Wl:return g=g.get(N.key===null?v:N.key)||null,c(h,g,N,S);case Is:return g=g.get(N.key===null?v:N.key)||null,u(h,g,N,S);case Pn:var E=N._init;return x(g,h,v,E(N._payload),S)}if(Ur(N)||jr(N))return g=g.get(v)||null,d(h,g,N,S,null);Jl(h,N)}return null}function y(g,h,v,N){for(var S=null,E=null,L=h,C=h=0,k=null;L!==null&&C<v.length;C++){L.index>C?(k=L,L=null):k=L.sibling;var T=m(g,L,v[C],N);if(T===null){L===null&&(L=k);break}e&&L&&T.alternate===null&&t(g,L),h=o(T,h,C),E===null?S=T:E.sibling=T,E=T,L=k}if(C===v.length)return n(g,L),we&&rs(g,C),S;if(L===null){for(;C<v.length;C++)L=f(g,v[C],N),L!==null&&(h=o(L,h,C),E===null?S=L:E.sibling=L,E=L);return we&&rs(g,C),S}for(L=r(g,L);C<v.length;C++)k=x(L,g,C,v[C],N),k!==null&&(e&&k.alternate!==null&&L.delete(k.key===null?C:k.key),h=o(k,h,C),E===null?S=k:E.sibling=k,E=k);return e&&L.forEach(function(I){return t(g,I)}),we&&rs(g,C),S}function b(g,h,v,N){var S=jr(v);if(typeof S!="function")throw Error(H(150));if(v=S.call(v),v==null)throw Error(H(151));for(var E=S=null,L=h,C=h=0,k=null,T=v.next();L!==null&&!T.done;C++,T=v.next()){L.index>C?(k=L,L=null):k=L.sibling;var I=m(g,L,T.value,N);if(I===null){L===null&&(L=k);break}e&&L&&I.alternate===null&&t(g,L),h=o(I,h,C),E===null?S=I:E.sibling=I,E=I,L=k}if(T.done)return n(g,L),we&&rs(g,C),S;if(L===null){for(;!T.done;C++,T=v.next())T=f(g,T.value,N),T!==null&&(h=o(T,h,C),E===null?S=T:E.sibling=T,E=T);return we&&rs(g,C),S}for(L=r(g,L);!T.done;C++,T=v.next())T=x(L,g,C,T.value,N),T!==null&&(e&&T.alternate!==null&&L.delete(T.key===null?C:T.key),h=o(T,h,C),E===null?S=T:E.sibling=T,E=T);return e&&L.forEach(function($){return t(g,$)}),we&&rs(g,C),S}function w(g,h,v,N){if(typeof v=="object"&&v!==null&&v.type===Ms&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Wl:e:{for(var S=v.key,E=h;E!==null;){if(E.key===S){if(S=v.type,S===Ms){if(E.tag===7){n(g,E.sibling),h=l(E,v.props.children),h.return=g,g=h;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pn&&cf(S)===E.type){n(g,E.sibling),h=l(E,v.props),h.ref=Tr(g,E,v),h.return=g,g=h;break e}n(g,E);break}else t(g,E);E=E.sibling}v.type===Ms?(h=ms(v.props.children,g.mode,N,v.key),h.return=g,g=h):(N=Co(v.type,v.key,v.props,null,g.mode,N),N.ref=Tr(g,h,v),N.return=g,g=N)}return a(g);case Is:e:{for(E=v.key;h!==null;){if(h.key===E)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){n(g,h.sibling),h=l(h,v.children||[]),h.return=g,g=h;break e}else{n(g,h);break}else t(g,h);h=h.sibling}h=Ni(v,g.mode,N),h.return=g,g=h}return a(g);case Pn:return E=v._init,w(g,h,E(v._payload),N)}if(Ur(v))return y(g,h,v,N);if(jr(v))return b(g,h,v,N);Jl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(n(g,h.sibling),h=l(h,v),h.return=g,g=h):(n(g,h),h=wi(v,g.mode,N),h.return=g,g=h),a(g)):n(g,h)}return w}var or=qh(!0),Qh=qh(!1),Yo=Qn(null),Ko=null,Vs=null,Nu=null;function ju(){Nu=Vs=Ko=null}function Su(e){var t=Yo.current;xe(Yo),e._currentValue=t}function gc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zs(e,t){Ko=e,Nu=Vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(Nu!==e)if(e={context:e,memoizedValue:t,next:null},Vs===null){if(Ko===null)throw Error(H(308));Vs=e,Ko.dependencies={lanes:0,firstContext:e}}else Vs=Vs.next=e;return t}var is=null;function ku(e){is===null?is=[e]:is.push(e)}function Zh(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,ku(t)):(n.next=l.next,l.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _n=!1;function Eu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,bn(e,n)}return l=r.interleaved,l===null?(t.next=t,ku(r)):(t.next=l.next,l.next=t),r.interleaved=t,bn(e,n)}function wo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,du(e,n)}}function uf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xo(e,t,n,r){var l=e.updateQueue;_n=!1;var o=l.firstBaseUpdate,a=l.lastBaseUpdate,i=l.shared.pending;if(i!==null){l.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,i=d.lastBaseUpdate,i!==a&&(i===null?d.firstBaseUpdate=u:i.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=l.baseState;a=0,d=u=c=null,i=o;do{var m=i.lane,x=i.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,b=i;switch(m=t,x=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){f=y.call(x,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,m=typeof y=="function"?y.call(x,f,m):y,m==null)break e;f=ke({},f,m);break e;case 2:_n=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,m=l.effects,m===null?l.effects=[i]:m.push(i))}else x={eventTime:x,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},d===null?(u=d=x,c=f):d=d.next=x,a|=m;if(i=i.next,i===null){if(i=l.shared.pending,i===null)break;m=i,i=m.next,m.next=null,l.lastBaseUpdate=m,l.shared.pending=null}}while(!0);if(d===null&&(c=f),l.baseState=c,l.firstBaseUpdate=u,l.lastBaseUpdate=d,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);bs|=a,e.lanes=a,e.memoizedState=f}}function df(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(H(191,l));l.call(r)}}}var Rl={},tn=Qn(Rl),ml=Qn(Rl),hl=Qn(Rl);function cs(e){if(e===Rl)throw Error(H(174));return e}function Cu(e,t){switch(me(hl,t),me(ml,e),me(tn,Rl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qi(t,e)}xe(tn),me(tn,t)}function ar(){xe(tn),xe(ml),xe(hl)}function ep(e){cs(hl.current);var t=cs(tn.current),n=Qi(t,e.type);t!==n&&(me(ml,e),me(tn,n))}function Tu(e){ml.current===e&&(xe(tn),xe(ml))}var je=Qn(0);function qo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pi=[];function Au(){for(var e=0;e<pi.length;e++)pi[e]._workInProgressVersionPrimary=null;pi.length=0}var No=kn.ReactCurrentDispatcher,xi=kn.ReactCurrentBatchConfig,vs=0,Se=null,De=null,ze=null,Qo=!1,Zr=!1,pl=0,sv=0;function Ye(){throw Error(H(321))}function Pu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function _u(e,t,n,r,l,o){if(vs=o,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,No.current=e===null||e.memoizedState===null?av:iv,e=n(r,l),Zr){o=0;do{if(Zr=!1,pl=0,25<=o)throw Error(H(301));o+=1,ze=De=null,t.updateQueue=null,No.current=cv,e=n(r,l)}while(Zr)}if(No.current=Zo,t=De!==null&&De.next!==null,vs=0,ze=De=Se=null,Qo=!1,t)throw Error(H(300));return e}function Lu(){var e=pl!==0;return pl=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Se.memoizedState=ze=e:ze=ze.next=e,ze}function Lt(){if(De===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=ze===null?Se.memoizedState:ze.next;if(t!==null)ze=t,De=e;else{if(e===null)throw Error(H(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},ze===null?Se.memoizedState=ze=e:ze=ze.next=e}return ze}function xl(e,t){return typeof t=="function"?t(e):t}function gi(e){var t=Lt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=De,l=r.baseQueue,o=n.pending;if(o!==null){if(l!==null){var a=l.next;l.next=o.next,o.next=a}r.baseQueue=l=o,n.pending=null}if(l!==null){o=l.next,r=r.baseState;var i=a=null,c=null,u=o;do{var d=u.lane;if((vs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Se.lanes|=d,bs|=d}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=i,Vt(r,t.memoizedState)||(ot=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do o=l.lane,Se.lanes|=o,bs|=o,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function yi(e){var t=Lt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do o=e(o,a.action),a=a.next;while(a!==l);Vt(o,t.memoizedState)||(ot=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function tp(){}function np(e,t){var n=Se,r=Lt(),l=t(),o=!Vt(r.memoizedState,l);if(o&&(r.memoizedState=l,ot=!0),r=r.queue,Ru(lp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,gl(9,rp.bind(null,n,r,l,t),void 0,null),Oe===null)throw Error(H(349));vs&30||sp(n,t,l)}return l}function sp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rp(e,t,n,r){t.value=n,t.getSnapshot=r,op(t)&&ap(e)}function lp(e,t,n){return n(function(){op(t)&&ap(e)})}function op(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function ap(e){var t=bn(e,1);t!==null&&Wt(t,e,1,-1)}function ff(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:e},t.queue=e,e=e.dispatch=ov.bind(null,Se,e),[t.memoizedState,e]}function gl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ip(){return Lt().memoizedState}function jo(e,t,n,r){var l=Qt();Se.flags|=e,l.memoizedState=gl(1|t,n,void 0,r===void 0?null:r)}function wa(e,t,n,r){var l=Lt();r=r===void 0?null:r;var o=void 0;if(De!==null){var a=De.memoizedState;if(o=a.destroy,r!==null&&Pu(r,a.deps)){l.memoizedState=gl(t,n,o,r);return}}Se.flags|=e,l.memoizedState=gl(1|t,n,o,r)}function mf(e,t){return jo(8390656,8,e,t)}function Ru(e,t){return wa(2048,8,e,t)}function cp(e,t){return wa(4,2,e,t)}function up(e,t){return wa(4,4,e,t)}function dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fp(e,t,n){return n=n!=null?n.concat([e]):null,wa(4,4,dp.bind(null,t,e),n)}function Du(){}function mp(e,t){var n=Lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hp(e,t){var n=Lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pp(e,t,n){return vs&21?(Vt(n,t)||(n=bh(),Se.lanes|=n,bs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n)}function rv(e,t){var n=de;de=n!==0&&4>n?n:4,e(!0);var r=xi.transition;xi.transition={};try{e(!1),t()}finally{de=n,xi.transition=r}}function xp(){return Lt().memoizedState}function lv(e,t,n){var r=Hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gp(e))yp(t,n);else if(n=Zh(e,t,n,r),n!==null){var l=Je();Wt(n,e,r,l),vp(n,t,r)}}function ov(e,t,n){var r=Hn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gp(e))yp(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(l.hasEagerState=!0,l.eagerState=i,Vt(i,a)){var c=t.interleaved;c===null?(l.next=l,ku(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}n=Zh(e,t,l,r),n!==null&&(l=Je(),Wt(n,e,r,l),vp(n,t,r))}}function gp(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function yp(e,t){Zr=Qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,du(e,n)}}var Zo={readContext:_t,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},av={readContext:_t,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:mf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,jo(4194308,4,dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=lv.bind(null,Se,e),[r.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:ff,useDebugValue:Du,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=ff(!1),t=e[0];return e=rv.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Se,l=Qt();if(we){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),Oe===null)throw Error(H(349));vs&30||sp(r,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,mf(lp.bind(null,r,o,e),[e]),r.flags|=2048,gl(9,rp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Qt(),t=Oe.identifierPrefix;if(we){var n=mn,r=fn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iv={readContext:_t,useCallback:mp,useContext:_t,useEffect:Ru,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:hp,useReducer:gi,useRef:ip,useState:function(){return gi(xl)},useDebugValue:Du,useDeferredValue:function(e){var t=Lt();return pp(t,De.memoizedState,e)},useTransition:function(){var e=gi(xl)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:xp,unstable_isNewReconciler:!1},cv={readContext:_t,useCallback:mp,useContext:_t,useEffect:Ru,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:hp,useReducer:yi,useRef:ip,useState:function(){return yi(xl)},useDebugValue:Du,useDeferredValue:function(e){var t=Lt();return De===null?t.memoizedState=e:pp(t,De.memoizedState,e)},useTransition:function(){var e=yi(xl)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:xp,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function yc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Na={isMounted:function(e){return(e=e._reactInternals)?ks(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Je(),l=Hn(e),o=pn(r,l);o.payload=t,n!=null&&(o.callback=n),t=Bn(e,o,l),t!==null&&(Wt(t,e,l,r),wo(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Je(),l=Hn(e),o=pn(r,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Bn(e,o,l),t!==null&&(Wt(t,e,l,r),wo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),r=Hn(e),l=pn(n,r);l.tag=2,t!=null&&(l.callback=t),t=Bn(e,l,r),t!==null&&(Wt(t,e,r,n),wo(t,e,r))}};function hf(e,t,n,r,l,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!cl(n,r)||!cl(l,o):!0}function bp(e,t,n){var r=!1,l=Xn,o=t.contextType;return typeof o=="object"&&o!==null?o=_t(o):(l=ct(t)?gs:qe.current,r=t.contextTypes,o=(r=r!=null)?rr(e,l):Xn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Na,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function pf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Na.enqueueReplaceState(t,t.state,null)}function vc(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Eu(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=_t(o):(o=ct(t)?gs:qe.current,l.context=rr(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(yc(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Na.enqueueReplaceState(l,l.state,null),Xo(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ir(e,t){try{var n="",r=t;do n+=$g(r),r=r.return;while(r);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function vi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uv=typeof WeakMap=="function"?WeakMap:Map;function wp(e,t,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ea||(ea=!0,Pc=r),bc(e,t)},n}function Np(e,t,n){n=pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){bc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){bc(e,t),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function xf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new uv;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Sv.bind(null,e,t,n),t.then(e,e))}function gf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yf(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pn(-1,1),t.tag=2,Bn(n,t,1))),n.lanes|=1),e)}var dv=kn.ReactCurrentOwner,ot=!1;function Ze(e,t,n,r){t.child=e===null?Qh(t,null,n,r):or(t,e.child,n,r)}function vf(e,t,n,r,l){n=n.render;var o=t.ref;return Zs(t,l),r=_u(e,t,n,r,o,l),n=Lu(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,wn(e,t,l)):(we&&n&&vu(t),t.flags|=1,Ze(e,t,r,l),t.child)}function bf(e,t,n,r,l){if(e===null){var o=n.type;return typeof o=="function"&&!Wu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,jp(e,t,o,r,l)):(e=Co(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&l)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(a,r)&&e.ref===t.ref)return wn(e,t,l)}return t.flags|=1,e=Gn(o,r),e.ref=t.ref,e.return=t,t.child=e}function jp(e,t,n,r,l){if(e!==null){var o=e.memoizedProps;if(cl(o,r)&&e.ref===t.ref)if(ot=!1,t.pendingProps=r=o,(e.lanes&l)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,wn(e,t,l)}return wc(e,t,n,r,l)}function Sp(e,t,n){var r=t.pendingProps,l=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Gs,pt),pt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(Gs,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,me(Gs,pt),pt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,me(Gs,pt),pt|=r;return Ze(e,t,l,n),t.child}function kp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wc(e,t,n,r,l){var o=ct(n)?gs:qe.current;return o=rr(t,o),Zs(t,l),n=_u(e,t,n,r,o,l),r=Lu(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,wn(e,t,l)):(we&&r&&vu(t),t.flags|=1,Ze(e,t,n,l),t.child)}function wf(e,t,n,r,l){if(ct(n)){var o=!0;Vo(t)}else o=!1;if(Zs(t,l),t.stateNode===null)So(e,t),bp(t,n,r),vc(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=ct(n)?gs:qe.current,u=rr(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&pf(t,a,r,u),_n=!1;var m=t.memoizedState;a.state=m,Xo(t,r,a,l),c=t.memoizedState,i!==r||m!==c||it.current||_n?(typeof d=="function"&&(yc(t,n,d,r),c=t.memoizedState),(i=_n||hf(t,n,i,r,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Jh(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Mt(t.type,i),a.props=u,f=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=_t(c):(c=ct(n)?gs:qe.current,c=rr(t,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||m!==c)&&pf(t,a,r,c),_n=!1,m=t.memoizedState,a.state=m,Xo(t,r,a,l);var y=t.memoizedState;i!==f||m!==y||it.current||_n?(typeof x=="function"&&(yc(t,n,x,r),y=t.memoizedState),(u=_n||hf(t,n,u,r,m,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Nc(e,t,n,r,o,l)}function Nc(e,t,n,r,l,o){kp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&lf(t,n,!1),wn(e,t,o);r=t.stateNode,dv.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=or(t,e.child,null,o),t.child=or(t,null,i,o)):Ze(e,t,i,o),t.memoizedState=r.state,l&&lf(t,n,!0),t.child}function Ep(e){var t=e.stateNode;t.pendingContext?rf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rf(e,t.context,!1),Cu(e,t.containerInfo)}function Nf(e,t,n,r,l){return lr(),wu(l),t.flags|=256,Ze(e,t,n,r),t.child}var jc={dehydrated:null,treeContext:null,retryLane:0};function Sc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cp(e,t,n){var r=t.pendingProps,l=je.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(l&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),me(je,l&1),e===null)return xc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ka(a,r,0,null),e=ms(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Sc(n),t.memoizedState=jc,e):Iu(t,a));if(l=e.memoizedState,l!==null&&(i=l.dehydrated,i!==null))return fv(e,t,a,r,i,l,n);if(o){o=r.fallback,a=t.mode,l=e.child,i=l.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Gn(l,c),r.subtreeFlags=l.subtreeFlags&14680064),i!==null?o=Gn(i,o):(o=ms(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Sc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=jc,r}return o=e.child,e=o.sibling,r=Gn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Iu(e,t){return t=ka({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eo(e,t,n,r){return r!==null&&wu(r),or(t,e.child,null,n),e=Iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fv(e,t,n,r,l,o,a){if(n)return t.flags&256?(t.flags&=-257,r=vi(Error(H(422))),eo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,l=t.mode,r=ka({mode:"visible",children:r.children},l,0,null),o=ms(o,l,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&or(t,e.child,null,a),t.child.memoizedState=Sc(a),t.memoizedState=jc,o);if(!(t.mode&1))return eo(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(H(419)),r=vi(o,r,void 0),eo(e,t,a,r)}if(i=(a&e.childLanes)!==0,ot||i){if(r=Oe,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,bn(e,l),Wt(r,e,l,-1))}return Uu(),r=vi(Error(H(421))),eo(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=kv.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,xt=Wn(l.nextSibling),gt=t,we=!0,zt=null,e!==null&&(kt[Et++]=fn,kt[Et++]=mn,kt[Et++]=ys,fn=e.id,mn=e.overflow,ys=t),t=Iu(t,r.children),t.flags|=4096,t)}function jf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gc(e.return,t,n)}function bi(e,t,n,r,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=l)}function Tp(e,t,n){var r=t.pendingProps,l=r.revealOrder,o=r.tail;if(Ze(e,t,r.children,n),r=je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,n,t);else if(e.tag===19)jf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(me(je,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&qo(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),bi(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&qo(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}bi(t,!0,n,null,o);break;case"together":bi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function So(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=Gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mv(e,t,n){switch(t.tag){case 3:Ep(t),lr();break;case 5:ep(t);break;case 1:ct(t.type)&&Vo(t);break;case 4:Cu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;me(Yo,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(me(je,je.current&1),t.flags|=128,null):n&t.child.childLanes?Cp(e,t,n):(me(je,je.current&1),e=wn(e,t,n),e!==null?e.sibling:null);me(je,je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Tp(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),me(je,je.current),r)break;return null;case 22:case 23:return t.lanes=0,Sp(e,t,n)}return wn(e,t,n)}var Ap,kc,Pp,_p;Ap=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kc=function(){};Pp=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,cs(tn.current);var o=null;switch(n){case"input":l=Yi(e,l),r=Yi(e,r),o=[];break;case"select":l=ke({},l,{value:void 0}),r=ke({},r,{value:void 0}),o=[];break;case"textarea":l=qi(e,l),r=qi(e,r),o=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wo)}Zi(n,r);var a;n=null;for(u in l)if(!r.hasOwnProperty(u)&&l.hasOwnProperty(u)&&l[u]!=null)if(u==="style"){var i=l[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(nl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(i=l!=null?l[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(nl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pe("scroll",e),o||i===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};_p=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ar(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hv(e,t,n){var r=t.pendingProps;switch(bu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return ct(t.type)&&Bo(),Ke(t),null;case 3:return r=t.stateNode,ar(),xe(it),xe(qe),Au(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Rc(zt),zt=null))),kc(e,t),Ke(t),null;case 5:Tu(t);var l=cs(hl.current);if(n=t.type,e!==null&&t.stateNode!=null)Pp(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return Ke(t),null}if(e=cs(tn.current),Zl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Jt]=t,r[fl]=o,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(l=0;l<Br.length;l++)pe(Br[l],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":_d(r,o),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},pe("invalid",r);break;case"textarea":Rd(r,o),pe("invalid",r)}Zi(n,o),l=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&Ql(r.textContent,i,e),l=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Ql(r.textContent,i,e),l=["children",""+i]):nl.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&pe("scroll",r)}switch(n){case"input":Bl(r),Ld(r,o,!0);break;case"textarea":Bl(r),Dd(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Wo)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Jt]=t,e[fl]=r,Ap(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ji(n,r),n){case"dialog":pe("cancel",e),pe("close",e),l=r;break;case"iframe":case"object":case"embed":pe("load",e),l=r;break;case"video":case"audio":for(l=0;l<Br.length;l++)pe(Br[l],e);l=r;break;case"source":pe("error",e),l=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),l=r;break;case"details":pe("toggle",e),l=r;break;case"input":_d(e,r),l=Yi(e,r),pe("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=ke({},r,{value:void 0}),pe("invalid",e);break;case"textarea":Rd(e,r),l=qi(e,r),pe("invalid",e);break;default:l=r}Zi(n,l),i=l;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?ih(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oh(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&sl(e,c):typeof c=="number"&&sl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&pe("scroll",e):c!=null&&lu(e,o,c,a))}switch(n){case"input":Bl(e),Ld(e,r,!1);break;case"textarea":Bl(e),Dd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ks(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ks(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Wo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)_p(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=cs(hl.current),cs(tn.current),Zl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Jt]=t,(o=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:Ql(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ql(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=t,t.stateNode=r}return Ke(t),null;case 13:if(xe(je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&xt!==null&&t.mode&1&&!(t.flags&128))Xh(),lr(),t.flags|=98560,o=!1;else if(o=Zl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(H(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[Jt]=t}else lr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),o=!1}else zt!==null&&(Rc(zt),zt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Ie===0&&(Ie=3):Uu())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return ar(),kc(e,t),e===null&&ul(t.stateNode.containerInfo),Ke(t),null;case 10:return Su(t.type._context),Ke(t),null;case 17:return ct(t.type)&&Bo(),Ke(t),null;case 19:if(xe(je),o=t.memoizedState,o===null)return Ke(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ar(o,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qo(e),a!==null){for(t.flags|=128,Ar(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return me(je,je.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ae()>cr&&(t.flags|=128,r=!0,Ar(o,!1),t.lanes=4194304)}else{if(!r)if(e=qo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ar(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!we)return Ke(t),null}else 2*Ae()-o.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,Ar(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ae(),t.sibling=null,n=je.current,me(je,r?n&1|2:n&1),t):(Ke(t),null);case 22:case 23:return Ou(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pt&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function pv(e,t){switch(bu(t),t.tag){case 1:return ct(t.type)&&Bo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),xe(it),xe(qe),Au(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tu(t),null;case 13:if(xe(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(je),null;case 4:return ar(),null;case 10:return Su(t.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var to=!1,Xe=!1,xv=typeof WeakSet=="function"?WeakSet:Set,q=null;function Hs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(e,t,r)}else n.current=null}function Ec(e,t,n){try{n()}catch(r){Ce(e,t,r)}}var Sf=!1;function gv(e,t){if(cc=zo,e=Mh(),yu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var x;f!==n||l!==0&&f.nodeType!==3||(i=a+l),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)m=f,f=x;for(;;){if(f===e)break t;if(m===n&&++u===l&&(i=a),m===o&&++d===r&&(c=a),(x=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(uc={focusedElem:e,selectionRange:n},zo=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,w=y.memoizedState,g=t.stateNode,h=g.getSnapshotBeforeUpdate(t.elementType===t.type?b:Mt(t.type,b),w);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(N){Ce(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return y=Sf,Sf=!1,y}function Jr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&Ec(t,n,o)}l=l.next}while(l!==r)}}function ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Cc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Lp(e){var t=e.alternate;t!==null&&(e.alternate=null,Lp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[fl],delete t[mc],delete t[Jy],delete t[ev])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rp(e){return e.tag===5||e.tag===3||e.tag===4}function kf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wo));else if(r!==4&&(e=e.child,e!==null))for(Tc(e,t,n),e=e.sibling;e!==null;)Tc(e,t,n),e=e.sibling}function Ac(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ac(e,t,n),e=e.sibling;e!==null;)Ac(e,t,n),e=e.sibling}var We=null,$t=!1;function Tn(e,t,n){for(n=n.child;n!==null;)Dp(e,t,n),n=n.sibling}function Dp(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(pa,n)}catch{}switch(n.tag){case 5:Xe||Hs(n,t);case 6:var r=We,l=$t;We=null,Tn(e,t,n),We=r,$t=l,We!==null&&($t?(e=We,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&($t?(e=We,n=n.stateNode,e.nodeType===8?mi(e.parentNode,n):e.nodeType===1&&mi(e,n),al(e)):mi(We,n.stateNode));break;case 4:r=We,l=$t,We=n.stateNode.containerInfo,$t=!0,Tn(e,t,n),We=r,$t=l;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var o=l,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ec(n,t,a),l=l.next}while(l!==r)}Tn(e,t,n);break;case 1:if(!Xe&&(Hs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ce(n,t,i)}Tn(e,t,n);break;case 21:Tn(e,t,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,Tn(e,t,n),Xe=r):Tn(e,t,n);break;default:Tn(e,t,n)}}function Ef(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xv),t.forEach(function(r){var l=Ev.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:We=i.stateNode,$t=!1;break e;case 3:We=i.stateNode.containerInfo,$t=!0;break e;case 4:We=i.stateNode.containerInfo,$t=!0;break e}i=i.return}if(We===null)throw Error(H(160));Dp(o,a,l),We=null,$t=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(u){Ce(l,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ip(t,e),t=t.sibling}function Ip(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),qt(e),r&4){try{Jr(3,e,e.return),ja(3,e)}catch(b){Ce(e,e.return,b)}try{Jr(5,e,e.return)}catch(b){Ce(e,e.return,b)}}break;case 1:It(t,e),qt(e),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(It(t,e),qt(e),r&512&&n!==null&&Hs(n,n.return),e.flags&32){var l=e.stateNode;try{sl(l,"")}catch(b){Ce(e,e.return,b)}}if(r&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&sh(l,o),Ji(i,a);var u=Ji(i,o);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?ih(l,f):d==="dangerouslySetInnerHTML"?oh(l,f):d==="children"?sl(l,f):lu(l,d,f,u)}switch(i){case"input":Ki(l,o);break;case"textarea":rh(l,o);break;case"select":var m=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Ks(l,!!o.multiple,x,!1):m!==!!o.multiple&&(o.defaultValue!=null?Ks(l,!!o.multiple,o.defaultValue,!0):Ks(l,!!o.multiple,o.multiple?[]:"",!1))}l[fl]=o}catch(b){Ce(e,e.return,b)}}break;case 6:if(It(t,e),qt(e),r&4){if(e.stateNode===null)throw Error(H(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(b){Ce(e,e.return,b)}}break;case 3:if(It(t,e),qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(b){Ce(e,e.return,b)}break;case 4:It(t,e),qt(e);break;case 13:It(t,e),qt(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(Fu=Ae())),r&4&&Ef(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(u=Xe)||d,It(t,e),Xe=u):It(t,e),qt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(q=e,d=e.child;d!==null;){for(f=q=d;q!==null;){switch(m=q,x=m.child,m.tag){case 0:case 11:case 14:case 15:Jr(4,m,m.return);break;case 1:Hs(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(b){Ce(r,n,b)}}break;case 5:Hs(m,m.return);break;case 22:if(m.memoizedState!==null){Tf(f);continue}}x!==null?(x.return=m,q=x):Tf(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{l=f.stateNode,u?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=ah("display",a))}catch(b){Ce(e,e.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){Ce(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:It(t,e),qt(e),r&4&&Ef(e);break;case 21:break;default:It(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rp(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(sl(l,""),r.flags&=-33);var o=kf(e);Ac(e,o,l);break;case 3:case 4:var a=r.stateNode.containerInfo,i=kf(e);Tc(e,i,a);break;default:throw Error(H(161))}}catch(c){Ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yv(e,t,n){q=e,Mp(e)}function Mp(e,t,n){for(var r=(e.mode&1)!==0;q!==null;){var l=q,o=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||to;if(!a){var i=l.alternate,c=i!==null&&i.memoizedState!==null||Xe;i=to;var u=Xe;if(to=a,(Xe=c)&&!u)for(q=l;q!==null;)a=q,c=a.child,a.tag===22&&a.memoizedState!==null?Af(l):c!==null?(c.return=a,q=c):Af(l);for(;o!==null;)q=o,Mp(o),o=o.sibling;q=l,to=i,Xe=u}Cf(e)}else l.subtreeFlags&8772&&o!==null?(o.return=l,q=o):Cf(e)}}function Cf(e){for(;q!==null;){var t=q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||ja(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Mt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&df(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}df(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&al(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Xe||t.flags&512&&Cc(t)}catch(m){Ce(t,t.return,m)}}if(t===e){q=null;break}if(n=t.sibling,n!==null){n.return=t.return,q=n;break}q=t.return}}function Tf(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,q=n;break}q=t.return}}function Af(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ja(4,t)}catch(c){Ce(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(c){Ce(t,l,c)}}var o=t.return;try{Cc(t)}catch(c){Ce(t,o,c)}break;case 5:var a=t.return;try{Cc(t)}catch(c){Ce(t,a,c)}}}catch(c){Ce(t,t.return,c)}if(t===e){q=null;break}var i=t.sibling;if(i!==null){i.return=t.return,q=i;break}q=t.return}}var vv=Math.ceil,Jo=kn.ReactCurrentDispatcher,Mu=kn.ReactCurrentOwner,Pt=kn.ReactCurrentBatchConfig,ie=0,Oe=null,_e=null,Be=0,pt=0,Gs=Qn(0),Ie=0,yl=null,bs=0,Sa=0,$u=0,el=null,lt=null,Fu=0,cr=1/0,un=null,ea=!1,Pc=null,Vn=null,no=!1,Fn=null,ta=0,tl=0,_c=null,ko=-1,Eo=0;function Je(){return ie&6?Ae():ko!==-1?ko:ko=Ae()}function Hn(e){return e.mode&1?ie&2&&Be!==0?Be&-Be:nv.transition!==null?(Eo===0&&(Eo=bh()),Eo):(e=de,e!==0||(e=window.event,e=e===void 0?16:Ch(e.type)),e):1}function Wt(e,t,n,r){if(50<tl)throw tl=0,_c=null,Error(H(185));Pl(e,n,r),(!(ie&2)||e!==Oe)&&(e===Oe&&(!(ie&2)&&(Sa|=n),Ie===4&&In(e,Be)),ut(e,r),n===1&&ie===0&&!(t.mode&1)&&(cr=Ae()+500,ba&&Zn()))}function ut(e,t){var n=e.callbackNode;ny(e,t);var r=Fo(e,e===Oe?Be:0);if(r===0)n!==null&&$d(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$d(n),t===1)e.tag===0?tv(Pf.bind(null,e)):Gh(Pf.bind(null,e)),Qy(function(){!(ie&6)&&Zn()}),n=null;else{switch(wh(r)){case 1:n=uu;break;case 4:n=yh;break;case 16:n=$o;break;case 536870912:n=vh;break;default:n=$o}n=Vp(n,$p.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $p(e,t){if(ko=-1,Eo=0,ie&6)throw Error(H(327));var n=e.callbackNode;if(Js()&&e.callbackNode!==n)return null;var r=Fo(e,e===Oe?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=na(e,r);else{t=r;var l=ie;ie|=2;var o=zp();(Oe!==e||Be!==t)&&(un=null,cr=Ae()+500,fs(e,t));do try{Nv();break}catch(i){Fp(e,i)}while(!0);ju(),Jo.current=o,ie=l,_e!==null?t=0:(Oe=null,Be=0,t=Ie)}if(t!==0){if(t===2&&(l=rc(e),l!==0&&(r=l,t=Lc(e,l))),t===1)throw n=yl,fs(e,0),In(e,r),ut(e,Ae()),n;if(t===6)In(e,r);else{if(l=e.current.alternate,!(r&30)&&!bv(l)&&(t=na(e,r),t===2&&(o=rc(e),o!==0&&(r=o,t=Lc(e,o))),t===1))throw n=yl,fs(e,0),In(e,r),ut(e,Ae()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:ls(e,lt,un);break;case 3:if(In(e,r),(r&130023424)===r&&(t=Fu+500-Ae(),10<t)){if(Fo(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){Je(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=fc(ls.bind(null,e,lt,un),t);break}ls(e,lt,un);break;case 4:if(In(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-Ut(r);o=1<<a,a=t[a],a>l&&(l=a),r&=~o}if(r=l,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vv(r/1960))-r,10<r){e.timeoutHandle=fc(ls.bind(null,e,lt,un),r);break}ls(e,lt,un);break;case 5:ls(e,lt,un);break;default:throw Error(H(329))}}}return ut(e,Ae()),e.callbackNode===n?$p.bind(null,e):null}function Lc(e,t){var n=el;return e.current.memoizedState.isDehydrated&&(fs(e,t).flags|=256),e=na(e,t),e!==2&&(t=lt,lt=n,t!==null&&Rc(t)),e}function Rc(e){lt===null?lt=e:lt.push.apply(lt,e)}function bv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],o=l.getSnapshot;l=l.value;try{if(!Vt(o(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~$u,t&=~Sa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function Pf(e){if(ie&6)throw Error(H(327));Js();var t=Fo(e,0);if(!(t&1))return ut(e,Ae()),null;var n=na(e,t);if(e.tag!==0&&n===2){var r=rc(e);r!==0&&(t=r,n=Lc(e,r))}if(n===1)throw n=yl,fs(e,0),In(e,t),ut(e,Ae()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ls(e,lt,un),ut(e,Ae()),null}function zu(e,t){var n=ie;ie|=1;try{return e(t)}finally{ie=n,ie===0&&(cr=Ae()+500,ba&&Zn())}}function ws(e){Fn!==null&&Fn.tag===0&&!(ie&6)&&Js();var t=ie;ie|=1;var n=Pt.transition,r=de;try{if(Pt.transition=null,de=1,e)return e()}finally{de=r,Pt.transition=n,ie=t,!(ie&6)&&Zn()}}function Ou(){pt=Gs.current,xe(Gs)}function fs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qy(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(bu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bo();break;case 3:ar(),xe(it),xe(qe),Au();break;case 5:Tu(r);break;case 4:ar();break;case 13:xe(je);break;case 19:xe(je);break;case 10:Su(r.type._context);break;case 22:case 23:Ou()}n=n.return}if(Oe=e,_e=e=Gn(e.current,null),Be=pt=t,Ie=0,yl=null,$u=Sa=bs=0,lt=el=null,is!==null){for(t=0;t<is.length;t++)if(n=is[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=l,r.next=a}n.pending=r}is=null}return e}function Fp(e,t){do{var n=_e;try{if(ju(),No.current=Zo,Qo){for(var r=Se.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Qo=!1}if(vs=0,ze=De=Se=null,Zr=!1,pl=0,Mu.current=null,n===null||n.return===null){Ie=1,yl=t,_e=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=Be,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=i,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=gf(a);if(x!==null){x.flags&=-257,yf(x,a,i,o,t),x.mode&1&&xf(o,u,t),t=x,c=u;var y=t.updateQueue;if(y===null){var b=new Set;b.add(c),t.updateQueue=b}else y.add(c);break e}else{if(!(t&1)){xf(o,u,t),Uu();break e}c=Error(H(426))}}else if(we&&i.mode&1){var w=gf(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),yf(w,a,i,o,t),wu(ir(c,i));break e}}o=c=ir(c,i),Ie!==4&&(Ie=2),el===null?el=[o]:el.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=wp(o,c,t);uf(o,g);break e;case 1:i=c;var h=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vn===null||!Vn.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=Np(o,i,t);uf(o,N);break e}}o=o.return}while(o!==null)}Up(n)}catch(S){t=S,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(!0)}function zp(){var e=Jo.current;return Jo.current=Zo,e===null?Zo:e}function Uu(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Oe===null||!(bs&268435455)&&!(Sa&268435455)||In(Oe,Be)}function na(e,t){var n=ie;ie|=2;var r=zp();(Oe!==e||Be!==t)&&(un=null,fs(e,t));do try{wv();break}catch(l){Fp(e,l)}while(!0);if(ju(),ie=n,Jo.current=r,_e!==null)throw Error(H(261));return Oe=null,Be=0,Ie}function wv(){for(;_e!==null;)Op(_e)}function Nv(){for(;_e!==null&&!Yg();)Op(_e)}function Op(e){var t=Bp(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Up(e):_e=t,Mu.current=null}function Up(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pv(n,t),n!==null){n.flags&=32767,_e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,_e=null;return}}else if(n=hv(n,t,pt),n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Ie===0&&(Ie=5)}function ls(e,t,n){var r=de,l=Pt.transition;try{Pt.transition=null,de=1,jv(e,t,n,r)}finally{Pt.transition=l,de=r}return null}function jv(e,t,n,r){do Js();while(Fn!==null);if(ie&6)throw Error(H(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(sy(e,o),e===Oe&&(_e=Oe=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||no||(no=!0,Vp($o,function(){return Js(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pt.transition,Pt.transition=null;var a=de;de=1;var i=ie;ie|=4,Mu.current=null,gv(e,n),Ip(n,e),By(uc),zo=!!cc,uc=cc=null,e.current=n,yv(n),Kg(),ie=i,de=a,Pt.transition=o}else e.current=n;if(no&&(no=!1,Fn=e,ta=l),o=e.pendingLanes,o===0&&(Vn=null),Qg(n.stateNode),ut(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(ea)throw ea=!1,e=Pc,Pc=null,e;return ta&1&&e.tag!==0&&Js(),o=e.pendingLanes,o&1?e===_c?tl++:(tl=0,_c=e):tl=0,Zn(),null}function Js(){if(Fn!==null){var e=wh(ta),t=Pt.transition,n=de;try{if(Pt.transition=null,de=16>e?16:e,Fn===null)var r=!1;else{if(e=Fn,Fn=null,ta=0,ie&6)throw Error(H(331));var l=ie;for(ie|=4,q=e.current;q!==null;){var o=q,a=o.child;if(q.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Jr(8,d,o)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var m=d.sibling,x=d.return;if(Lp(d),d===u){q=null;break}if(m!==null){m.return=x,q=m;break}q=x}}}var y=o.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}q=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,q=a;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Jr(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,q=g;break e}q=o.return}}var h=e.current;for(q=h;q!==null;){a=q;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,q=v;else e:for(a=h;q!==null;){if(i=q,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:ja(9,i)}}catch(S){Ce(i,i.return,S)}if(i===a){q=null;break e}var N=i.sibling;if(N!==null){N.return=i.return,q=N;break e}q=i.return}}if(ie=l,Zn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(pa,e)}catch{}r=!0}return r}finally{de=n,Pt.transition=t}}return!1}function _f(e,t,n){t=ir(n,t),t=wp(e,t,1),e=Bn(e,t,1),t=Je(),e!==null&&(Pl(e,1,t),ut(e,t))}function Ce(e,t,n){if(e.tag===3)_f(e,e,n);else for(;t!==null;){if(t.tag===3){_f(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){e=ir(n,e),e=Np(t,e,1),t=Bn(t,e,1),e=Je(),t!==null&&(Pl(t,1,e),ut(t,e));break}}t=t.return}}function Sv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&n,Oe===e&&(Be&n)===n&&(Ie===4||Ie===3&&(Be&130023424)===Be&&500>Ae()-Fu?fs(e,0):$u|=n),ut(e,t)}function Wp(e,t){t===0&&(e.mode&1?(t=Gl,Gl<<=1,!(Gl&130023424)&&(Gl=4194304)):t=1);var n=Je();e=bn(e,t),e!==null&&(Pl(e,t,n),ut(e,n))}function kv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wp(e,n)}function Ev(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),Wp(e,n)}var Bp;Bp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)ot=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ot=!1,mv(e,t,n);ot=!!(e.flags&131072)}else ot=!1,we&&t.flags&1048576&&Yh(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;So(e,t),e=t.pendingProps;var l=rr(t,qe.current);Zs(t,n),l=_u(null,t,r,e,l,n);var o=Lu();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(r)?(o=!0,Vo(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Eu(t),l.updater=Na,t.stateNode=l,l._reactInternals=t,vc(t,r,e,n),t=Nc(null,t,r,!0,o,n)):(t.tag=0,we&&o&&vu(t),Ze(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(So(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Tv(r),e=Mt(r,e),l){case 0:t=wc(null,t,r,e,n);break e;case 1:t=wf(null,t,r,e,n);break e;case 11:t=vf(null,t,r,e,n);break e;case 14:t=bf(null,t,r,Mt(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Mt(r,l),wc(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Mt(r,l),wf(e,t,r,l,n);case 3:e:{if(Ep(t),e===null)throw Error(H(387));r=t.pendingProps,o=t.memoizedState,l=o.element,Jh(e,t),Xo(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=ir(Error(H(423)),t),t=Nf(e,t,r,n,l);break e}else if(r!==l){l=ir(Error(H(424)),t),t=Nf(e,t,r,n,l);break e}else for(xt=Wn(t.stateNode.containerInfo.firstChild),gt=t,we=!0,zt=null,n=Qh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lr(),r===l){t=wn(e,t,n);break e}Ze(e,t,r,n)}t=t.child}return t;case 5:return ep(t),e===null&&xc(t),r=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,a=l.children,dc(r,l)?a=null:o!==null&&dc(r,o)&&(t.flags|=32),kp(e,t),Ze(e,t,a,n),t.child;case 6:return e===null&&xc(t),null;case 13:return Cp(e,t,n);case 4:return Cu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=or(t,null,r,n):Ze(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Mt(r,l),vf(e,t,r,l,n);case 7:return Ze(e,t,t.pendingProps,n),t.child;case 8:return Ze(e,t,t.pendingProps.children,n),t.child;case 12:return Ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,o=t.memoizedProps,a=l.value,me(Yo,r._currentValue),r._currentValue=a,o!==null)if(Vt(o.value,a)){if(o.children===l.children&&!it.current){t=wn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=pn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),gc(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(H(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),gc(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ze(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Zs(t,n),l=_t(l),r=r(l),t.flags|=1,Ze(e,t,r,n),t.child;case 14:return r=t.type,l=Mt(r,t.pendingProps),l=Mt(r.type,l),bf(e,t,r,l,n);case 15:return jp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Mt(r,l),So(e,t),t.tag=1,ct(r)?(e=!0,Vo(t)):e=!1,Zs(t,n),bp(t,r,l),vc(t,r,l,n),Nc(null,t,r,!0,e,n);case 19:return Tp(e,t,n);case 22:return Sp(e,t,n)}throw Error(H(156,t.tag))};function Vp(e,t){return gh(e,t)}function Cv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,r){return new Cv(e,t,n,r)}function Wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tv(e){if(typeof e=="function")return Wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===au)return 11;if(e===iu)return 14}return 2}function Gn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Co(e,t,n,r,l,o){var a=2;if(r=e,typeof e=="function")Wu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ms:return ms(n.children,l,o,t);case ou:a=8,l|=8;break;case Bi:return e=Tt(12,n,t,l|2),e.elementType=Bi,e.lanes=o,e;case Vi:return e=Tt(13,n,t,l),e.elementType=Vi,e.lanes=o,e;case Hi:return e=Tt(19,n,t,l),e.elementType=Hi,e.lanes=o,e;case eh:return ka(n,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zm:a=10;break e;case Jm:a=9;break e;case au:a=11;break e;case iu:a=14;break e;case Pn:a=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=Tt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=o,t}function ms(e,t,n,r){return e=Tt(7,e,r,t),e.lanes=n,e}function ka(e,t,n,r){return e=Tt(22,e,r,t),e.elementType=eh,e.lanes=n,e.stateNode={isHidden:!1},e}function wi(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function Ni(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Av(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ni(0),this.expirationTimes=ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,l,o,a,i,c){return e=new Av(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Tt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(o),e}function Pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hp(e){if(!e)return Xn;e=e._reactInternals;e:{if(ks(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(ct(n))return Hh(e,n,t)}return t}function Gp(e,t,n,r,l,o,a,i,c){return e=Bu(n,r,!0,e,l,o,a,i,c),e.context=Hp(null),n=e.current,r=Je(),l=Hn(n),o=pn(r,l),o.callback=t??null,Bn(n,o,l),e.current.lanes=l,Pl(e,l,r),ut(e,r),e}function Ea(e,t,n,r){var l=t.current,o=Je(),a=Hn(l);return n=Hp(n),t.context===null?t.context=n:t.pendingContext=n,t=pn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Bn(l,t,a),e!==null&&(Wt(e,l,a,o),wo(e,l,a)),a}function sa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vu(e,t){Lf(e,t),(e=e.alternate)&&Lf(e,t)}function _v(){return null}var Yp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hu(e){this._internalRoot=e}Ca.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Ea(e,t,null,null)};Ca.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ws(function(){Ea(null,e,null,null)}),t[vn]=null}};function Ca(e){this._internalRoot=e}Ca.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dn.length&&t!==0&&t<Dn[n].priority;n++);Dn.splice(n,0,e),n===0&&Eh(e)}};function Gu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rf(){}function Lv(e,t,n,r,l){if(l){if(typeof r=="function"){var o=r;r=function(){var u=sa(a);o.call(u)}}var a=Gp(t,r,e,0,null,!1,!1,"",Rf);return e._reactRootContainer=a,e[vn]=a.current,ul(e.nodeType===8?e.parentNode:e),ws(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var i=r;r=function(){var u=sa(c);i.call(u)}}var c=Bu(e,0,!1,null,null,!1,!1,"",Rf);return e._reactRootContainer=c,e[vn]=c.current,ul(e.nodeType===8?e.parentNode:e),ws(function(){Ea(t,c,n,r)}),c}function Aa(e,t,n,r,l){var o=n._reactRootContainer;if(o){var a=o;if(typeof l=="function"){var i=l;l=function(){var c=sa(a);i.call(c)}}Ea(t,a,e,l)}else a=Lv(n,t,e,l,r);return sa(a)}Nh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wr(t.pendingLanes);n!==0&&(du(t,n|1),ut(t,Ae()),!(ie&6)&&(cr=Ae()+500,Zn()))}break;case 13:ws(function(){var r=bn(e,1);if(r!==null){var l=Je();Wt(r,e,1,l)}}),Vu(e,1)}};fu=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=Je();Wt(t,e,134217728,n)}Vu(e,134217728)}};jh=function(e){if(e.tag===13){var t=Hn(e),n=bn(e,t);if(n!==null){var r=Je();Wt(n,e,t,r)}Vu(e,t)}};Sh=function(){return de};kh=function(e,t){var n=de;try{return de=e,t()}finally{de=n}};tc=function(e,t,n){switch(t){case"input":if(Ki(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=va(r);if(!l)throw Error(H(90));nh(r),Ki(r,l)}}}break;case"textarea":rh(e,n);break;case"select":t=n.value,t!=null&&Ks(e,!!n.multiple,t,!1)}};dh=zu;fh=ws;var Rv={usingClientEntryPoint:!1,Events:[Ll,Os,va,ch,uh,zu]},Pr={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dv={bundleType:Pr.bundleType,version:Pr.version,rendererPackageName:Pr.rendererPackageName,rendererConfig:Pr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ph(e),e===null?null:e.stateNode},findFiberByHostInstance:Pr.findFiberByHostInstance||_v,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var so=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!so.isDisabled&&so.supportsFiber)try{pa=so.inject(Dv),en=so}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rv;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gu(t))throw Error(H(200));return Pv(e,t,null,n)};bt.createRoot=function(e,t){if(!Gu(e))throw Error(H(299));var n=!1,r="",l=Yp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Bu(e,1,!1,null,null,n,!1,r,l),e[vn]=t.current,ul(e.nodeType===8?e.parentNode:e),new Hu(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=ph(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return ws(e)};bt.hydrate=function(e,t,n){if(!Ta(t))throw Error(H(200));return Aa(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!Gu(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,l=!1,o="",a=Yp;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Gp(t,null,e,1,n??null,l,!1,o,a),e[vn]=t.current,ul(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Ca(t)};bt.render=function(e,t,n){if(!Ta(t))throw Error(H(200));return Aa(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!Ta(e))throw Error(H(40));return e._reactRootContainer?(ws(function(){Aa(null,null,e,!1,function(){e._reactRootContainer=null,e[vn]=null})}),!0):!1};bt.unstable_batchedUpdates=zu;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ta(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Aa(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function Kp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kp)}catch(e){console.error(e)}}Kp(),Km.exports=bt;var Iv=Km.exports,Df=Iv;Ui.createRoot=Df.createRoot,Ui.hydrateRoot=Df.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var If="popstate";function Mv(e={}){function t(r,l){let{pathname:o,search:a,hash:i}=r.location;return Dc("",{pathname:o,search:a,hash:i},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:vl(l)}return Fv(t,n,null,e)}function Ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $v(){return Math.random().toString(36).substring(2,10)}function Mf(e,t){return{usr:e.state,key:e.key,idx:t}}function Dc(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?gr(t):t,state:n,key:t&&t.key||r||$v()}}function vl({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function gr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Fv(e,t,n,r={}){let{window:l=document.defaultView,v5Compat:o=!1}=r,a=l.history,i="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function f(){i="POP";let w=d(),g=w==null?null:w-u;u=w,c&&c({action:i,location:b.location,delta:g})}function m(w,g){i="PUSH";let h=Dc(b.location,w,g);u=d()+1;let v=Mf(h,u),N=b.createHref(h);try{a.pushState(v,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;l.location.assign(N)}o&&c&&c({action:i,location:b.location,delta:1})}function x(w,g){i="REPLACE";let h=Dc(b.location,w,g);u=d();let v=Mf(h,u),N=b.createHref(h);a.replaceState(v,"",N),o&&c&&c({action:i,location:b.location,delta:0})}function y(w){return zv(w)}let b={get action(){return i},get location(){return e(l,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(If,f),c=w,()=>{l.removeEventListener(If,f),c=null}},createHref(w){return t(l,w)},createURL:y,encodeLocation(w){let g=y(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:x,go(w){return a.go(w)}};return b}function zv(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ne(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:vl(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Xp(e,t,n="/"){return Ov(e,t,n,!1)}function Ov(e,t,n,r){let l=typeof t=="string"?gr(t):t,o=Nn(l.pathname||"/",n);if(o==null)return null;let a=qp(e);Uv(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=Zv(o);i=qv(a[c],u,r)}return i}function qp(e,t=[],n=[],r="",l=!1){let o=(a,i,c=l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;Ne(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=xn([r,d.relativePath]),m=n.concat(d);a.children&&a.children.length>0&&(Ne(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),qp(a.children,t,m,f,c)),!(a.path==null&&!a.index)&&t.push({path:f,score:Kv(f,a.index),routesMeta:m})};return e.forEach((a,i)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))o(a,i);else for(let u of Qp(a.path))o(a,i,!0,u)}),t}function Qp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return l?[o,""]:[o];let a=Qp(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),l&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Uv(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Xv(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Wv=/^:[\w-]+$/,Bv=3,Vv=2,Hv=1,Gv=10,Yv=-2,$f=e=>e==="*";function Kv(e,t){let n=e.split("/"),r=n.length;return n.some($f)&&(r+=Yv),t&&(r+=Vv),n.filter(l=>!$f(l)).reduce((l,o)=>l+(Wv.test(o)?Bv:o===""?Hv:Gv),r)}function Xv(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function qv(e,t,n=!1){let{routesMeta:r}=e,l={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=ra({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=ra({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(l,f.params),a.push({params:l,pathname:xn([o,f.pathname]),pathnameBase:nb(xn([o,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(o=xn([o,f.pathnameBase]))}return a}function ra(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Qv(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let o=l[0],a=o.replace(/(.)\/+$/,"$1"),i=l.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let y=i[m]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const x=i[m];return f&&!x?u[d]=void 0:u[d]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function Qv(e,t=!1,n=!0){Rt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function Zv(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Nn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var Zp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jv=e=>Zp.test(e);function eb(e,t="/"){let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?gr(e):e,o;if(n)if(Jv(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Rt(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?o=Ff(n.substring(1),"/"):o=Ff(n,t)}else o=t;return{pathname:o,search:sb(r),hash:rb(l)}}function Ff(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ji(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tb(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Yu(e){let t=tb(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Ku(e,t,n,r=!1){let l;typeof e=="string"?l=gr(e):(l={...e},Ne(!l.pathname||!l.pathname.includes("?"),ji("?","pathname","search",l)),Ne(!l.pathname||!l.pathname.includes("#"),ji("#","pathname","hash",l)),Ne(!l.search||!l.search.includes("#"),ji("#","search","hash",l)));let o=e===""||l.pathname==="",a=o?"/":l.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;l.pathname=m.join("/")}i=f>=0?t[f]:"/"}let c=eb(l,i),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var xn=e=>e.join("/").replace(/\/\/+/g,"/"),nb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,lb=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ob(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function ab(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Jp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ex(e,t){let n=e;if(typeof n!="string"||!Zp.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,l=!1;if(Jp)try{let o=new URL(window.location.href),a=n.startsWith("//")?new URL(o.protocol+n):new URL(n),i=Nn(a.pathname,t);a.origin===o.origin&&i!=null?n=i+a.search+a.hash:l=!0}catch{Rt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tx=["POST","PUT","PATCH","DELETE"];new Set(tx);var ib=["GET",...tx];new Set(ib);var yr=p.createContext(null);yr.displayName="DataRouter";var Pa=p.createContext(null);Pa.displayName="DataRouterState";var cb=p.createContext(!1),nx=p.createContext({isTransitioning:!1});nx.displayName="ViewTransition";var ub=p.createContext(new Map);ub.displayName="Fetchers";var db=p.createContext(null);db.displayName="Await";var Nt=p.createContext(null);Nt.displayName="Navigation";var Dl=p.createContext(null);Dl.displayName="Location";var Ht=p.createContext({outlet:null,matches:[],isDataRoute:!1});Ht.displayName="Route";var Xu=p.createContext(null);Xu.displayName="RouteError";var sx="REACT_ROUTER_ERROR",fb="REDIRECT",mb="ROUTE_ERROR_RESPONSE";function hb(e){if(e.startsWith(`${sx}:${fb}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function pb(e){if(e.startsWith(`${sx}:${mb}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new lb(t.status,t.statusText,t.data)}catch{}}function xb(e,{relative:t}={}){Ne(vr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=p.useContext(Nt),{hash:l,pathname:o,search:a}=Il(e,{relative:t}),i=o;return n!=="/"&&(i=o==="/"?n:xn([n,o])),r.createHref({pathname:i,search:a,hash:l})}function vr(){return p.useContext(Dl)!=null}function En(){return Ne(vr(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Dl).location}var rx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lx(e){p.useContext(Nt).static||p.useLayoutEffect(e)}function jt(){let{isDataRoute:e}=p.useContext(Ht);return e?Ab():gb()}function gb(){Ne(vr(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(yr),{basename:t,navigator:n}=p.useContext(Nt),{matches:r}=p.useContext(Ht),{pathname:l}=En(),o=JSON.stringify(Yu(r)),a=p.useRef(!1);return lx(()=>{a.current=!0}),p.useCallback((c,u={})=>{if(Rt(a.current,rx),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=Ku(c,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:xn([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,l,e])}p.createContext(null);function _a(){let{matches:e}=p.useContext(Ht),t=e[e.length-1];return t?t.params:{}}function Il(e,{relative:t}={}){let{matches:n}=p.useContext(Ht),{pathname:r}=En(),l=JSON.stringify(Yu(n));return p.useMemo(()=>Ku(e,JSON.parse(l),r,t==="path"),[e,l,r,t])}function yb(e,t){return ox(e,t)}function ox(e,t,n,r,l){var h;Ne(vr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=p.useContext(Nt),{matches:a}=p.useContext(Ht),i=a[a.length-1],c=i?i.params:{},u=i?i.pathname:"/",d=i?i.pathnameBase:"/",f=i&&i.route;{let v=f&&f.path||"";ix(u,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let m=En(),x;if(t){let v=typeof t=="string"?gr(t):t;Ne(d==="/"||((h=v.pathname)==null?void 0:h.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),x=v}else x=m;let y=x.pathname||"/",b=y;if(d!=="/"){let v=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=Xp(e,{pathname:b});Rt(f||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Rt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=jb(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:xn([d,o.encodeLocation?o.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:xn([d,o.encodeLocation?o.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),a,n,r,l);return t&&g?p.createElement(Dl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},g):g}function vb(){let e=Tb(),t=ob(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:o},"ErrorBoundary")," or"," ",p.createElement("code",{style:o},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:l},n):null,a)}var bb=p.createElement(vb,null),ax=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=pb(e.digest);n&&(e=n)}let t=e!==void 0?p.createElement(Ht.Provider,{value:this.props.routeContext},p.createElement(Xu.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?p.createElement(wb,{error:e},t):t}};ax.contextType=cb;var Si=new WeakMap;function wb({children:e,error:t}){let{basename:n}=p.useContext(Nt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=hb(t.digest);if(r){let l=Si.get(t);if(l)throw l;let o=ex(r.location,n);if(Jp&&!Si.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Si.set(t,a),a}return p.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function Nb({routeContext:e,match:t,children:n}){let r=p.useContext(yr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(Ht.Provider,{value:e},n)}function jb(e,t=[],n=null,r=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ne(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let i=!1,c=-1;if(n)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:x}=n,y=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){i=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}let u=n&&r?(d,f)=>{var m,x;r(d,{location:n.location,params:((x=(m=n.matches)==null?void 0:m[0])==null?void 0:x.params)??{},unstable_pattern:ab(n.matches),errorInfo:f})}:void 0;return o.reduceRight((d,f,m)=>{let x,y=!1,b=null,w=null;n&&(x=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||bb,i&&(c<0&&m===0?(ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):c===m&&(y=!0,w=f.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),h=()=>{let v;return x?v=b:y?v=w:f.route.Component?v=p.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=d,p.createElement(Nb,{match:f,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(ax,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:h(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:u}):h()},null)}function qu(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sb(e){let t=p.useContext(yr);return Ne(t,qu(e)),t}function kb(e){let t=p.useContext(Pa);return Ne(t,qu(e)),t}function Eb(e){let t=p.useContext(Ht);return Ne(t,qu(e)),t}function Qu(e){let t=Eb(e),n=t.matches[t.matches.length-1];return Ne(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Cb(){return Qu("useRouteId")}function Tb(){var r;let e=p.useContext(Xu),t=kb("useRouteError"),n=Qu("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Ab(){let{router:e}=Sb("useNavigate"),t=Qu("useNavigate"),n=p.useRef(!1);return lx(()=>{n.current=!0}),p.useCallback(async(l,o={})=>{Rt(n.current,rx),n.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:t,...o}))},[e,t])}var zf={};function ix(e,t,n){!t&&!zf[e]&&(zf[e]=!0,Rt(!1,n))}p.memo(Pb);function Pb({routes:e,future:t,state:n,onError:r}){return ox(e,void 0,n,r,t)}function Re({to:e,replace:t,state:n,relative:r}){Ne(vr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=p.useContext(Nt);Rt(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=p.useContext(Ht),{pathname:a}=En(),i=jt(),c=Ku(e,Yu(o),a,r==="path"),u=JSON.stringify(c);return p.useEffect(()=>{i(JSON.parse(u),{replace:t,state:n,relative:r})},[i,u,r,t,n]),null}function be(e){Ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _b({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:l,static:o=!1,unstable_useTransitions:a}){Ne(!vr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:i,navigator:l,static:o,unstable_useTransitions:a,future:{}}),[i,l,o,a]);typeof n=="string"&&(n=gr(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:x="default"}=n,y=p.useMemo(()=>{let b=Nn(u,i);return b==null?null:{location:{pathname:b,search:d,hash:f,state:m,key:x},navigationType:r}},[i,u,d,f,m,x,r]);return Rt(y!=null,`<Router basename="${i}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:p.createElement(Nt.Provider,{value:c},p.createElement(Dl.Provider,{children:t,value:y}))}function Lb({children:e,location:t}){return yb(Ic(e),t)}function Ic(e,t=[]){let n=[];return p.Children.forEach(e,(r,l)=>{if(!p.isValidElement(r))return;let o=[...t,l];if(r.type===p.Fragment){n.push.apply(n,Ic(r.props.children,o));return}Ne(r.type===be,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ne(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ic(r.props.children,o)),n.push(a)}),n}var To="get",Ao="application/x-www-form-urlencoded";function La(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Rb(e){return La(e)&&e.tagName.toLowerCase()==="button"}function Db(e){return La(e)&&e.tagName.toLowerCase()==="form"}function Ib(e){return La(e)&&e.tagName.toLowerCase()==="input"}function Mb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $b(e,t){return e.button===0&&(!t||t==="_self")&&!Mb(e)}var ro=null;function Fb(){if(ro===null)try{new FormData(document.createElement("form"),0),ro=!1}catch{ro=!0}return ro}var zb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ki(e){return e!=null&&!zb.has(e)?(Rt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ao}"`),null):e}function Ob(e,t){let n,r,l,o,a;if(Db(e)){let i=e.getAttribute("action");r=i?Nn(i,t):null,n=e.getAttribute("method")||To,l=ki(e.getAttribute("enctype"))||Ao,o=new FormData(e)}else if(Rb(e)||Ib(e)&&(e.type==="submit"||e.type==="image")){let i=e.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||i.getAttribute("action");if(r=c?Nn(c,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||To,l=ki(e.getAttribute("formenctype"))||ki(i.getAttribute("enctype"))||Ao,o=new FormData(i,e),!Fb()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else u&&o.append(u,f)}}else{if(La(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=To,r=null,l=Ao,a=e}return o&&l==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zu(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ub(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Nn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Wb(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bb(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Vb(e,t,n){let r=await Promise.all(e.map(async l=>{let o=t.routes[l.route.id];if(o){let a=await Wb(o,n);return a.links?a.links():[]}return[]}));return Kb(r.flat(1).filter(Bb).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Of(e,t,n,r,l,o){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,i=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return o==="assets"?t.filter((c,u)=>a(c,u)||i(c,u)):o==="data"?t.filter((c,u)=>{var f;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||i(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Hb(e,t,{includeHydrateFallback:n}={}){return Gb(e.map(r=>{let l=t.routes[r.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function Gb(e){return[...new Set(e)]}function Yb(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Kb(e,t){let n=new Set;return new Set(t),e.reduce((r,l)=>{let o=JSON.stringify(Yb(l));return n.has(o)||(n.add(o),r.push({key:o,link:l})),r},[])}function cx(){let e=p.useContext(yr);return Zu(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Xb(){let e=p.useContext(Pa);return Zu(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ju=p.createContext(void 0);Ju.displayName="FrameworkContext";function ux(){let e=p.useContext(Ju);return Zu(e,"You must render this element inside a <HydratedRouter> element"),e}function qb(e,t){let n=p.useContext(Ju),[r,l]=p.useState(!1),[o,a]=p.useState(!1),{onFocus:i,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=p.useRef(null);p.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let b=g=>{g.forEach(h=>{a(h.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[e]),p.useEffect(()=>{if(r){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[r]);let x=()=>{l(!0)},y=()=>{l(!1),a(!1)};return n?e!=="intent"?[o,m,{}]:[o,m,{onFocus:_r(i,x),onBlur:_r(c,y),onMouseEnter:_r(u,x),onMouseLeave:_r(d,y),onTouchStart:_r(f,x)}]:[!1,m,{}]}function _r(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Qb({page:e,...t}){let{router:n}=cx(),r=p.useMemo(()=>Xp(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?p.createElement(Jb,{page:e,matches:r,...t}):null}function Zb(e){let{manifest:t,routeModules:n}=ux(),[r,l]=p.useState([]);return p.useEffect(()=>{let o=!1;return Vb(e,t,n).then(a=>{o||l(a)}),()=>{o=!0}},[e,t,n]),r}function Jb({page:e,matches:t,...n}){let r=En(),{manifest:l,routeModules:o}=ux(),{basename:a}=cx(),{loaderData:i,matches:c}=Xb(),u=p.useMemo(()=>Of(e,t,c,l,r,"data"),[e,t,c,l,r]),d=p.useMemo(()=>Of(e,t,c,l,r,"assets"),[e,t,c,l,r]),f=p.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,b=!1;if(t.forEach(g=>{var v;let h=l.routes[g.route.id];!h||!h.hasLoader||(!u.some(N=>N.route.id===g.route.id)&&g.route.id in i&&((v=o[g.route.id])!=null&&v.shouldRevalidate)||h.hasClientLoader?b=!0:y.add(g.route.id))}),y.size===0)return[];let w=Ub(e,a,"data");return b&&y.size>0&&w.searchParams.set("_routes",t.filter(g=>y.has(g.route.id)).map(g=>g.route.id).join(",")),[w.pathname+w.search]},[a,i,r,l,u,t,e,o]),m=p.useMemo(()=>Hb(d,l),[d,l]),x=Zb(d);return p.createElement(p.Fragment,null,f.map(y=>p.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>p.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),x.map(({key:y,link:b})=>p.createElement("link",{key:y,nonce:n.nonce,...b})))}function ew(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var tw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tw&&(window.__reactRouterVersion="7.11.0")}catch{}function nw({basename:e,children:t,unstable_useTransitions:n,window:r}){let l=p.useRef();l.current==null&&(l.current=Mv({window:r,v5Compat:!0}));let o=l.current,[a,i]=p.useState({action:o.action,location:o.location}),c=p.useCallback(u=>{n===!1?i(u):p.startTransition(()=>i(u))},[n]);return p.useLayoutEffect(()=>o.listen(c),[o,c]),p.createElement(_b,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,unstable_useTransitions:n})}var dx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,se=p.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:l,reloadDocument:o,replace:a,state:i,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m,...x},y){let{basename:b,unstable_useTransitions:w}=p.useContext(Nt),g=typeof u=="string"&&dx.test(u),h=ex(u,b);u=h.to;let v=xb(u,{relative:l}),[N,S,E]=qb(r,x),L=ow(u,{replace:a,state:i,target:c,preventScrollReset:d,relative:l,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:w});function C(T){t&&t(T),T.defaultPrevented||L(T)}let k=p.createElement("a",{...x,...E,href:h.absoluteURL||v,onClick:h.isExternal||o?t:C,ref:ew(y,S),target:c,"data-discover":!g&&n==="render"?"true":void 0});return N&&!g?p.createElement(p.Fragment,null,k,p.createElement(Qb,{page:v})):k});se.displayName="Link";var sw=p.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:l=!1,style:o,to:a,viewTransition:i,children:c,...u},d){let f=Il(a,{relative:u.relative}),m=En(),x=p.useContext(Pa),{navigator:y,basename:b}=p.useContext(Nt),w=x!=null&&dw(f)&&i===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,h=m.pathname,v=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(h=h.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&b&&(v=Nn(v,b)||v);const N=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=h===g||!l&&h.startsWith(g)&&h.charAt(N)==="/",E=v!=null&&(v===g||!l&&v.startsWith(g)&&v.charAt(g.length)==="/"),L={isActive:S,isPending:E,isTransitioning:w},C=S?t:void 0,k;typeof r=="function"?k=r(L):k=[r,S?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let T=typeof o=="function"?o(L):o;return p.createElement(se,{...u,"aria-current":C,className:k,ref:d,style:T,to:a,viewTransition:i},typeof c=="function"?c(L):c)});sw.displayName="NavLink";var rw=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:l,state:o,method:a=To,action:i,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m,...x},y)=>{let{unstable_useTransitions:b}=p.useContext(Nt),w=cw(),g=uw(i,{relative:u}),h=a.toLowerCase()==="get"?"get":"post",v=typeof i=="string"&&dx.test(i),N=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let E=S.nativeEvent.submitter,L=(E==null?void 0:E.getAttribute("formmethod"))||a,C=()=>w(E||S.currentTarget,{fetcherKey:t,method:L,navigate:n,replace:l,state:o,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m});b&&n!==!1?p.startTransition(()=>C()):C()};return p.createElement("form",{ref:y,method:h,action:g,onSubmit:r?c:N,...x,"data-discover":!v&&e==="render"?"true":void 0})});rw.displayName="Form";function lw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fx(e){let t=p.useContext(yr);return Ne(t,lw(e)),t}function ow(e,{target:t,replace:n,state:r,preventScrollReset:l,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:i,unstable_useTransitions:c}={}){let u=jt(),d=En(),f=Il(e,{relative:o});return p.useCallback(m=>{if($b(m,t)){m.preventDefault();let x=n!==void 0?n:vl(d)===vl(f),y=()=>u(e,{replace:x,state:r,preventScrollReset:l,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:i});c?p.startTransition(()=>y()):y()}},[d,u,f,n,r,t,e,l,o,a,i,c])}var aw=0,iw=()=>`__${String(++aw)}__`;function cw(){let{router:e}=fx("useSubmit"),{basename:t}=p.useContext(Nt),n=Cb(),r=e.fetch,l=e.navigate;return p.useCallback(async(o,a={})=>{let{action:i,method:c,encType:u,formData:d,body:f}=Ob(o,t);if(a.navigate===!1){let m=a.fetcherKey||iw();await r(m,n,a.action||i,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await l(a.action||i,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,l,t,n])}function uw(e,{relative:t}={}){let{basename:n}=p.useContext(Nt),r=p.useContext(Ht);Ne(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),o={...Il(e||".",{relative:t})},a=En();if(e==null){o.search=a.search;let i=new URLSearchParams(o.search),c=i.getAll("index");if(c.some(d=>d==="")){i.delete("index"),c.filter(f=>f).forEach(f=>i.append("index",f));let d=i.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:xn([n,o.pathname])),vl(o)}function dw(e,{relative:t}={}){let n=p.useContext(nx);Ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=fx("useViewTransitionState"),l=Il(e,{relative:t});if(!n.isTransitioning)return!1;let o=Nn(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Nn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ra(l.pathname,a)!=null||ra(l.pathname,o)!=null}const fw="http://backend:3000";async function V(e,t={}){const n=localStorage.getItem("token"),r=await fetch(`${fw}${e}`,{...t,headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{},...t.headers||{}}});if(!r.ok){let l;try{l=await r.json()}catch{l={message:r.statusText}}throw r.status===403&&(l!=null&&l.message)?{type:"UPGRADE_REQUIRED",message:l.message}:l}return r.json()}function Ei(e){try{const t=JSON.parse(atob(e.split(".")[1]));return{email:t.email||null,role:t.role||null,isSuperAdmin:t.isSuperAdmin||!1}}catch{return{email:null,role:null,isSuperAdmin:!1}}}const mx=p.createContext(null);function mw({children:e}){const t=localStorage.getItem("token"),n=localStorage.getItem("onboarded")==="true",r=t?Ei(t):{email:null,role:null,isSuperAdmin:!1},[l,o]=p.useState(t),[a,i]=p.useState(r.email),[c,u]=p.useState(r.role),[d,f]=p.useState(r.isSuperAdmin),[m,x]=p.useState(n||!!t),y=h=>{const v=Ei(h);localStorage.setItem("token",h),o(h),i(v.email),u(v.role),f(v.isSuperAdmin)},b=h=>{const v=Ei(h);localStorage.setItem("token",h),localStorage.setItem("onboarded","true"),o(h),i(v.email),u(v.role),f(v.isSuperAdmin),x(!0)},w=()=>{localStorage.setItem("onboarded","true"),x(!0)},g=()=>{localStorage.removeItem("token"),localStorage.removeItem("onboarded"),o(null),i(null),u(null),f(!1),x(!1),window.location.href="/login"};return s.jsx(mx.Provider,{value:{token:l,email:a,role:c,isSuperAdmin:d,onboarded:m,login:y,signup:b,completeOnboarding:w,logout:g},children:e})}function sn(){const e=p.useContext(mx);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Es({className:e="",size:t="md"}){const n={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"};return s.jsxs("div",{className:`inline-flex items-center gap-2 ${e}`,children:[s.jsxs("svg",{className:n[t],viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"url(#gradient)"}),s.jsx("path",{d:"M16 14V34H20V18H28V14H16Z",fill:"white"}),s.jsx("path",{d:"M30 18C30 16.9 30.9 16 32 16C33.1 16 34 16.9 34 18V26C34 27.1 33.1 28 32 28C30.9 28 30 27.1 30 26V22H32V26H32C32 26.6 32.4 27 33 27C33.6 27 34 26.6 34 26V18C34 17.4 33.6 17 33 17C32.4 17 32 17.4 32 18V20H30V18Z",fill:"white"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gradient",x1:"0",y1:"0",x2:"48",y2:"48",gradientUnits:"userSpaceOnUse",children:[s.jsx("stop",{offset:"0%",stopColor:"#2563EB"}),s.jsx("stop",{offset:"100%",stopColor:"#4F46E5"})]})})]}),s.jsx("span",{className:"font-bold text-slate-900 text-lg",children:"Lite CRM"})]})}function Mc({className:e="",size:t="md"}){const n={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"};return s.jsxs("svg",{className:`${n[t]} ${e}`,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"url(#logoGradient)"}),s.jsx("path",{d:"M16 14V34H20V18H28V14H16Z",fill:"white"}),s.jsx("path",{d:"M30 18C30 16.9 30.9 16 32 16C33.1 16 34 16.9 34 18V26C34 27.1 33.1 28 32 28C30.9 28 30 27.1 30 26V22H32V26H32C32 26.6 32.4 27 33 27C33.6 27 34 26.6 34 26V18C34 17.4 33.6 17 33 17C32.4 17 32 17.4 32 18V20H30V18Z",fill:"white"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"logoGradient",x1:"0",y1:"0",x2:"48",y2:"48",gradientUnits:"userSpaceOnUse",children:[s.jsx("stop",{offset:"0%",stopColor:"#2563EB"}),s.jsx("stop",{offset:"100%",stopColor:"#4F46E5"})]})})]})}function hw(){const{login:e}=sn(),t=jt(),[n,r]=p.useState(""),[l,o]=p.useState(""),[a,i]=p.useState(null),[c,u]=p.useState(!1);async function d(m){m.preventDefault(),i(null),u(!0);try{const x=await V("/auth/login",{method:"POST",body:JSON.stringify({email:n,password:l})}),y=x.accessToken||x.token;if(!y)throw new Error("No token returned");e(y),t("/",{replace:!0})}catch(x){i((x==null?void 0:x.message)||"Login failed")}finally{u(!1)}}function f(){window.location.href="/api/auth/google"}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6 shadow space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Es,{size:"md"})}),s.jsx("h1",{className:"text-2xl font-semibold text-center",children:"Login"}),a&&s.jsx("div",{className:"rounded bg-red-50 px-3 py-2 text-sm text-red-600",children:a}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"Email",value:n,onChange:m=>r(m.target.value),required:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2",type:"password",placeholder:"Password",value:l,onChange:m=>o(m.target.value),required:!0}),s.jsx("div",{className:"text-right",children:s.jsx(se,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot Password?"})})]}),s.jsx("button",{type:"submit",disabled:c,className:"w-full rounded bg-slate-900 py-2 text-white hover:bg-slate-800 disabled:opacity-50",children:c?"Logging in":"Login"})]}),s.jsx("div",{className:"text-center text-sm text-slate-500",children:"or"}),s.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 rounded border py-2 text-slate-700 hover:bg-slate-50",children:[s.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"h-5 w-5"}),"Continue with Google"]}),s.jsxs("p",{className:"text-center text-sm text-slate-600",children:["Dont have an account?"," ",s.jsx(se,{to:"/signup",className:"text-blue-600 hover:underline",children:"Sign up"})]})]})})}const pw=["1","2-10","11-50","51-200","200+"];function xw(){const e=jt(),{signup:t}=sn(),[n,r]=p.useState(1),[l,o]=p.useState(""),[a,i]=p.useState(""),[c,u]=p.useState(""),[d,f]=p.useState(null),[m,x]=p.useState(""),[y,b]=p.useState(""),[w,g]=p.useState(null),[h,v]=p.useState(!1);async function N(){g(null),v(!0);try{const S={name:l,email:a,password:c,mode:d};d==="ORG"&&(S.workspaceName=m,S.teamSize=y);const E=await V("/auth/signup",{method:"POST",body:JSON.stringify(S)}),L=E.accessToken||E.token;if(!L)throw new Error("No token returned");t(L),e("/",{replace:!0})}catch(S){g((S==null?void 0:S.message)||"Signup failed")}finally{v(!1)}}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{disabled:n===1,onClick:()=>r(S=>S-1),className:"text-sm text-slate-600 disabled:opacity-30",children:" Back"}),s.jsxs("div",{className:"text-sm text-slate-500",children:["Step ",n," of ",d==="ORG"?3:2]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(Es,{size:"md"})}),s.jsx("h1",{className:"text-2xl font-semibold text-center",children:"Create your account"}),w&&s.jsx("div",{className:"rounded bg-red-50 px-3 py-2 text-sm text-red-600",children:w}),n===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"Full name",value:l,onChange:S=>o(S.target.value)}),s.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"Work email",value:a,onChange:S=>i(S.target.value)}),s.jsx("input",{className:"w-full rounded border px-3 py-2",type:"password",placeholder:"Password",value:c,onChange:S=>u(S.target.value)}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{disabled:!l||!a||!c,onClick:()=>r(2),className:"rounded bg-slate-900 px-4 py-2 text-white disabled:opacity-50",children:"Continue"})})]}),n===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>{f("SOLO"),r(3)},className:"w-full rounded border px-4 py-3 text-left hover:bg-slate-50",children:[s.jsx("div",{className:"font-medium",children:"Just for myself"}),s.jsx("div",{className:"text-sm text-slate-500",children:"Manage my own leads"})]}),s.jsxs("button",{onClick:()=>{f("ORG"),r(3)},className:"w-full rounded border px-4 py-3 text-left hover:bg-slate-50",children:[s.jsx("div",{className:"font-medium",children:"Set up an organisation"}),s.jsx("div",{className:"text-sm text-slate-500",children:"Work with a team"})]})]}),n===3&&d==="ORG"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"Organisation name",value:m,onChange:S=>x(S.target.value)}),s.jsxs("select",{className:"w-full rounded border px-3 py-2",value:y,onChange:S=>b(S.target.value),children:[s.jsx("option",{value:"",children:"Team size"}),pw.map(S=>s.jsx("option",{value:S,children:S},S))]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{disabled:!m||!y||h,onClick:N,className:"rounded bg-slate-900 px-4 py-2 text-white disabled:opacity-50",children:h?"Creating":"Create account"})})]}),n===3&&d==="SOLO"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-600",children:"You'll get a private workspace. You can invite teammates later."}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{disabled:h,onClick:N,className:"rounded bg-slate-900 px-4 py-2 text-white disabled:opacity-50",children:h?"Creating":"Create account"})})]}),s.jsxs("p",{className:"text-center text-sm text-slate-600",children:["Already have an account?"," ",s.jsx(se,{to:"/login",className:"text-blue-600 hover:underline",children:"Log in"})]})]})})}function gw(){const[e,t]=p.useState(""),[n,r]=p.useState(null),[l,o]=p.useState(!1),[a,i]=p.useState(!1);async function c(u){u.preventDefault(),r(null),o(!1),i(!0);try{await V("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),o(!0)}catch(d){r((d==null?void 0:d.message)||"Failed to send reset email")}finally{i(!1)}}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6 shadow space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Es,{size:"md"})}),s.jsx("h1",{className:"text-2xl font-semibold text-center",children:"Forgot Password"}),n&&s.jsx("div",{className:"rounded bg-red-50 px-3 py-2 text-sm text-red-600",children:n}),l?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded bg-green-50 px-3 py-2 text-sm text-green-600",children:"If an account exists with this email, a password reset link has been sent. Please check your inbox."}),s.jsx(se,{to:"/login",className:"block text-center text-blue-600 hover:underline",children:"Back to Login"})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-slate-600 text-center",children:"Enter your email address and we'll send you a link to reset your password."}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2",type:"email",placeholder:"Email",value:e,onChange:u=>t(u.target.value),required:!0}),s.jsx("button",{type:"submit",disabled:a,className:"w-full rounded bg-slate-900 py-2 text-white hover:bg-slate-800 disabled:opacity-50",children:a?"Sending":"Send Reset Link"})]}),s.jsxs("p",{className:"text-center text-sm text-slate-600",children:["Remember your password?"," ",s.jsx(se,{to:"/login",className:"text-blue-600 hover:underline",children:"Log in"})]})]})]})})}function yw(){const{token:e}=_a(),t=jt(),[n,r]=p.useState(""),[l,o]=p.useState(""),[a,i]=p.useState(null),[c,u]=p.useState(!1),[d,f]=p.useState(!1);async function m(x){if(x.preventDefault(),i(null),n!==l){i("Passwords do not match");return}if(n.length<6){i("Password must be at least 6 characters");return}if(!e){i("Invalid reset token");return}f(!0);try{await V("/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,password:n})}),u(!0),setTimeout(()=>{t("/login")},2e3)}catch(y){i((y==null?void 0:y.message)||"Failed to reset password")}finally{f(!1)}}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6 shadow space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Es,{size:"md"})}),s.jsx("h1",{className:"text-2xl font-semibold text-center",children:"Reset Password"}),a&&s.jsx("div",{className:"rounded bg-red-50 px-3 py-2 text-sm text-red-600",children:a}),c?s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"rounded bg-green-50 px-3 py-2 text-sm text-green-600",children:"Password reset successfully! Redirecting to login..."})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-slate-600 text-center",children:"Enter your new password below."}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2",type:"password",placeholder:"New Password",value:n,onChange:x=>r(x.target.value),required:!0,minLength:6}),s.jsx("input",{className:"w-full rounded border px-3 py-2",type:"password",placeholder:"Confirm Password",value:l,onChange:x=>o(x.target.value),required:!0,minLength:6}),s.jsx("button",{type:"submit",disabled:d,className:"w-full rounded bg-slate-900 py-2 text-white hover:bg-slate-800 disabled:opacity-50",children:d?"Resetting":"Reset Password"})]}),s.jsx("p",{className:"text-center text-sm text-slate-600",children:s.jsx(se,{to:"/login",className:"text-blue-600 hover:underline",children:"Back to Login"})})]})]})})}async function vw(){return V("/plan/usage")}function bw(){var h;const{isSuperAdmin:e}=sn(),[t,n]=p.useState(null),[r,l]=p.useState(null),[o,a]=p.useState(!0),[i,c]=p.useState(!1);p.useEffect(()=>{const v="banner_dismissed_timestamp",N=localStorage.getItem(v);if(N){const S=parseInt(N,10);(Date.now()-S)/(1e3*60)<5?c(!0):localStorage.removeItem(v)}u()},[]);async function u(){try{const[v,N]=await Promise.all([V("/me/workspace").catch(()=>null),vw().catch(()=>null)]);v&&n({daysLeft:v.daysLeft,isTrialValid:v.isTrialValid,plan:v.plan}),N&&l(N)}catch(v){console.error("Failed to load banner data:",v)}finally{a(!1)}}function d(){const v="banner_dismissed_timestamp";localStorage.setItem(v,Date.now().toString()),c(!0),setTimeout(()=>{localStorage.removeItem(v),c(!1),u()},5*60*1e3)}if(e||o||i)return null;const f=(t==null?void 0:t.isTrialValid)===!0&&t.daysLeft!==null&&t.daysLeft>0&&t.daysLeft<=3,m=(r==null?void 0:r.warnings)&&Array.isArray(r.warnings)&&r.warnings.length>0;if(!f&&!m)return null;const x=f&&(t==null?void 0:t.daysLeft)!==null&&t.daysLeft<=1||m&&((h=r==null?void 0:r.warnings)==null?void 0:h.some(v=>v.includes("500%")||v.includes("400%"))),y=[];if(f&&t&&(t.daysLeft===1?y.push("Your free trial ends tomorrow"):t.daysLeft===2?y.push("2 days left in your free trial"):y.push(`${t.daysLeft} days left in your free trial`)),m&&(r!=null&&r.warnings)&&(r.warnings.slice(0,2).forEach(N=>{y.push(N)}),r.warnings.length>2&&y.push(`+${r.warnings.length-2} more`)),y.length===0)return null;const b=x?"bg-gradient-to-r from-red-600 to-orange-600":f?"bg-gradient-to-r from-blue-600 to-indigo-600":"bg-yellow-50 border-l-4 border-yellow-400",w=x||f?"text-white":"text-yellow-800",g=x?"px-4 py-2 bg-white text-red-600 font-semibold rounded-lg hover:bg-red-50 transition-colors text-sm":f?"px-4 py-2 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-colors text-sm":"px-4 py-2 bg-yellow-600 text-white font-semibold rounded-lg hover:bg-yellow-700 transition-colors text-sm";return s.jsx("div",{className:`${b} ${w} px-4 py-3 relative`,children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[x||f?s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:x?"Action Required":f?"Trial Ending Soon":"Usage Warning"}),s.jsx("div",{className:"text-sm mt-1",children:y.map((v,N)=>s.jsxs("span",{children:[v,N<y.length-1&&"  "]},N))})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{to:"/upgrade",className:g,children:"Upgrade Plan"}),s.jsx("button",{onClick:d,className:`${w} hover:opacity-70 transition-opacity p-1`,"aria-label":"Dismiss banner",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})}function Ee({children:e}){const{email:t,role:n,isSuperAdmin:r,logout:l}=sn(),o=En(),a=i=>o.pathname.startsWith(i)?"text-slate-900 font-medium":"text-slate-600 hover:text-slate-900";return s.jsxs("div",{className:"min-h-screen bg-slate-100",children:[s.jsx(bw,{}),s.jsx("header",{className:"bg-white border-b",children:s.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(se,{to:"/",className:"hover:opacity-90 transition-opacity",children:s.jsx(Es,{size:"md"})}),s.jsx("nav",{className:"flex items-center gap-4 text-sm",children:r?s.jsxs(s.Fragment,{children:[s.jsx(se,{to:"/admin",className:a("/admin"),children:"Super Admin"}),s.jsx(se,{to:"/settings",className:a("/settings"),children:"Settings"}),s.jsx(se,{to:"/docs",className:a("/docs"),children:"Docs"})]}):s.jsxs(s.Fragment,{children:[s.jsx(se,{to:"/",className:a("/"),children:"Dashboard"}),s.jsx(se,{to:"/kanban",className:a("/kanban"),children:"Pipeline"}),s.jsx(se,{to:"/calendar",className:a("/calendar"),children:"Calendar"}),s.jsx(se,{to:"/reports",className:a("/reports"),children:"Reports"}),s.jsx(se,{to:"/workflows",className:a("/workflows"),children:"Workflows"}),n==="ADMIN"&&s.jsx(se,{to:"/team",className:a("/team"),children:"Team"}),n==="ADMIN"&&!r&&s.jsx(se,{to:"/workspace-admin",className:a("/workspace-admin"),children:"Workspace Admin"}),s.jsx(se,{to:"/billing",className:a("/billing"),children:"Billing"}),s.jsx(se,{to:"/settings",className:a("/settings"),children:"Settings"}),s.jsx(se,{to:"/docs",className:a("/docs"),children:"Docs"})]})})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[s.jsx("span",{children:t}),s.jsx("button",{onClick:l,className:"text-red-600 hover:underline",children:"Logout"})]})]})}),s.jsx("main",{className:"mx-auto max-w-7xl px-6 py-8",children:e})]})}async function ww(e){const t=new URLSearchParams;e!=null&&e.stage&&e.stage!=="ALL"&&t.append("stage",e.stage),e!=null&&e.source&&e.source!=="ALL"&&t.append("source",e.source),e!=null&&e.region&&t.append("region",e.region),e!=null&&e.search&&t.append("search",e.search);const n=t.toString(),r=n?`/leads?${n}`:"/leads";return(await V(r)).map(o=>({...o,owner:o.owner?{id:o.owner.id,name:o.owner.name||void 0,email:o.owner.email}:void 0}))}async function Nw(e){return V(`/leads/${e}`)}async function jw(e){return V("/leads",{method:"POST",body:JSON.stringify(e)})}async function Sw(e,t){return V(`/leads/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async function hx(e,t){return V(`/leads/${e}/stage`,{method:"PATCH",body:JSON.stringify({stage:t})})}async function kw(e){return V(`/leads/${e}`,{method:"DELETE"})}async function Ew(e){const t=new URLSearchParams;e!=null&&e.stage&&t.append("stage",e.stage),e!=null&&e.source&&t.append("source",e.source),e!=null&&e.region&&t.append("region",e.region),e!=null&&e.search&&t.append("search",e.search);const n="http://backend:3000",r=localStorage.getItem("token"),l=await fetch(`${n}/leads/export/csv?${t.toString()}`,{headers:{Authorization:`Bearer ${r}`}});if(!l.ok)throw new Error("Failed to export leads");return l.blob()}async function Cw(e,t){return V("/leads/bulk/update",{method:"POST",body:JSON.stringify({leadIds:e,updates:t})})}async function Tw(e){return V("/leads/bulk/delete",{method:"POST",body:JSON.stringify({leadIds:e})})}async function Aw(e,t){return V("/leads/bulk/assign",{method:"POST",body:JSON.stringify({leadIds:e,ownerId:t})})}async function Pw(){return V("/leads/kanban")}async function ed(){return V("/users")}async function _w(){return V("/saved-filters")}async function Lw(e,t){return V("/saved-filters",{method:"POST",body:JSON.stringify({name:e,filters:t})})}async function Rw(e){return V("/leads/bulk-import/preview",{method:"POST",body:JSON.stringify({csvData:e})})}async function Dw(e,t){return V("/leads/bulk-import/csv",{method:"POST",body:JSON.stringify({csvData:e,columnMapping:t})})}function Iw({toast:e,onClose:t}){p.useEffect(()=>{if(e.duration!==0){const o=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(o)}},[e.id,e.duration,t]);const r={success:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"text-green-600"},error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-600"}}[e.type],l={success:"",error:"",info:"",warning:""};return s.jsxs("div",{className:`${r.bg} ${r.border} border rounded-lg shadow-lg p-4 mb-3 flex items-start gap-3 min-w-[320px] max-w-md transform transition-all duration-300 ease-out`,style:{animation:"slideInRight 0.3s ease-out"},children:[s.jsx("div",{className:`${r.icon} text-xl font-bold flex-shrink-0 mt-0.5`,children:l[e.type]}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:`${r.text} text-sm font-medium`,children:e.message})}),s.jsx("button",{onClick:()=>t(e.id),className:`${r.text} hover:opacity-70 text-lg font-bold flex-shrink-0`,children:""})]})}function Mw({toasts:e,onClose:t}){return e.length===0?null:s.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col items-end",children:e.map(n=>s.jsx(Iw,{toast:n,onClose:t},n.id))})}function $w(){const[e,t]=p.useState([]),n=(c,u,d)=>{const f=`toast-${Date.now()}-${Math.random()}`;return t(m=>[...m,{id:f,type:c,message:u,duration:d}]),f};return{toasts:e,success:(c,u)=>n("success",c,u),error:(c,u)=>n("error",c,u),info:(c,u)=>n("info",c,u),warning:(c,u)=>n("warning",c,u),removeToast:c=>{t(u=>u.filter(d=>d.id!==c))}}}const px=p.createContext(void 0);function Fw({children:e}){const{toasts:t,success:n,error:r,info:l,warning:o,removeToast:a}=$w();return s.jsxs(px.Provider,{value:{toasts:t,success:n,error:r,info:l,warning:o},children:[e,s.jsx(Mw,{toasts:t,onClose:a})]})}function td(){const e=p.useContext(px);if(!e)throw new Error("useToastContext must be used within ToastProvider");return e}function Zt({message:e="Loading...",fullScreen:t=!1}){const n=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:"relative",children:s.jsx(Mc,{size:"lg",className:"animate-spin"})}),e&&s.jsx("p",{className:"text-slate-600 text-sm font-medium animate-pulse",children:e})]});return t?s.jsx("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm z-50 flex items-center justify-center",children:n}):e?s.jsx("div",{className:"flex items-center justify-center py-12",children:n}):s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(Mc,{size:"sm",className:"animate-spin"})})}const Ci=["NEW","CONTACTED","WON","LOST"],Uf=["Website","Ads","Referral","Manual","Import"],zw=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Ow=/^(\+91)?[6-9]\d{9}$/;function Uw(){const e=jt(),{isSuperAdmin:t}=sn();if(t)return s.jsx(Re,{to:"/admin",replace:!0});const[n,r]=p.useState([]),[l,o]=p.useState(!1),[a,i]=p.useState(new Set),[c,u]=p.useState(new Set),[d,f]=p.useState(!1),[m,x]=p.useState(!1),[y,b]=p.useState(new Set),[w,g]=p.useState([]),[h,v]=p.useState([]),[N,S]=p.useState(!1),[E,L]=p.useState(null),[C,k]=p.useState(""),[T,I]=p.useState(""),[$,F]=p.useState(!1),[j,P]=p.useState("select"),[A,O]=p.useState(null),[R,_]=p.useState(null),[D,M]=p.useState(""),[W,K]=p.useState(null),[Y,X]=p.useState({}),[Z,B]=p.useState(!1),[ee,oe]=p.useState(""),[te,Pe]=p.useState(""),[ge,$e]=p.useState(""),[Le,ye]=p.useState(""),[Ge,ce]=p.useState(""),[Q,Fe]=p.useState(""),[St,Jn]=p.useState(null),[Yt,es]=p.useState(null),[Kt,ln]=p.useState(!1),fe=td(),[dt,on]=p.useState(""),[nt,Cn]=p.useState("ALL"),[ve,st]=p.useState("ALL"),[ft,Xt]=p.useState(""),Dt=!te||zw.test(te),mt=!ge||Ow.test(ge),ht=ee.trim().length>0&&Dt&&mt;async function Qe(){o(!0);try{const z=await ww({stage:nt!=="ALL"?nt:void 0,source:ve!=="ALL"?ve:void 0,region:ft||void 0,search:dt||void 0});r(z)}catch(z){console.error("Failed to load leads:",z),alert(`Failed to load leads: ${z.message||"Unknown error"}`)}finally{o(!1)}}async function br(z){var ae,J;if(z.preventDefault(),!(!ht||d)){f(!0);try{const ss=((Yt==null?void 0:Yt.planType)||"FREE")==="FREE"?5:-1;if(ss!==-1&&n.length>=ss){ln(!0);return}const Cs=await jw({name:ee.trim(),email:te||void 0,phone:ge||void 0,company:Le||void 0,source:Ge||void 0,region:Q||void 0});r(Ts=>[Cs,...Ts]),fe.success("Lead created successfully!"),oe(""),Pe(""),$e(""),ye(""),ce(""),Fe(""),Jn(null)}catch(ue){if((ue==null?void 0:ue.type)==="UPGRADE_REQUIRED"||(ae=ue==null?void 0:ue.message)!=null&&ae.includes("upgrade")||(J=ue==null?void 0:ue.message)!=null&&J.includes("limit")){ln(!0);return}fe.error((ue==null?void 0:ue.message)||"Failed to create lead")}finally{f(!1)}}}async function ts(z,ae){i(J=>new Set(J).add(z));try{await hx(z,ae),await Qe(),fe.success("Lead stage updated successfully")}catch(J){fe.error((J==null?void 0:J.message)||"Failed to update lead stage")}finally{i(J=>{const ue=new Set(J);return ue.delete(z),ue})}}async function wr(z,ae){if(confirm(`Are you sure you want to delete "${ae}"? This action cannot be undone.`)){u(J=>new Set(J).add(z));try{await kw(z),await Qe(),fe.success("Lead deleted successfully")}catch(J){fe.error((J==null?void 0:J.message)||"Failed to delete lead")}finally{u(J=>{const ue=new Set(J);return ue.delete(z),ue})}}}p.useEffect(()=>{Qe(),Ol(),Ua()},[]),p.useEffect(()=>{S(y.size>0)},[y]),p.useEffect(()=>{Qe()},[nt,ve,ft,dt]);async function zl(z){var ue;const ae=(ue=z.target.files)==null?void 0:ue[0];if(!ae)return;_(ae);const J=new FileReader;J.onload=async ss=>{var Ts;const Cs=(Ts=ss.target)==null?void 0:Ts.result;M(Cs);try{const Nr=await Rw(Cs);K(Nr),P("mapping")}catch(Nr){fe.error(`Failed to preview CSV: ${Nr.message||"Unknown error"}`)}},J.readAsText(ae)}async function an(){if(!D||Object.keys(Y).length===0){fe.warning("Please map at least one column");return}try{B(!0);const z=await Dw(D,Y);fe.success(`Import completed! ${z.success} leads imported, ${z.failed} failed.`),z.errors.length>0&&console.error("Import errors:",z.errors),F(!1),P("select"),_(null),M(""),K(null),X({}),await Qe()}catch(z){fe.error(`Import failed: ${z.message||"Unknown error"}`)}finally{B(!1)}}async function Ol(){try{const z=await _w();g(z)}catch(z){console.error("Failed to load saved filters:",z)}}async function Ua(){try{const z=await ed();v(z)}catch(z){console.error("Failed to load users:",z)}}async function Wa(){try{const z=await Ew({stage:nt!=="ALL"?nt:void 0,source:ve!=="ALL"?ve:void 0,region:ft||void 0,search:dt||void 0}),ae=window.URL.createObjectURL(z),J=document.createElement("a");J.href=ae,J.download=`leads-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(J),J.click(),window.URL.revokeObjectURL(ae),document.body.removeChild(J)}catch(z){alert(`Failed to export: ${z.message||"Unknown error"}`)}}async function Ba(){const z=prompt("Enter a name for this filter:");if(z)try{await Lw(z,{query:dt,stageFilter:nt,sourceFilter:ve,regionFilter:ft}),await Ol(),fe.success("Filter saved successfully!")}catch(ae){fe.error(`Failed to save filter: ${ae.message||"Unknown error"}`)}}async function Va(z){const ae=z.filters;on(ae.query||""),Cn(ae.stageFilter||"ALL"),st(ae.sourceFilter||"ALL"),Xt(ae.regionFilter||""),await Qe()}function Ha(z){b(ae=>{const J=new Set(ae);return J.has(z)?J.delete(z):J.add(z),J})}function Ga(){y.size===rt.length?b(new Set):b(new Set(rt.map(z=>z.id)))}async function Ya(){if(!(y.size===0||m)){x(!0);try{const z={};C&&(z.stage=C),T&&(z.ownerId=T),await Cw(Array.from(y),z),b(new Set),L(null),k(""),I(""),await Qe(),fe.success("Leads updated successfully!")}catch(z){fe.error(`Failed to update leads: ${z.message||"Unknown error"}`)}finally{x(!1)}}}async function Ka(){if(!(y.size===0||m)&&confirm(`Are you sure you want to delete ${y.size} lead(s)?`)){x(!0);try{await Tw(Array.from(y)),b(new Set),L(null),await Qe(),fe.success("Leads deleted successfully!")}catch(z){fe.error(`Failed to delete leads: ${z.message||"Unknown error"}`)}finally{x(!1)}}}async function Xa(){if(!(y.size===0||!T||m)){x(!0);try{await Aw(Array.from(y),T),b(new Set),L(null),I(""),await Qe(),fe.success("Leads assigned successfully!")}catch(z){fe.error(`Failed to assign leads: ${z.message||"Unknown error"}`)}finally{x(!1)}}}const rt=n,ns=p.useMemo(()=>{const z=rt.length,ae={NEW:rt.filter(J=>J.stage==="NEW").length,CONTACTED:rt.filter(J=>J.stage==="CONTACTED").length,WON:rt.filter(J=>J.stage==="WON").length,LOST:rt.filter(J=>J.stage==="LOST").length};return{total:z,...ae}},[rt]);return s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-8 bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 min-h-screen -m-6 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Dashboard"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage and track your sales leads"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>F(!0),className:"px-4 py-2.5 text-sm rounded-lg bg-white border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium shadow-sm hover:shadow transition-all",children:"Import Leads"}),s.jsx("button",{onClick:Wa,className:"px-4 py-2.5 text-sm rounded-lg bg-white border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium shadow-sm hover:shadow transition-all",children:"Export CSV"}),s.jsx(se,{to:"/workflows",className:"px-5 py-2.5 text-sm rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 font-medium shadow-md hover:shadow-lg transition-all",children:"Workflows"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx(Lr,{label:"Total Leads",value:ns.total,gradient:"from-blue-500 to-blue-600"}),s.jsx(Lr,{label:"New",value:ns.NEW,gradient:"from-emerald-500 to-emerald-600"}),s.jsx(Lr,{label:"Contacted",value:ns.CONTACTED,gradient:"from-amber-500 to-amber-600"}),s.jsx(Lr,{label:"Won",value:ns.WON,gradient:"from-green-500 to-green-600"}),s.jsx(Lr,{label:"Lost",value:ns.LOST,gradient:"from-red-500 to-red-600"})]}),St&&s.jsx("div",{className:"rounded-xl border border-amber-200 bg-gradient-to-r from-amber-50 to-yellow-50 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-amber-900",children:St}),s.jsx("button",{onClick:()=>e("/upgrade"),className:"mt-3 rounded-lg bg-amber-600 px-4 py-2 text-sm text-white font-medium hover:bg-amber-700 transition-colors shadow-sm",children:"Upgrade Plan"})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Add New Lead"}),s.jsxs("form",{onSubmit:br,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsx("input",{className:"md:col-span-2 rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Name *",value:ee,onChange:z=>oe(z.target.value),required:!0}),s.jsx("input",{className:"md:col-span-2 rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Email",type:"email",value:te,onChange:z=>Pe(z.target.value)}),s.jsx("input",{className:"md:col-span-2 rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Phone",value:ge,onChange:z=>$e(z.target.value)}),s.jsx("input",{className:"md:col-span-2 rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Company",value:Le,onChange:z=>ye(z.target.value)}),s.jsxs("select",{className:"md:col-span-2 rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white",value:Ge,onChange:z=>ce(z.target.value),children:[s.jsx("option",{value:"",children:"Source"}),Uf.map(z=>s.jsx("option",{value:z,children:z},z))]}),s.jsx("input",{className:"md:col-span-2 rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Region",value:Q,onChange:z=>Fe(z.target.value)}),s.jsxs("div",{className:"md:col-span-6 flex items-center gap-2",children:[s.jsx("button",{type:"submit",disabled:!ht||d,className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx(Zt,{message:""}),s.jsx("span",{children:"Creating..."})]}):"Add Lead"}),(!Dt||!mt)&&s.jsx("p",{className:"text-xs text-red-500",children:Dt?mt?"":"Invalid phone":"Invalid email"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Filters"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:Ba,className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:"Save Filter"}),w.length>0&&s.jsxs("select",{onChange:z=>{const ae=w.find(J=>J.id===z.target.value);ae&&Va(ae)},className:"px-3 py-1.5 text-xs border border-slate-200 rounded-lg bg-white",defaultValue:"",children:[s.jsx("option",{value:"",children:"Load Saved Filter..."}),w.map(z=>s.jsx("option",{value:z.id,children:z.name},z.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search leads...",value:dt,onChange:z=>on(z.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),s.jsxs("select",{value:nt,onChange:z=>Cn(z.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white",children:[s.jsx("option",{value:"ALL",children:"All Stages"}),Ci.map(z=>s.jsx("option",{value:z,children:z},z))]}),s.jsxs("select",{value:ve,onChange:z=>st(z.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white",children:[s.jsx("option",{value:"ALL",children:"All Sources"}),Uf.map(z=>s.jsx("option",{value:z,children:z},z))]}),s.jsx("input",{type:"text",placeholder:"Filter by region...",value:ft,onChange:z=>Xt(z.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),N&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[y.size," lead(s) selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>L("stage"),className:"px-3 py-1.5 text-xs font-medium bg-white text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"Change Stage"}),s.jsx("button",{onClick:()=>L("assign"),className:"px-3 py-1.5 text-xs font-medium bg-white text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"Assign Owner"}),s.jsx("button",{onClick:()=>L("delete"),className:"px-3 py-1.5 text-xs font-medium bg-white text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:"Delete"})]})]}),s.jsx("button",{onClick:()=>{b(new Set),L(null)},className:"text-sm text-slate-600 hover:text-slate-900",children:"Cancel"})]}),E==="stage"&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4 flex items-center gap-4",children:[s.jsxs("select",{value:C,onChange:z=>k(z.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Select Stage"}),Ci.map(z=>s.jsx("option",{value:z,children:z},z))]}),s.jsx("button",{onClick:Ya,disabled:!C||m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsx(Zt,{message:""}),s.jsx("span",{children:"Updating..."})]}):"Update"}),s.jsx("button",{onClick:()=>{L(null),k("")},className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"})]}),E==="assign"&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4 flex items-center gap-4",children:[s.jsxs("select",{value:T,onChange:z=>I(z.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Select Owner"}),h.map(z=>s.jsx("option",{value:z.id,children:z.name||z.email},z.id))]}),s.jsx("button",{onClick:Xa,disabled:!T||m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsx(Zt,{message:""}),s.jsx("span",{children:"Assigning..."})]}):"Assign"}),s.jsx("button",{onClick:()=>{L(null),I("")},className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"})]}),E==="delete"&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4 flex items-center gap-4",children:[s.jsxs("span",{className:"text-sm text-slate-700",children:["Are you sure you want to delete ",y.size," lead(s)?"]}),s.jsx("button",{onClick:Ka,disabled:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsx(Zt,{message:""}),s.jsx("span",{children:"Deleting..."})]}):"Delete"}),s.jsx("button",{onClick:()=>{L(null)},className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"})]}),l?s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-12 text-center",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-slate-500",children:"Loading leads..."})]}):rt.length===0?s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-12 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No leads found"}),s.jsx("p",{className:"text-slate-600",children:"Get started by adding your first lead above"})]}):s.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:s.jsx("input",{type:"checkbox",checked:y.size===rt.length&&rt.length>0,onChange:Ga,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Lead"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Contact"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Company"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Source"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Region"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Owner"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Stage"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:rt.map(z=>{var ae,J;return s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"checkbox",checked:y.has(z.id),onChange:()=>Ha(z.id),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("a",{href:`/leads/${z.id}`,className:"font-semibold text-blue-600 hover:text-blue-700 hover:underline",children:z.name})}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:z.email||z.phone||""}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:z.company||""}),s.jsx("td",{className:"px-6 py-4",children:z.source?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:z.source}):""}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:z.region||""}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:((ae=z.owner)==null?void 0:ae.name)||((J=z.owner)==null?void 0:J.email)||""}),s.jsx("td",{className:"px-6 py-4",children:a.has(z.id)?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zt,{message:""}),s.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]}):s.jsx("select",{value:z.stage,onChange:ue=>ts(z.id,ue.target.value),className:"rounded-lg border border-slate-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white",children:Ci.map(ue=>s.jsx("option",{value:ue,children:ue},ue))})}),s.jsx("td",{className:"px-6 py-4 text-slate-500",children:new Date(z.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:c.has(z.id)?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zt,{message:""}),s.jsx("span",{className:"text-xs text-slate-500",children:"Deleting..."})]}):s.jsx("button",{onClick:()=>wr(z.id,z.name),disabled:c.has(z.id),className:"text-red-600 hover:text-red-700 hover:underline text-sm font-medium transition-colors disabled:opacity-50",title:"Delete lead",children:"Delete"})})]},z.id)})})]})})}),$&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Import Leads"}),s.jsx("button",{onClick:()=>{F(!1),P("select"),_(null),M(""),K(null),X({})},className:"text-slate-400 hover:text-slate-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6",children:[j==="select"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-600 mb-4",children:"Choose your import source:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>{O("csv");const z=document.createElement("input");z.type="file",z.accept=".csv",z.onchange=zl,z.click()},className:"p-6 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Upload CSV"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Import leads from a CSV file"})]}),s.jsxs("button",{onClick:()=>{O("google-sheets"),alert("Google Sheets integration coming soon! For now, export your sheet as CSV and upload it.")},className:"p-6 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Google Sheets"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Import from Google Sheets"})]}),s.jsxs("button",{onClick:()=>{O("google-drive"),fe.info("Google Drive integration coming soon! For now, download the file and upload as CSV.")},className:"p-6 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Google Drive"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Import from Google Drive"})]})]})]}),j==="mapping"&&W&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Map Columns"}),s.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Map your CSV columns to Lite CRM fields. ",W.totalRows," rows found."]})]}),s.jsx("div",{className:"space-y-3",children:W.headers.map(z=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-48 text-sm font-medium text-slate-700",children:z}),s.jsx("div",{className:"flex-1",children:s.jsxs("select",{value:Y[z]||"",onChange:ae=>X({...Y,[z]:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"",children:"-- Skip --"}),s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"phone",children:"Phone"}),s.jsx("option",{value:"company",children:"Company"}),s.jsx("option",{value:"source",children:"Source"}),s.jsx("option",{value:"region",children:"Region"})]})})]},z))}),W.preview.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Preview (first 5 rows):"}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsx("tr",{children:W.headers.map(z=>s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-700",children:z},z))})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:W.preview.map((z,ae)=>s.jsx("tr",{children:W.headers.map(J=>s.jsx("td",{className:"px-3 py-2 text-slate-600",children:z[J]||""},J))},ae))})]})})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:an,disabled:Z||Object.keys(Y).length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium",children:Z?"Importing...":"Import Leads"}),s.jsx("button",{onClick:()=>{P("select"),K(null),X({})},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium",children:"Back"})]})]})]})]})})]})})}function Lr({label:e,value:t,gradient:n}){return s.jsxs("div",{className:`bg-gradient-to-br ${n} rounded-xl p-5 text-white shadow-lg`,children:[s.jsx("div",{className:"text-3xl font-bold mb-1",children:t}),s.jsx("div",{className:"text-sm font-medium opacity-90",children:e})]})}function xx(e){return e?typeof e=="string"?e:typeof e=="object"?typeof e.text=="string"?e.text:typeof e.content=="string"?e.content:JSON.stringify(e):String(e):""}async function Ww(e){return(await V(`/leads/${e}/notes`)).map(n=>{var r;return{id:n.id,content:xx((r=n.metadata)==null?void 0:r.content),createdAt:n.createdAt}})}async function Bw(e,t){return V(`/leads/${e}/notes`,{method:"POST",body:JSON.stringify({content:t})})}async function Vw(e,t){var r;const n=await V(`/activities/${e}`,{method:"PATCH",body:JSON.stringify({content:t})});return{id:n.id,content:xx((r=n.metadata)==null?void 0:r.content),createdAt:n.createdAt}}async function Hw(e){await V(`/activities/${e}`,{method:"DELETE"})}async function Gw(e){return V(`/leads/${e}/tasks`)}async function Yw(e,t){return V(`/leads/${e}/tasks`,{method:"POST",body:JSON.stringify(t)})}async function Kw(e,t,n){return V(`/leads/${e}/tasks/${t}`,{method:"PATCH",body:JSON.stringify(n)})}async function Xw(e,t){return V(`/leads/${e}/tasks/${t}`,{method:"DELETE"})}async function qw(e,t){return V(`/leads/${e}/tasks/${t}/complete`,{method:"PATCH"})}async function Qw(e,t){const n=new URLSearchParams;e&&n.append("startDate",e),t&&n.append("endDate",t);const r=n.toString()?`?${n.toString()}`:"";return V(`/tasks/calendar${r}`)}async function Zw(e,t){return V(`/leads/${e}/assign`,{method:"PATCH",body:JSON.stringify({ownerId:t})})}function Wf(e){return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Jw(){const{id:e}=_a(),t=jt(),[n,r]=p.useState(null),[l,o]=p.useState([]),[a,i]=p.useState([]),[c,u]=p.useState(""),[d,f]=p.useState(null),[m,x]=p.useState(""),[y,b]=p.useState([]),[w,g]=p.useState(""),[h,v]=p.useState(""),[N,S]=p.useState(""),[E,L]=p.useState("all"),[C,k]=p.useState(null),[T,I]=p.useState(""),[$,F]=p.useState(""),[j,P]=p.useState("");async function A(){if(!e)return;const[B,ee,oe,te]=await Promise.all([Nw(e),Ww(e),Gw(e),ed()]);r(B),i(ee),b(oe),o(te)}p.useEffect(()=>{A()},[e]);async function O(){await Sw(e,n),t("/")}async function R(B){B!==n.ownerId&&(await Zw(e,B),A())}async function _(){c.trim()&&(await Bw(e,c),u(""),await A())}async function D(B){await Vw(B,m),f(null),A()}async function M(B){confirm("Delete this note?")&&(await Hw(B),A())}async function W(){!w||!N||(await Yw(e,{title:w,note:h,dueAt:N}),g(""),v(""),S(""),A())}async function K(B){await Kw(e,B,{title:T,note:$,dueAt:j}),k(null),A()}async function Y(B){confirm("Delete this task?")&&(await Xw(e,B),A())}async function X(B){await qw(e,B),await A()}const Z=p.useMemo(()=>{const B=new Date().toISOString().slice(0,10);return y.filter(ee=>ee.completed?E==="all":E==="today"?ee.dueAt.startsWith(B):E==="overdue"?ee.dueAt<B:!0)},[y,E]);return n?s.jsx(Ee,{children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"rounded bg-white p-6 shadow",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Edit Lead"}),s.jsx("label",{className:"text-sm font-medium",children:"Assigned to"}),s.jsx("select",{className:"mb-4 w-full rounded border px-3 py-2",value:n.ownerId,onChange:B=>R(B.target.value),children:l.map(B=>s.jsxs("option",{value:B.id,children:[B.name," (",B.email,")"]},B.id))}),["name","email","phone","company"].map(B=>s.jsx("input",{className:"mb-3 w-full rounded border px-3 py-2",value:n[B]||"",placeholder:B,onChange:ee=>r({...n,[B]:ee.target.value})},B)),s.jsx("button",{onClick:O,className:"rounded bg-slate-900 px-4 py-2 text-white",children:"Save"})]}),s.jsxs("div",{className:"rounded bg-white p-6 shadow",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notes"}),s.jsx("textarea",{className:"w-full rounded border px-3 py-2",value:c,onChange:B=>u(B.target.value)}),s.jsx("button",{onClick:_,className:"mt-2 rounded bg-slate-900 px-4 py-2 text-white",children:"Add Note"}),s.jsx("div",{className:"mt-4 space-y-3",children:a.map(B=>s.jsx("div",{className:"rounded border p-3",children:d===B.id?s.jsxs("div",{className:"rounded bg-slate-50 p-3 border",children:[s.jsx("textarea",{autoFocus:!0,className:"mb-2 w-full rounded border px-3 py-2 text-sm",value:m,onChange:ee=>x(ee.target.value)}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{className:"rounded bg-slate-900 px-4 py-1.5 text-sm text-white",onClick:()=>D(B.id),children:"Save changes"}),s.jsx("button",{className:"text-sm text-slate-500 hover:underline",onClick:()=>{f(null),x("")},children:"Cancel"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"whitespace-pre-wrap text-sm",children:B.content}),s.jsx("div",{className:"mt-1 text-xs text-slate-500",children:Wf(B.createdAt)}),s.jsxs("div",{className:"mt-2 flex gap-3 text-sm",children:[s.jsx("button",{className:"text-slate-600 hover:underline",onClick:()=>{f(B.id),x(B.content)},children:"Edit"}),s.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>M(B.id),children:"Delete"})]})]})},B.id))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"rounded bg-white p-6 shadow",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tasks"}),s.jsxs("div",{className:"mb-4 flex gap-2",children:[s.jsx("button",{onClick:()=>L("all"),className:`rounded px-3 py-1 text-sm ${E==="all"?"bg-slate-900 text-white":"border"}`,children:"ALL"}),s.jsx("button",{onClick:()=>L("today"),className:`rounded px-3 py-1 text-sm ${E==="today"?"bg-slate-900 text-white":"border"}`,children:"TODAY"}),s.jsx("button",{onClick:()=>L("overdue"),className:`rounded px-3 py-1 text-sm ${E==="overdue"?"bg-slate-900 text-white":"border"}`,children:"OVERDUE"})]}),s.jsxs("div",{className:"rounded border bg-slate-50 p-3",children:[s.jsx("input",{className:"mb-2 w-full rounded border px-3 py-2 text-sm",placeholder:"Task title",value:w,onChange:B=>g(B.target.value)}),s.jsx("textarea",{className:"mb-2 w-full rounded border px-3 py-2 text-sm",placeholder:"Optional description",value:h,onChange:B=>v(B.target.value)}),s.jsx("input",{type:"date",className:"mb-3 w-full rounded border px-3 py-2 text-sm",value:N,onChange:B=>S(B.target.value)}),s.jsx("button",{onClick:W,className:"rounded bg-slate-900 px-4 py-2 text-sm text-white",children:"Add Task"})]}),s.jsx("div",{className:"mt-4 space-y-3",children:Z.map(B=>s.jsx("div",{className:"rounded border p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("input",{type:"checkbox",className:"mt-1",checked:B.completed,onChange:()=>X(B.id)}),s.jsx("div",{className:"flex-1",children:C===B.id?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"rounded bg-white p-2 shadow-sm",children:[s.jsx("input",{autoFocus:!0,className:"mb-2 w-full rounded border px-2 py-1 text-sm",value:T,onChange:ee=>I(ee.target.value)}),s.jsx("textarea",{className:"mb-2 w-full rounded border px-2 py-1 text-sm",value:$,onChange:ee=>F(ee.target.value)}),s.jsx("button",{className:"rounded bg-slate-900 px-3 py-1 text-sm text-white",onClick:()=>K(B.id),children:"Save changes"})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`text-sm font-medium ${B.completed?"line-through text-slate-400":""}`,children:B.title}),B.note&&s.jsx("div",{className:`mt-1 whitespace-pre-wrap text-sm ${B.completed?"text-slate-400 line-through":"text-slate-600"}`,children:B.note}),s.jsx("div",{className:"mt-1 text-xs text-slate-500",children:B.completed?"Completed":`Due on ${Wf(B.dueAt)}`}),s.jsxs("div",{className:"mt-1 flex gap-3 text-sm",children:[s.jsx("button",{className:"text-slate-600 hover:underline",onClick:()=>{k(B.id),I(B.title)},children:"Edit"}),s.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>Y(B.id),children:"Delete"})]})]})})]})},B.id))})]})})]})}):null}function eN(){const e=jt(),{login:t}=sn();return p.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("token");r?(t(r),e("/",{replace:!0})):e("/login",{replace:!0})},[]),null}async function tN(){return V("/workspace-admin/payments")}async function nN(e){return V("/payments/razorpay/create-order",{method:"POST",body:JSON.stringify(e)})}async function sN(e){return V("/payments/razorpay/verify",{method:"POST",body:JSON.stringify(e)})}const rN={individual:{starter:899,professional:1599,business:4999},organization:{starter:1999,professional:3999,business:7999}},lN={monthly:.05,quarterly:.1,yearly:.2},oN=[{label:"Unlimited Leads",starter:!0,professional:!0},{label:"Users",starter:"1",professional:"1"},{label:"Lead Assignment",starter:!0,professional:!0},{label:"Tasks & Follow-ups",starter:!0,professional:!0},{label:"Notes & Activity Timeline",starter:!0,professional:!0},{label:"Native Workflow Automation",starter:!0,professional:!0},{label:"Unlimited Custom Workflows",starter:!0,professional:!0},{label:"Multi-Channel Messaging",starter:!0,professional:!0},{label:"Email Templates",starter:!0,professional:!0},{label:"CSV Export & Bulk Operations",starter:!0,professional:!0},{label:"Kanban Board & Calendar View",starter:!0,professional:!0},{label:"Reports & Analytics",starter:!0,professional:!0},{label:"Email Support",starter:"48h response",professional:"24h response"},{label:"Priority Support",starter:!1,professional:!1}],aN=[{label:"Unlimited Leads",starter:!0,professional:!0,business:!0},{label:"Users",starter:"1",professional:"Up to 5",business:"Unlimited"},{label:"Lead Assignment",starter:!0,professional:!0,business:!0},{label:"Tasks & Follow-ups",starter:!0,professional:!0,business:!0},{label:"Notes & Activity Timeline",starter:!0,professional:!0,business:!0},{label:"Native Workflow Automation",starter:!0,professional:!0,business:!0},{label:"Unlimited Custom Workflows",starter:!0,professional:!0,business:!0},{label:"Multi-Channel Messaging",starter:!0,professional:!0,business:!0},{label:"Team Collaboration",starter:!1,professional:!0,business:!0},{label:"Team Invites & Management",starter:!1,professional:!0,business:!0},{label:"Email Templates",starter:!0,professional:!0,business:!0},{label:"CSV Export & Bulk Operations",starter:!0,professional:!0,business:!0},{label:"Kanban Board & Calendar View",starter:!0,professional:!0,business:!0},{label:"Reports & Analytics",starter:!0,professional:!0,business:!0},{label:"Email Support",starter:"48h response",professional:"24h response",business:"4h response"},{label:"Dedicated Workflow Instance",starter:!1,professional:!1,business:!0},{label:"Priority Support",starter:!1,professional:!1,business:!0}];function iN(){const[e,t]=p.useState("monthly"),[n,r]=p.useState([]),[l,o]=p.useState(!0);p.useEffect(()=>{async function c(){try{const u=await V("/plan-pricing");r(u)}catch(u){console.error("Failed to load plan pricing:",u)}finally{o(!1)}}c()},[]);const a=(c,u)=>{const d=n.find(m=>m.planType===c.toUpperCase());if(d)return u==="organization"?d.organizationPrice:d.individualPrice;const f=c.toLowerCase();return rN[u][f]||0},i={individual:{starter:a("STARTER","individual"),professional:a("PROFESSIONAL","individual"),business:a("BUSINESS","individual")},organization:{starter:a("STARTER","organization"),professional:a("PROFESSIONAL","organization"),business:a("BUSINESS","organization")}};return s.jsx(Ee,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/30",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx(Es,{size:"lg"})}),s.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 bg-clip-text text-transparent mb-6",children:"Choose Your Plan"}),s.jsx("p",{className:"text-xl text-slate-600 mb-4 max-w-2xl mx-auto",children:"The most affordable CRM with unlimited leads, native automation, and self-hosted option"}),s.jsx("p",{className:"text-sm text-slate-500 max-w-xl mx-auto",children:"All plans include workflow automation, unlimited leads, and multi-channel messaging"})]}),s.jsx("div",{className:"flex justify-center mb-12",children:s.jsxs("div",{className:"inline-flex rounded-xl border-2 border-slate-200 bg-white p-1.5 shadow-lg",children:[s.jsxs("button",{onClick:()=>t("monthly"),className:`px-6 py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${e==="monthly"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md scale-105":"text-slate-600 hover:text-slate-900"}`,children:["Monthly",s.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium",children:"5% OFF"})]}),s.jsxs("button",{onClick:()=>t("quarterly"),className:`px-6 py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${e==="quarterly"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md scale-105":"text-slate-600 hover:text-slate-900"}`,children:["Quarterly",s.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium",children:"10% OFF"})]}),s.jsxs("button",{onClick:()=>t("yearly"),className:`px-6 py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${e==="yearly"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md scale-105":"text-slate-600 hover:text-slate-900"}`,children:["Yearly",s.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium",children:"20% OFF"})]})]})}),s.jsxs("div",{className:"mb-20",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Individual Plans"}),s.jsx("p",{className:"text-lg text-slate-600",children:"Perfect for solo entrepreneurs and freelancers"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 max-w-4xl mx-auto",children:[s.jsx(Rr,{name:"Starter",originalPrice:i.individual.starter,billingPeriod:e,subtitle:"Perfect for individuals getting started",features:["Unlimited leads","1 user","Native workflow automation","Multi-channel messaging","Tasks & follow-ups","CSV export & bulk operations","Email support (48h)"],cta:"Get Started",highlight:!1,planType:"individual"}),s.jsx(Rr,{name:"Professional",originalPrice:i.individual.professional,billingPeriod:e,subtitle:"Enhanced features for professionals",badge:"Most Popular",features:["Everything in Starter","1 user","Advanced workflow features","Priority support (24h)","Custom workflow templates","Advanced analytics","Email templates"],cta:"Get Started",highlight:!0,planType:"individual"})]})]}),s.jsxs("div",{className:"mb-20",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Organization Plans"}),s.jsx("p",{className:"text-lg text-slate-600",children:"Built for teams that need collaboration and scale"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[s.jsx(Rr,{name:"Starter Team",originalPrice:i.organization.starter,billingPeriod:e,subtitle:"Perfect for small businesses",features:["Unlimited leads","1 user","Native workflow automation","Multi-channel messaging","Tasks & follow-ups","CSV export & bulk operations","Email support (48h)"],cta:"Get Started",highlight:!1,planType:"organization"}),s.jsx(Rr,{name:"Professional Team",originalPrice:i.organization.professional,billingPeriod:e,subtitle:"Best for growing teams",badge:"Most Popular",features:["Everything in Starter Team","Up to 5 users","Team collaboration","Team invites & management","Priority support (24h)","Shared workflows","Advanced analytics"],cta:"Get Started",highlight:!0,planType:"organization"}),s.jsx(Rr,{name:"Business",originalPrice:i.organization.business,billingPeriod:e,subtitle:"For serious sales teams",features:["Everything in Professional Team","Unlimited users","Dedicated workflow instance","Priority support (4h)","Custom integrations","Advanced analytics","API access"],cta:"Get Started",highlight:!1,planType:"organization"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16",children:[s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:s.jsx("h3",{className:"text-xl font-bold text-white",children:"Individual Plans Features"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 border-b-2 border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-900",children:"Feature"}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold text-slate-900",children:"Starter"}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold text-blue-600",children:"Professional"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:oN.map((c,u)=>s.jsxs("tr",{className:u%2===0?"bg-white":"bg-slate-50/50",children:[s.jsx("td",{className:"px-6 py-3 text-slate-700 font-medium",children:c.label}),s.jsx(Dr,{value:c.starter}),s.jsx(Dr,{value:c.professional,highlight:!0})]},c.label))})]})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:s.jsx("h3",{className:"text-xl font-bold text-white",children:"Organization Plans Features"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 border-b-2 border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left font-semibold text-slate-900",children:"Feature"}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold text-slate-900",children:"Starter"}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold text-blue-600",children:"Professional"}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold text-slate-900",children:"Business"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:aN.map((c,u)=>s.jsxs("tr",{className:u%2===0?"bg-white":"bg-slate-50/50",children:[s.jsx("td",{className:"px-6 py-3 text-slate-700 font-medium",children:c.label}),s.jsx(Dr,{value:c.starter}),s.jsx(Dr,{value:c.professional,highlight:!0}),s.jsx(Dr,{value:c.business})]},c.label))})]})})]})]})]})})})}async function Bf(e,t){if(!e.key_id){alert("Payment gateway configuration missing. Please contact support.");return}const n={key:e.key_id,amount:e.amount,currency:e.currency,name:"Lite CRM",description:`Subscription for ${t} plan`,order_id:e.id,handler:async function(l){try{await sN({paymentId:l.razorpay_payment_id,orderId:l.razorpay_order_id,signature:l.razorpay_signature,environment:"UAT"}),alert("Payment successful! Your subscription will be activated shortly."),window.location.href="/"}catch(o){alert(`Payment verification failed: ${o.message||"Unknown error"}`)}},prefill:{email:"",contact:""},theme:{color:"#1e293b"}};new window.Razorpay(n).open()}function Rr({name:e,originalPrice:t,billingPeriod:n,subtitle:r,badge:l,features:o,cta:a,highlight:i,planType:c}){const u=lN[n];let d,f,m,x,y;n==="monthly"?(d=t*(1-u),f=d,m=d,x=t-d,y=t):n==="quarterly"?(y=t*3,f=y*(1-u),m=f/3,x=y-f):(y=t*12,f=y*(1-u),m=f/12,x=y-f);const b=w=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(w);return s.jsxs("div",{className:`relative rounded-xl border-2 p-6 bg-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:shadow-xl ${i?"border-blue-500 shadow-blue-100 scale-[1.02] ring-2 ring-blue-100":"border-slate-200 hover:border-slate-300"}`,children:[l&&s.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 z-10",children:s.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-5 py-1.5 rounded-full text-xs font-bold shadow-lg",children:l})}),n!=="monthly"&&s.jsx("div",{className:"absolute -top-4 right-4 z-10",children:s.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow-lg",children:n==="quarterly"?"10% OFF":"20% OFF"})}),s.jsxs("div",{className:"text-center mb-5",children:[s.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-1.5",children:e}),s.jsx("p",{className:"text-xs text-slate-500 mb-4",children:r}),s.jsx("div",{className:"mb-4",children:n==="monthly"?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsxs("div",{className:"flex items-baseline justify-center gap-3",children:[s.jsx("span",{className:"text-2xl text-slate-400 line-through",children:b(t)}),s.jsx("span",{className:"text-4xl font-extrabold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:b(d)})]}),s.jsx("span",{className:"text-slate-500 text-sm",children:"/month"}),s.jsxs("span",{className:"text-green-600 text-sm font-semibold",children:["Save ",b(x),"/month"]})]}):n==="quarterly"?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsxs("div",{className:"flex items-baseline justify-center gap-3",children:[s.jsx("span",{className:"text-xl text-slate-400 line-through",children:b(y)}),s.jsx("span",{className:"text-5xl font-extrabold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:b(f)})]}),s.jsxs("span",{className:"text-slate-700 text-lg font-semibold",children:[b(m),"/month"]}),s.jsxs("span",{className:"text-slate-500 text-xs",children:["Billed quarterly  Save ",b(x)]})]}):s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsxs("div",{className:"flex items-baseline justify-center gap-3",children:[s.jsx("span",{className:"text-xl text-slate-400 line-through",children:b(y)}),s.jsx("span",{className:"text-5xl font-extrabold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:b(f)})]}),s.jsxs("span",{className:"text-slate-700 text-lg font-semibold",children:[b(m),"/month"]}),s.jsxs("span",{className:"text-slate-500 text-xs",children:["Billed annually  Save ",b(x)]})]})})]}),s.jsx("ul",{className:"space-y-2.5 mb-6",children:o.map((w,g)=>s.jsxs("li",{className:"flex items-start gap-2.5",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})}),s.jsx("span",{className:"text-sm text-slate-700 leading-relaxed",children:w})]},g))}),s.jsx("button",{onClick:async()=>{try{let w="STARTER";e.toLowerCase().includes("professional")?w="PROFESSIONAL":e.toLowerCase().includes("business")&&(w="BUSINESS");const g=await nN({amount:f,currency:"INR",planType:w,billingPeriod:n,environment:"UAT"});if(window.Razorpay)Bf(g,w);else{const h=document.createElement("script");h.src="https://checkout.razorpay.com/v1/checkout.js",h.onload=()=>Bf(g,w),document.body.appendChild(h)}}catch(w){alert(`Failed to initiate payment: ${w.message||"Unknown error"}`)}},className:`block w-full text-center py-3 px-4 rounded-lg font-semibold text-sm transition-all shadow-md hover:shadow-lg transform hover:scale-[1.02] ${i?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700":"bg-gradient-to-r from-slate-900 to-slate-800 text-white hover:from-slate-800 hover:to-slate-700"}`,children:a})]})}function Dr({value:e,highlight:t}){const n=`px-6 py-3 text-center ${t?"bg-blue-50":""}`;return e===!0?s.jsx("td",{className:n,children:s.jsx("svg",{className:"w-6 h-6 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}):e===!1?s.jsx("td",{className:n,children:s.jsx("span",{className:"text-slate-300 text-xl",children:""})}):s.jsx("td",{className:`${n} font-semibold text-slate-700`,children:e})}async function cN(){return V("/invites")}async function uN(e,t){return V("/invites",{method:"POST",body:JSON.stringify({email:e,role:t})})}async function dN(e){return V(`/invites/${e}`,{method:"DELETE"})}async function fN(e){return V(`/invites/${e}/public`,{auth:!1})}function mN(){const{inviteId:e}=_a(),t=jt(),{signup:n}=sn(),[r,l]=p.useState(""),[o,a]=p.useState(null),[i,c]=p.useState(""),[u,d]=p.useState(!0),[f,m]=p.useState(null);p.useEffect(()=>{e&&fN(e).then(y=>{l(y.email),a(y.role),d(!1)}).catch(y=>{m((y==null?void 0:y.message)||"Invalid or expired invite"),d(!1)})},[e]);async function x(y){y.preventDefault(),m(null);try{const b=await V("/auth/signup",{method:"POST",body:JSON.stringify({email:r,password:i,mode:"INVITE",inviteId:e})});n(b.accessToken),t("/",{replace:!0})}catch(b){m((b==null?void 0:b.message)||"Invite acceptance failed")}}return u?s.jsx("div",{className:"p-10 text-center",children:"Loading invite"}):f?s.jsx("div",{className:"p-10 text-center text-red-600",children:f}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6 shadow space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-center",children:"Join your team"}),s.jsxs("p",{className:"text-sm text-slate-600 text-center",children:["Invited as ",s.jsx("b",{children:o})]}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsx("input",{className:"w-full rounded border px-3 py-2 bg-slate-100",value:r,disabled:!0}),s.jsx("input",{className:"w-full rounded border px-3 py-2",type:"password",placeholder:"Set password",value:i,onChange:y=>c(y.target.value),required:!0}),s.jsx("button",{className:"w-full rounded bg-slate-900 py-2 text-white",children:"Accept Invite"})]})]})})}async function gx(){return V("/subscriptions/me")}async function hN(e){return V(`/subscriptions/plans/${e}`)}async function pN(e){return V("/subscriptions/me/cancel",{method:"PATCH",body:JSON.stringify({reason:e})})}function xN({isOpen:e,onClose:t,title:n,message:r,feature:l}){const o=jt();return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all animate-scale-in",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:s.jsx(Mc,{size:"sm",className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:n}),l&&s.jsxs("p",{className:"text-sm text-slate-600",children:["Feature: ",l]})]})]}),s.jsx("p",{className:"text-slate-700 mb-6 leading-relaxed",children:r}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6 border border-blue-100",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Upgrade to unlock:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsx("span",{children:"Unlimited leads"})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsx("span",{children:"More team members"})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsx("span",{children:"Advanced features"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Maybe Later"}),s.jsx("button",{onClick:()=>{o("/upgrade"),t()},className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-semibold shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",children:"Upgrade Now"})]})]})})}):null}function gN(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[l,o]=p.useState(""),[a,i]=p.useState("MEMBER"),[c,u]=p.useState(!0),[d,f]=p.useState(null),[m,x]=p.useState(!1),y=td();async function b(){try{const[N,S,E]=await Promise.all([ed(),cN(),gx().catch(()=>null)]);t(N),r(S),f(E)}catch(N){console.error("Failed to load data:",N)}finally{u(!1)}}p.useEffect(()=>{b()},[]);async function w(N){var S;if(N.preventDefault(),!!l)try{const E=(d==null?void 0:d.planType)||"FREE",L=E==="STARTER"?1:E==="PROFESSIONAL"?5:E==="BUSINESS"||E==="ENTERPRISE"?1/0:1;if(L!==1/0&&e.length>=L){x(!0);return}await uN(l,a),y.success("Invite sent successfully!"),o(""),i("MEMBER"),b()}catch(E){(S=E==null?void 0:E.message)!=null&&S.includes("upgrade")?x(!0):y.error((E==null?void 0:E.message)||"Failed to send invite")}}async function g(N){if(window.confirm("Revoke this invite?"))try{await dN(N),y.success("Invite revoked successfully"),b()}catch(S){y.error((S==null?void 0:S.message)||"Failed to revoke invite")}}const h=(d==null?void 0:d.planType)||"FREE",v=h==="STARTER"?1:h==="PROFESSIONAL"?5:h==="BUSINESS"||h==="ENTERPRISE"?1/0:1;return s.jsxs(Ee,{children:[s.jsx(xN,{isOpen:m,onClose:()=>x(!1),title:"Upgrade Required",message:`Your current plan (${h}) allows up to ${v===1/0?"unlimited":v} user${v===1?"":"s"}. To invite more team members, please upgrade your plan.`,feature:"Team Collaboration"}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Team"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Manage users and invitations"})]}),s.jsxs("form",{onSubmit:w,className:"flex flex-col md:flex-row gap-3 bg-white p-4 rounded shadow",children:[s.jsx("input",{className:"flex-1 rounded border px-3 py-2",placeholder:"Email address",value:l,onChange:N=>o(N.target.value),required:!0}),s.jsxs("select",{className:"rounded border px-3 py-2",value:a,onChange:N=>i(N.target.value),children:[s.jsx("option",{value:"MEMBER",children:"Member"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]}),s.jsx("button",{className:"rounded bg-slate-900 px-4 py-2 text-white",children:"Send Invite"})]}),s.jsx("div",{className:"rounded bg-white shadow overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Role"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Joined"})]})}),s.jsx("tbody",{children:!c&&e.map(N=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"px-4 py-3",children:N.name||""}),s.jsx("td",{className:"px-4 py-3 text-slate-600",children:N.email}),s.jsx("td",{className:"px-4 py-3",children:N.role}),s.jsx("td",{className:"px-4 py-3 text-slate-500",children:new Date(N.createdAt).toLocaleDateString()})]},N.id))})]})}),n.length>0&&s.jsx("div",{className:"rounded bg-white shadow overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Role"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Expires"}),s.jsx("th",{className:"px-4 py-3"})]})}),s.jsx("tbody",{children:n.map(N=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"px-4 py-3",children:N.email}),s.jsx("td",{className:"px-4 py-3",children:N.role}),s.jsx("td",{className:"px-4 py-3 text-slate-500",children:new Date(N.expiresAt).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{onClick:()=>g(N.id),className:"text-red-600 text-sm",children:"Revoke"})})]},N.id))})]})})]})]})}async function yN(){try{const e=await V("/workflows");return console.log("Workflows loaded:",e),Array.isArray(e)?e:[]}catch(e){throw console.error("Error listing workflows:",e),e}}async function vN(e){try{const t=await V(`/workflows/${e}`);return console.log("Workflow API response:",t),t}catch(t){throw console.error("Error getting workflow:",t),t}}async function bN(e){try{console.log("Creating workflow:",e);const t=await V("/workflows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return console.log("Workflow created:",t),t}catch(t){throw console.error("Error creating workflow:",t),t}}async function wN(e,t){try{console.log("Updating workflow:",e,t);const n=await V(`/workflows/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return console.log("Workflow updated:",n),n}catch(n){throw console.error("Error updating workflow:",n),n}}async function NN(e){await V(`/workflows/${e}`,{method:"DELETE"})}async function jN(e,t=50){try{const n=await V(`/workflows/${e}/executions?limit=${t}`);return Array.isArray(n)?n:[]}catch(n){throw console.error("Error getting workflow executions:",n),n}}function SN(){const e=jt(),[t,n]=p.useState([]),[r,l]=p.useState(!1),[o,a]=p.useState(null),[i,c]=p.useState({}),[u,d]=p.useState({});async function f(){l(!0);try{console.log("Loading workflows...");const b=await yN();console.log("Workflows loaded:",b),n(b||[])}catch(b){console.error("Failed to load workflows:",b);const w=(b==null?void 0:b.message)||(b==null?void 0:b.toString())||"Unknown error";alert(`Failed to load workflows: ${w}`),n([])}finally{l(!1)}}async function m(b,w){if(confirm(`Are you sure you want to delete workflow "${w}"?`))try{await NN(b),f()}catch(g){alert("Failed to delete workflow: "+(g.message||"Unknown error"))}}async function x(b){if(!u[b]){d(w=>({...w,[b]:!0}));try{const w=await jN(b,20);c(g=>({...g,[b]:w||[]}))}catch(w){console.error("Failed to load executions:",w),c(g=>({...g,[b]:[]}))}finally{d(w=>({...w,[b]:!1}))}}}function y(b){o===b?a(null):(a(b),i[b]||x(b))}return p.useEffect(()=>{f()},[]),s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Workflows"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Create and manage automation workflows"})]}),s.jsx("button",{onClick:()=>e("/workflows/editor"),className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"+ Create Workflow"})]}),r?s.jsx("div",{className:"rounded-lg bg-white border border-slate-200 p-8 text-center",children:s.jsx("p",{className:"text-slate-500",children:"Loading workflows..."})}):t.length===0?s.jsx("div",{className:"rounded-lg bg-white border border-slate-200 p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No workflows yet"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Create your first workflow to automate tasks and processes."}),s.jsx("button",{onClick:()=>e("/workflows/editor"),className:"inline-flex items-center px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Create Workflow "})]})}):s.jsx("div",{className:"space-y-4",children:t.map(b=>{var w,g;return s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white overflow-hidden",children:[s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:b.name}),b.description&&s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:b.description})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded font-medium ${b.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:b.active?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-3",children:[s.jsxs("span",{children:["Nodes: ",((w=b.nodes)==null?void 0:w.length)||0]}),s.jsx("span",{children:""}),s.jsxs("span",{children:["Edges: ",((g=b.edges)==null?void 0:g.length)||0]}),b.updatedAt&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Updated: ",new Date(b.updatedAt).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{to:`/workflows/editor/${b.id}`,className:"flex-1 text-center px-3 py-2 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50 font-medium",children:"Edit"}),s.jsxs("button",{onClick:()=>y(b.id),className:"flex-1 text-center px-3 py-2 text-sm rounded border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium",children:[o===b.id?"Hide":"View"," Executions"]}),s.jsx("button",{onClick:()=>m(b.id,b.name),className:"flex-1 text-center px-3 py-2 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50 font-medium",children:"Delete"})]})]}),o===b.id&&s.jsxs("div",{className:"border-t border-slate-200 bg-slate-50 p-4",children:[s.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Execution History"}),u[b.id]?s.jsx("div",{className:"text-center py-4 text-slate-500 text-sm",children:"Loading executions..."}):!i[b.id]||i[b.id].length===0?s.jsx("div",{className:"text-center py-4 text-slate-500 text-sm",children:"No executions yet. Workflow will execute when trigger events occur."}):s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i[b.id].map(h=>s.jsxs("div",{className:"bg-white rounded border border-slate-200 p-3 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="SUCCESS"?"bg-green-100 text-green-800":h.status==="FAILED"?"bg-red-100 text-red-800":h.status==="RUNNING"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:h.status}),s.jsx("span",{className:"text-xs text-slate-500",children:h.startedAt?new Date(h.startedAt).toLocaleString():new Date(h.createdAt).toLocaleString()})]}),h.error&&s.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-800",children:[s.jsx("strong",{children:"Error:"})," ",h.error]}),h.input&&s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{className:"text-xs text-slate-600 cursor-pointer hover:text-slate-900",children:"View Input Data"}),s.jsx("pre",{className:"mt-2 p-2 bg-slate-100 rounded text-xs overflow-x-auto",children:JSON.stringify(h.input,null,2)})]}),h.output&&s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{className:"text-xs text-slate-600 cursor-pointer hover:text-slate-900",children:"View Output Data"}),s.jsx("pre",{className:"mt-2 p-2 bg-slate-100 rounded text-xs overflow-x-auto",children:JSON.stringify(h.output,null,2)})]})]},h.id))})]})]},b.id)})})]})})}function He(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=He(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yx={exports:{}},vx={},bx={exports:{}},wx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ur=p;function kN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var EN=typeof Object.is=="function"?Object.is:kN,CN=ur.useState,TN=ur.useEffect,AN=ur.useLayoutEffect,PN=ur.useDebugValue;function _N(e,t){var n=t(),r=CN({inst:{value:n,getSnapshot:t}}),l=r[0].inst,o=r[1];return AN(function(){l.value=n,l.getSnapshot=t,Ti(l)&&o({inst:l})},[e,n,t]),TN(function(){return Ti(l)&&o({inst:l}),e(function(){Ti(l)&&o({inst:l})})},[e]),PN(n),n}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!EN(e,n)}catch{return!0}}function LN(e,t){return t()}var RN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?LN:_N;wx.useSyncExternalStore=ur.useSyncExternalStore!==void 0?ur.useSyncExternalStore:RN;bx.exports=wx;var DN=bx.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=p,IN=DN;function MN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $N=typeof Object.is=="function"?Object.is:MN,FN=IN.useSyncExternalStore,zN=Ra.useRef,ON=Ra.useEffect,UN=Ra.useMemo,WN=Ra.useDebugValue;vx.useSyncExternalStoreWithSelector=function(e,t,n,r,l){var o=zN(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=UN(function(){function c(x){if(!u){if(u=!0,d=x,x=r(x),l!==void 0&&a.hasValue){var y=a.value;if(l(y,x))return f=y}return f=x}if(y=f,$N(d,x))return y;var b=r(x);return l!==void 0&&l(y,b)?(d=x,y):(d=x,f=b)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,l]);var i=FN(e,o[0],o[1]);return ON(function(){a.hasValue=!0,a.value=i},[i]),WN(i),i};yx.exports=vx;var BN=yx.exports;const VN=Mm(BN),HN={},Vf=e=>{let t;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const x=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(y=>y(t,x))}},l=()=>t,c={setState:r,getState:l,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(HN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,l,c);return c},GN=e=>e?Vf(e):Vf,{useDebugValue:YN}=U,{useSyncExternalStoreWithSelector:KN}=VN,XN=e=>e;function Nx(e,t=XN,n){const r=KN(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return YN(r),r}const Hf=(e,t)=>{const n=GN(e),r=(l,o=t)=>Nx(n,l,o);return Object.assign(r,n),r},qN=(e,t)=>e?Hf(e,t):Hf;function Ue(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,l]of e)if(!Object.is(l,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var QN={value:()=>{}};function Da(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Po(n)}function Po(e){this._=e}function ZN(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",l=n.indexOf(".");if(l>=0&&(r=n.slice(l+1),n=n.slice(0,l)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Po.prototype=Da.prototype={constructor:Po,on:function(e,t){var n=this._,r=ZN(e+"",n),l,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((l=(e=r[o]).type)&&(l=JN(n[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(l=(e=r[o]).type)n[l]=Gf(n[l],e.name,t);else if(t==null)for(l in n)n[l]=Gf(n[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Po(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var n=new Array(l),r=0,l,o;r<l;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,l=o.length;r<l;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],l=0,o=r.length;l<o;++l)r[l].value.apply(t,n)}};function JN(e,t){for(var n=0,r=e.length,l;n<r;++n)if((l=e[n]).name===t)return l.value}function Gf(e,t,n){for(var r=0,l=e.length;r<l;++r)if(e[r].name===t){e[r]=QN,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var $c="http://www.w3.org/1999/xhtml";const Yf={svg:"http://www.w3.org/2000/svg",xhtml:$c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ia(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yf.hasOwnProperty(t)?{space:Yf[t],local:e}:e}function ej(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$c&&t.documentElement.namespaceURI===$c?t.createElement(e):t.createElementNS(n,e)}}function tj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jx(e){var t=Ia(e);return(t.local?tj:ej)(t)}function nj(){}function nd(e){return e==null?nj:function(){return this.querySelector(e)}}function sj(e){typeof e!="function"&&(e=nd(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var o=t[l],a=o.length,i=r[l]=new Array(a),c,u,d=0;d<a;++d)(c=o[d])&&(u=e.call(c,c.__data__,d,o))&&("__data__"in c&&(u.__data__=c.__data__),i[d]=u);return new vt(r,this._parents)}function rj(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function lj(){return[]}function Sx(e){return e==null?lj:function(){return this.querySelectorAll(e)}}function oj(e){return function(){return rj(e.apply(this,arguments))}}function aj(e){typeof e=="function"?e=oj(e):e=Sx(e);for(var t=this._groups,n=t.length,r=[],l=[],o=0;o<n;++o)for(var a=t[o],i=a.length,c,u=0;u<i;++u)(c=a[u])&&(r.push(e.call(c,c.__data__,u,a)),l.push(c));return new vt(r,l)}function kx(e){return function(){return this.matches(e)}}function Ex(e){return function(t){return t.matches(e)}}var ij=Array.prototype.find;function cj(e){return function(){return ij.call(this.children,e)}}function uj(){return this.firstElementChild}function dj(e){return this.select(e==null?uj:cj(typeof e=="function"?e:Ex(e)))}var fj=Array.prototype.filter;function mj(){return Array.from(this.children)}function hj(e){return function(){return fj.call(this.children,e)}}function pj(e){return this.selectAll(e==null?mj:hj(typeof e=="function"?e:Ex(e)))}function xj(e){typeof e!="function"&&(e=kx(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var o=t[l],a=o.length,i=r[l]=[],c,u=0;u<a;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&i.push(c);return new vt(r,this._parents)}function Cx(e){return new Array(e.length)}function gj(){return new vt(this._enter||this._groups.map(Cx),this._parents)}function la(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}la.prototype={constructor:la,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yj(e){return function(){return e}}function vj(e,t,n,r,l,o){for(var a=0,i,c=t.length,u=o.length;a<u;++a)(i=t[a])?(i.__data__=o[a],r[a]=i):n[a]=new la(e,o[a]);for(;a<c;++a)(i=t[a])&&(l[a]=i)}function bj(e,t,n,r,l,o,a){var i,c,u=new Map,d=t.length,f=o.length,m=new Array(d),x;for(i=0;i<d;++i)(c=t[i])&&(m[i]=x=a.call(c,c.__data__,i,t)+"",u.has(x)?l[i]=c:u.set(x,c));for(i=0;i<f;++i)x=a.call(e,o[i],i,o)+"",(c=u.get(x))?(r[i]=c,c.__data__=o[i],u.delete(x)):n[i]=new la(e,o[i]);for(i=0;i<d;++i)(c=t[i])&&u.get(m[i])===c&&(l[i]=c)}function wj(e){return e.__data__}function Nj(e,t){if(!arguments.length)return Array.from(this,wj);var n=t?bj:vj,r=this._parents,l=this._groups;typeof e!="function"&&(e=yj(e));for(var o=l.length,a=new Array(o),i=new Array(o),c=new Array(o),u=0;u<o;++u){var d=r[u],f=l[u],m=f.length,x=jj(e.call(d,d&&d.__data__,u,r)),y=x.length,b=i[u]=new Array(y),w=a[u]=new Array(y),g=c[u]=new Array(m);n(d,f,b,w,g,x,t);for(var h=0,v=0,N,S;h<y;++h)if(N=b[h]){for(h>=v&&(v=h+1);!(S=w[v])&&++v<y;);N._next=S||null}}return a=new vt(a,r),a._enter=i,a._exit=c,a}function jj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sj(){return new vt(this._exit||this._groups.map(Cx),this._parents)}function kj(e,t,n){var r=this.enter(),l=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),n==null?o.remove():n(o),r&&l?r.merge(l).order():l}function Ej(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,l=n.length,o=r.length,a=Math.min(l,o),i=new Array(l),c=0;c<a;++c)for(var u=n[c],d=r[c],f=u.length,m=i[c]=new Array(f),x,y=0;y<f;++y)(x=u[y]||d[y])&&(m[y]=x);for(;c<l;++c)i[c]=n[c];return new vt(i,this._parents)}function Cj(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],l=r.length-1,o=r[l],a;--l>=0;)(a=r[l])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Tj(e){e||(e=Aj);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,l=new Array(r),o=0;o<r;++o){for(var a=n[o],i=a.length,c=l[o]=new Array(i),u,d=0;d<i;++d)(u=a[d])&&(c[d]=u);c.sort(t)}return new vt(l,this._parents).order()}function Aj(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pj(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _j(){return Array.from(this)}function Lj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],l=0,o=r.length;l<o;++l){var a=r[l];if(a)return a}return null}function Rj(){let e=0;for(const t of this)++e;return e}function Dj(){return!this.node()}function Ij(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var l=t[n],o=0,a=l.length,i;o<a;++o)(i=l[o])&&e.call(i,i.__data__,o,l);return this}function Mj(e){return function(){this.removeAttribute(e)}}function $j(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fj(e,t){return function(){this.setAttribute(e,t)}}function zj(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Oj(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Uj(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Wj(e,t){var n=Ia(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$j:Mj:typeof t=="function"?n.local?Uj:Oj:n.local?zj:Fj)(n,t))}function Tx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bj(e){return function(){this.style.removeProperty(e)}}function Vj(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hj(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Gj(e,t,n){return arguments.length>1?this.each((t==null?Bj:typeof t=="function"?Hj:Vj)(e,t,n??"")):dr(this.node(),e)}function dr(e,t){return e.style.getPropertyValue(t)||Tx(e).getComputedStyle(e,null).getPropertyValue(t)}function Yj(e){return function(){delete this[e]}}function Kj(e,t){return function(){this[e]=t}}function Xj(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qj(e,t){return arguments.length>1?this.each((t==null?Yj:typeof t=="function"?Xj:Kj)(e,t)):this.node()[e]}function Ax(e){return e.trim().split(/^|\s+/)}function sd(e){return e.classList||new Px(e)}function Px(e){this._node=e,this._names=Ax(e.getAttribute("class")||"")}Px.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _x(e,t){for(var n=sd(e),r=-1,l=t.length;++r<l;)n.add(t[r])}function Lx(e,t){for(var n=sd(e),r=-1,l=t.length;++r<l;)n.remove(t[r])}function Qj(e){return function(){_x(this,e)}}function Zj(e){return function(){Lx(this,e)}}function Jj(e,t){return function(){(t.apply(this,arguments)?_x:Lx)(this,e)}}function e2(e,t){var n=Ax(e+"");if(arguments.length<2){for(var r=sd(this.node()),l=-1,o=n.length;++l<o;)if(!r.contains(n[l]))return!1;return!0}return this.each((typeof t=="function"?Jj:t?Qj:Zj)(n,t))}function t2(){this.textContent=""}function n2(e){return function(){this.textContent=e}}function s2(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function r2(e){return arguments.length?this.each(e==null?t2:(typeof e=="function"?s2:n2)(e)):this.node().textContent}function l2(){this.innerHTML=""}function o2(e){return function(){this.innerHTML=e}}function a2(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function i2(e){return arguments.length?this.each(e==null?l2:(typeof e=="function"?a2:o2)(e)):this.node().innerHTML}function c2(){this.nextSibling&&this.parentNode.appendChild(this)}function u2(){return this.each(c2)}function d2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function f2(){return this.each(d2)}function m2(e){var t=typeof e=="function"?e:jx(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function h2(){return null}function p2(e,t){var n=typeof e=="function"?e:jx(e),r=t==null?h2:typeof t=="function"?t:nd(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function x2(){var e=this.parentNode;e&&e.removeChild(this)}function g2(){return this.each(x2)}function y2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function v2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function b2(e){return this.select(e?v2:y2)}function w2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function N2(e){return function(t){e.call(this,t,this.__data__)}}function j2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function S2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,l=t.length,o;n<l;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function k2(e,t,n){return function(){var r=this.__on,l,o=N2(t);if(r){for(var a=0,i=r.length;a<i;++a)if((l=r[a]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=o,l.options=n),l.value=t;return}}this.addEventListener(e.type,o,n),l={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(l):this.__on=[l]}}function E2(e,t,n){var r=j2(e+""),l,o=r.length,a;if(arguments.length<2){var i=this.node().__on;if(i){for(var c=0,u=i.length,d;c<u;++c)for(l=0,d=i[c];l<o;++l)if((a=r[l]).type===d.type&&a.name===d.name)return d.value}return}for(i=t?k2:S2,l=0;l<o;++l)this.each(i(r[l],t,n));return this}function Rx(e,t,n){var r=Tx(e),l=r.CustomEvent;typeof l=="function"?l=new l(t,n):(l=r.document.createEvent("Event"),n?(l.initEvent(t,n.bubbles,n.cancelable),l.detail=n.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function C2(e,t){return function(){return Rx(this,e,t)}}function T2(e,t){return function(){return Rx(this,e,t.apply(this,arguments))}}function A2(e,t){return this.each((typeof t=="function"?T2:C2)(e,t))}function*P2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],l=0,o=r.length,a;l<o;++l)(a=r[l])&&(yield a)}var Dx=[null];function vt(e,t){this._groups=e,this._parents=t}function Ml(){return new vt([[document.documentElement]],Dx)}function _2(){return this}vt.prototype=Ml.prototype={constructor:vt,select:sj,selectAll:aj,selectChild:dj,selectChildren:pj,filter:xj,data:Nj,enter:gj,exit:Sj,join:kj,merge:Ej,selection:_2,order:Cj,sort:Tj,call:Pj,nodes:_j,node:Lj,size:Rj,empty:Dj,each:Ij,attr:Wj,style:Gj,property:qj,classed:e2,text:r2,html:i2,raise:u2,lower:f2,append:m2,insert:p2,remove:g2,clone:b2,datum:w2,on:E2,dispatch:A2,[Symbol.iterator]:P2};function Ct(e){return typeof e=="string"?new vt([[document.querySelector(e)]],[document.documentElement]):new vt([[e]],Dx)}function L2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ft(e,t){if(e=L2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[e.clientX-l.left-t.clientLeft,e.clientY-l.top-t.clientTop]}}return[e.pageX,e.pageY]}const R2={passive:!1},bl={capture:!0,passive:!1};function Ai(e){e.stopImmediatePropagation()}function er(e){e.preventDefault(),e.stopImmediatePropagation()}function Ix(e){var t=e.document.documentElement,n=Ct(e).on("dragstart.drag",er,bl);"onselectstart"in t?n.on("selectstart.drag",er,bl):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Mx(e,t){var n=e.document.documentElement,r=Ct(e).on("dragstart.drag",null);t&&(r.on("click.drag",er,bl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const lo=e=>()=>e;function Fc(e,{sourceEvent:t,subject:n,target:r,identifier:l,active:o,x:a,y:i,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Fc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function D2(e){return!e.ctrlKey&&!e.button}function I2(){return this.parentNode}function M2(e,t){return t??{x:e.x,y:e.y}}function $2(){return navigator.maxTouchPoints||"ontouchstart"in this}function F2(){var e=D2,t=I2,n=M2,r=$2,l={},o=Da("start","drag","end"),a=0,i,c,u,d,f=0;function m(N){N.on("mousedown.drag",x).filter(r).on("touchstart.drag",w).on("touchmove.drag",g,R2).on("touchend.drag touchcancel.drag",h).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(N,S){if(!(d||!e.call(this,N,S))){var E=v(this,t.call(this,N,S),N,S,"mouse");E&&(Ct(N.view).on("mousemove.drag",y,bl).on("mouseup.drag",b,bl),Ix(N.view),Ai(N),u=!1,i=N.clientX,c=N.clientY,E("start",N))}}function y(N){if(er(N),!u){var S=N.clientX-i,E=N.clientY-c;u=S*S+E*E>f}l.mouse("drag",N)}function b(N){Ct(N.view).on("mousemove.drag mouseup.drag",null),Mx(N.view,u),er(N),l.mouse("end",N)}function w(N,S){if(e.call(this,N,S)){var E=N.changedTouches,L=t.call(this,N,S),C=E.length,k,T;for(k=0;k<C;++k)(T=v(this,L,N,S,E[k].identifier,E[k]))&&(Ai(N),T("start",N,E[k]))}}function g(N){var S=N.changedTouches,E=S.length,L,C;for(L=0;L<E;++L)(C=l[S[L].identifier])&&(er(N),C("drag",N,S[L]))}function h(N){var S=N.changedTouches,E=S.length,L,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),L=0;L<E;++L)(C=l[S[L].identifier])&&(Ai(N),C("end",N,S[L]))}function v(N,S,E,L,C,k){var T=o.copy(),I=Ft(k||E,S),$,F,j;if((j=n.call(N,new Fc("beforestart",{sourceEvent:E,target:m,identifier:C,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:T}),L))!=null)return $=j.x-I[0]||0,F=j.y-I[1]||0,function P(A,O,R){var _=I,D;switch(A){case"start":l[C]=P,D=a++;break;case"end":delete l[C],--a;case"drag":I=Ft(R||O,S),D=a;break}T.call(A,N,new Fc(A,{sourceEvent:O,subject:j,target:m,identifier:C,active:D,x:I[0]+$,y:I[1]+F,dx:I[0]-_[0],dy:I[1]-_[1],dispatch:T}),L)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:lo(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:lo(N),m):t},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:lo(N),m):n},m.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:lo(!!N),m):r},m.on=function(){var N=o.on.apply(o,arguments);return N===o?m:N},m.clickDistance=function(N){return arguments.length?(f=(N=+N)*N,m):Math.sqrt(f)},m}function rd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $x(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $l(){}var wl=.7,oa=1/wl,tr="\\s*([+-]?\\d+)\\s*",Nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z2=/^#([0-9a-f]{3,8})$/,O2=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),U2=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),W2=new RegExp(`^rgba\\(${tr},${tr},${tr},${Nl}\\)$`),B2=new RegExp(`^rgba\\(${nn},${nn},${nn},${Nl}\\)$`),V2=new RegExp(`^hsl\\(${Nl},${nn},${nn}\\)$`),H2=new RegExp(`^hsla\\(${Nl},${nn},${nn},${Nl}\\)$`),Kf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rd($l,jl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xf,formatHex:Xf,formatHex8:G2,formatHsl:Y2,formatRgb:qf,toString:qf});function Xf(){return this.rgb().formatHex()}function G2(){return this.rgb().formatHex8()}function Y2(){return Fx(this).formatHsl()}function qf(){return this.rgb().formatRgb()}function jl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=z2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qf(t):n===3?new at(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=O2.exec(e))?new at(t[1],t[2],t[3],1):(t=U2.exec(e))?new at(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=W2.exec(e))?oo(t[1],t[2],t[3],t[4]):(t=B2.exec(e))?oo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=V2.exec(e))?em(t[1],t[2]/100,t[3]/100,1):(t=H2.exec(e))?em(t[1],t[2]/100,t[3]/100,t[4]):Kf.hasOwnProperty(e)?Qf(Kf[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function Qf(e){return new at(e>>16&255,e>>8&255,e&255,1)}function oo(e,t,n,r){return r<=0&&(e=t=n=NaN),new at(e,t,n,r)}function K2(e){return e instanceof $l||(e=jl(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function zc(e,t,n,r){return arguments.length===1?K2(e):new at(e,t,n,r??1)}function at(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}rd(at,zc,$x($l,{brighter(e){return e=e==null?oa:Math.pow(oa,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wl:Math.pow(wl,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new at(hs(this.r),hs(this.g),hs(this.b),aa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zf,formatHex:Zf,formatHex8:X2,formatRgb:Jf,toString:Jf}));function Zf(){return`#${us(this.r)}${us(this.g)}${us(this.b)}`}function X2(){return`#${us(this.r)}${us(this.g)}${us(this.b)}${us((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jf(){const e=aa(this.opacity);return`${e===1?"rgb(":"rgba("}${hs(this.r)}, ${hs(this.g)}, ${hs(this.b)}${e===1?")":`, ${e})`}`}function aa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function us(e){return e=hs(e),(e<16?"0":"")+e.toString(16)}function em(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ot(e,t,n,r)}function Fx(e){if(e instanceof Ot)return new Ot(e.h,e.s,e.l,e.opacity);if(e instanceof $l||(e=jl(e)),!e)return new Ot;if(e instanceof Ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,l=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,i=o-l,c=(o+l)/2;return i?(t===o?a=(n-r)/i+(n<r)*6:n===o?a=(r-t)/i+2:a=(t-n)/i+4,i/=c<.5?o+l:2-o-l,a*=60):i=c>0&&c<1?0:a,new Ot(a,i,c,e.opacity)}function q2(e,t,n,r){return arguments.length===1?Fx(e):new Ot(e,t,n,r??1)}function Ot(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rd(Ot,q2,$x($l,{brighter(e){return e=e==null?oa:Math.pow(oa,e),new Ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wl:Math.pow(wl,e),new Ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,l=2*n-r;return new at(Pi(e>=240?e-240:e+120,l,r),Pi(e,l,r),Pi(e<120?e+240:e-120,l,r),this.opacity)},clamp(){return new Ot(tm(this.h),ao(this.s),ao(this.l),aa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=aa(this.opacity);return`${e===1?"hsl(":"hsla("}${tm(this.h)}, ${ao(this.s)*100}%, ${ao(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tm(e){return e=(e||0)%360,e<0?e+360:e}function ao(e){return Math.max(0,Math.min(1,e||0))}function Pi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zx=e=>()=>e;function Q2(e,t){return function(n){return e+n*t}}function Z2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function J2(e){return(e=+e)==1?Ox:function(t,n){return n-t?Z2(t,n,e):zx(isNaN(t)?n:t)}}function Ox(e,t){var n=t-e;return n?Q2(e,n):zx(isNaN(e)?t:e)}const nm=function e(t){var n=J2(t);function r(l,o){var a=n((l=zc(l)).r,(o=zc(o)).r),i=n(l.g,o.g),c=n(l.b,o.b),u=Ox(l.opacity,o.opacity);return function(d){return l.r=a(d),l.g=i(d),l.b=c(d),l.opacity=u(d),l+""}}return r.gamma=e,r}(1);function Ln(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Oc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_i=new RegExp(Oc.source,"g");function e1(e){return function(){return e}}function t1(e){return function(t){return e(t)+""}}function n1(e,t){var n=Oc.lastIndex=_i.lastIndex=0,r,l,o,a=-1,i=[],c=[];for(e=e+"",t=t+"";(r=Oc.exec(e))&&(l=_i.exec(t));)(o=l.index)>n&&(o=t.slice(n,o),i[a]?i[a]+=o:i[++a]=o),(r=r[0])===(l=l[0])?i[a]?i[a]+=l:i[++a]=l:(i[++a]=null,c.push({i:a,x:Ln(r,l)})),n=_i.lastIndex;return n<t.length&&(o=t.slice(n),i[a]?i[a]+=o:i[++a]=o),i.length<2?c[0]?t1(c[0].x):e1(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)i[(f=c[d]).i]=f.x(u);return i.join("")})}var sm=180/Math.PI,Uc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ux(e,t,n,r,l,o){var a,i,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(i=Math.sqrt(n*n+r*r))&&(n/=i,r/=i,c/=i),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:l,translateY:o,rotate:Math.atan2(t,e)*sm,skewX:Math.atan(c)*sm,scaleX:a,scaleY:i}}var io;function s1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uc:Ux(t.a,t.b,t.c,t.d,t.e,t.f)}function r1(e){return e==null||(io||(io=document.createElementNS("http://www.w3.org/2000/svg","g")),io.setAttribute("transform",e),!(e=io.transform.baseVal.consolidate()))?Uc:(e=e.matrix,Ux(e.a,e.b,e.c,e.d,e.e,e.f))}function Wx(e,t,n,r){function l(u){return u.length?u.pop()+" ":""}function o(u,d,f,m,x,y){if(u!==f||d!==m){var b=x.push("translate(",null,t,null,n);y.push({i:b-4,x:Ln(u,f)},{i:b-2,x:Ln(d,m)})}else(f||m)&&x.push("translate("+f+t+m+n)}function a(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(l(f)+"rotate(",null,r)-2,x:Ln(u,d)})):d&&f.push(l(f)+"rotate("+d+r)}function i(u,d,f,m){u!==d?m.push({i:f.push(l(f)+"skewX(",null,r)-2,x:Ln(u,d)}):d&&f.push(l(f)+"skewX("+d+r)}function c(u,d,f,m,x,y){if(u!==f||d!==m){var b=x.push(l(x)+"scale(",null,",",null,")");y.push({i:b-4,x:Ln(u,f)},{i:b-2,x:Ln(d,m)})}else(f!==1||m!==1)&&x.push(l(x)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),o(u.translateX,u.translateY,d.translateX,d.translateY,f,m),a(u.rotate,d.rotate,f,m),i(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(x){for(var y=-1,b=m.length,w;++y<b;)f[(w=m[y]).i]=w.x(x);return f.join("")}}}var l1=Wx(s1,"px, ","px)","deg)"),o1=Wx(r1,", ",")",")"),a1=1e-12;function rm(e){return((e=Math.exp(e))+1/e)/2}function i1(e){return((e=Math.exp(e))-1/e)/2}function c1(e){return((e=Math.exp(2*e))-1)/(e+1)}const u1=function e(t,n,r){function l(o,a){var i=o[0],c=o[1],u=o[2],d=a[0],f=a[1],m=a[2],x=d-i,y=f-c,b=x*x+y*y,w,g;if(b<a1)g=Math.log(m/u)/t,w=function(L){return[i+L*x,c+L*y,u*Math.exp(t*L*g)]};else{var h=Math.sqrt(b),v=(m*m-u*u+r*b)/(2*u*n*h),N=(m*m-u*u-r*b)/(2*m*n*h),S=Math.log(Math.sqrt(v*v+1)-v),E=Math.log(Math.sqrt(N*N+1)-N);g=(E-S)/t,w=function(L){var C=L*g,k=rm(S),T=u/(n*h)*(k*c1(t*C+S)-i1(S));return[i+T*x,c+T*y,u*k/rm(t*C+S)]}}return w.duration=g*1e3*t/Math.SQRT2,w}return l.rho=function(o){var a=Math.max(.001,+o),i=a*a,c=i*i;return e(a,i,c)},l}(Math.SQRT2,2,4);var fr=0,Vr=0,Ir=0,Bx=1e3,ia,Hr,ca=0,Ns=0,Ma=0,Sl=typeof performance=="object"&&performance.now?performance:Date,Vx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ld(){return Ns||(Vx(d1),Ns=Sl.now()+Ma)}function d1(){Ns=0}function ua(){this._call=this._time=this._next=null}ua.prototype=Hx.prototype={constructor:ua,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ld():+n)+(t==null?0:+t),!this._next&&Hr!==this&&(Hr?Hr._next=this:ia=this,Hr=this),this._call=e,this._time=n,Wc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wc())}};function Hx(e,t,n){var r=new ua;return r.restart(e,t,n),r}function f1(){ld(),++fr;for(var e=ia,t;e;)(t=Ns-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fr}function lm(){Ns=(ca=Sl.now())+Ma,fr=Vr=0;try{f1()}finally{fr=0,h1(),Ns=0}}function m1(){var e=Sl.now(),t=e-ca;t>Bx&&(Ma-=t,ca=e)}function h1(){for(var e,t=ia,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ia=n);Hr=e,Wc(r)}function Wc(e){if(!fr){Vr&&(Vr=clearTimeout(Vr));var t=e-Ns;t>24?(e<1/0&&(Vr=setTimeout(lm,e-Sl.now()-Ma)),Ir&&(Ir=clearInterval(Ir))):(Ir||(ca=Sl.now(),Ir=setInterval(m1,Bx)),fr=1,Vx(lm))}}function om(e,t,n){var r=new ua;return t=t==null?0:+t,r.restart(l=>{r.stop(),e(l+t)},t,n),r}var p1=Da("start","end","cancel","interrupt"),x1=[],Gx=0,am=1,Bc=2,_o=3,im=4,Vc=5,Lo=6;function $a(e,t,n,r,l,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;g1(e,n,{name:t,index:r,group:l,on:p1,tween:x1,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Gx})}function od(e,t){var n=Gt(e,t);if(n.state>Gx)throw new Error("too late; already scheduled");return n}function rn(e,t){var n=Gt(e,t);if(n.state>_o)throw new Error("too late; already running");return n}function Gt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function g1(e,t,n){var r=e.__transition,l;r[t]=n,n.timer=Hx(o,0,n.time);function o(u){n.state=am,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var d,f,m,x;if(n.state!==am)return c();for(d in r)if(x=r[d],x.name===n.name){if(x.state===_o)return om(a);x.state===im?(x.state=Lo,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete r[d]):+d<t&&(x.state=Lo,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete r[d])}if(om(function(){n.state===_o&&(n.state=im,n.timer.restart(i,n.delay,n.time),i(u))}),n.state=Bc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bc){for(n.state=_o,l=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(x=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(l[++f]=x);l.length=f+1}}function i(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Vc,1),f=-1,m=l.length;++f<m;)l[f].call(e,d);n.state===Vc&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Lo,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ro(e,t){var n=e.__transition,r,l,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}l=r.state>Bc&&r.state<Vc,r.state=Lo,r.timer.stop(),r.on.call(l?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function y1(e){return this.each(function(){Ro(this,e)})}function v1(e,t){var n,r;return function(){var l=rn(this,e),o=l.tween;if(o!==n){r=n=o;for(var a=0,i=r.length;a<i;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}l.tween=r}}function b1(e,t,n){var r,l;if(typeof n!="function")throw new Error;return function(){var o=rn(this,e),a=o.tween;if(a!==r){l=(r=a).slice();for(var i={name:t,value:n},c=0,u=l.length;c<u;++c)if(l[c].name===t){l[c]=i;break}c===u&&l.push(i)}o.tween=l}}function w1(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Gt(this.node(),n).tween,l=0,o=r.length,a;l<o;++l)if((a=r[l]).name===e)return a.value;return null}return this.each((t==null?v1:b1)(n,e,t))}function ad(e,t,n){var r=e._id;return e.each(function(){var l=rn(this,r);(l.value||(l.value={}))[t]=n.apply(this,arguments)}),function(l){return Gt(l,r).value[t]}}function Yx(e,t){var n;return(typeof t=="number"?Ln:t instanceof jl?nm:(n=jl(t))?(t=n,nm):n1)(e,t)}function N1(e){return function(){this.removeAttribute(e)}}function j1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S1(e,t,n){var r,l=n+"",o;return function(){var a=this.getAttribute(e);return a===l?null:a===r?o:o=t(r=a,n)}}function k1(e,t,n){var r,l=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===l?null:a===r?o:o=t(r=a,n)}}function E1(e,t,n){var r,l,o;return function(){var a,i=n(this),c;return i==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=i+"",a===c?null:a===r&&c===l?o:(l=c,o=t(r=a,i)))}}function C1(e,t,n){var r,l,o;return function(){var a,i=n(this),c;return i==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=i+"",a===c?null:a===r&&c===l?o:(l=c,o=t(r=a,i)))}}function T1(e,t){var n=Ia(e),r=n==="transform"?o1:Yx;return this.attrTween(e,typeof t=="function"?(n.local?C1:E1)(n,r,ad(this,"attr."+e,t)):t==null?(n.local?j1:N1)(n):(n.local?k1:S1)(n,r,t))}function A1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function P1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _1(e,t){var n,r;function l(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&P1(e,o)),n}return l._value=t,l}function L1(e,t){var n,r;function l(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&A1(e,o)),n}return l._value=t,l}function R1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ia(e);return this.tween(n,(r.local?_1:L1)(r,t))}function D1(e,t){return function(){od(this,e).delay=+t.apply(this,arguments)}}function I1(e,t){return t=+t,function(){od(this,e).delay=t}}function M1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?D1:I1)(t,e)):Gt(this.node(),t).delay}function $1(e,t){return function(){rn(this,e).duration=+t.apply(this,arguments)}}function F1(e,t){return t=+t,function(){rn(this,e).duration=t}}function z1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$1:F1)(t,e)):Gt(this.node(),t).duration}function O1(e,t){if(typeof t!="function")throw new Error;return function(){rn(this,e).ease=t}}function U1(e){var t=this._id;return arguments.length?this.each(O1(t,e)):Gt(this.node(),t).ease}function W1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rn(this,e).ease=n}}function B1(e){if(typeof e!="function")throw new Error;return this.each(W1(this._id,e))}function V1(e){typeof e!="function"&&(e=kx(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var o=t[l],a=o.length,i=r[l]=[],c,u=0;u<a;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&i.push(c);return new jn(r,this._parents,this._name,this._id)}function H1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,l=n.length,o=Math.min(r,l),a=new Array(r),i=0;i<o;++i)for(var c=t[i],u=n[i],d=c.length,f=a[i]=new Array(d),m,x=0;x<d;++x)(m=c[x]||u[x])&&(f[x]=m);for(;i<r;++i)a[i]=t[i];return new jn(a,this._parents,this._name,this._id)}function G1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Y1(e,t,n){var r,l,o=G1(t)?od:rn;return function(){var a=o(this,e),i=a.on;i!==r&&(l=(r=i).copy()).on(t,n),a.on=l}}function K1(e,t){var n=this._id;return arguments.length<2?Gt(this.node(),n).on.on(e):this.each(Y1(n,e,t))}function X1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function q1(){return this.on("end.remove",X1(this._id))}function Q1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nd(e));for(var r=this._groups,l=r.length,o=new Array(l),a=0;a<l;++a)for(var i=r[a],c=i.length,u=o[a]=new Array(c),d,f,m=0;m<c;++m)(d=i[m])&&(f=e.call(d,d.__data__,m,i))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,$a(u[m],t,n,m,u,Gt(d,n)));return new jn(o,this._parents,t,n)}function Z1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sx(e));for(var r=this._groups,l=r.length,o=[],a=[],i=0;i<l;++i)for(var c=r[i],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),x,y=Gt(d,n),b=0,w=m.length;b<w;++b)(x=m[b])&&$a(x,t,n,b,m,y);o.push(m),a.push(d)}return new jn(o,a,t,n)}var J1=Ml.prototype.constructor;function eS(){return new J1(this._groups,this._parents)}function tS(e,t){var n,r,l;return function(){var o=dr(this,e),a=(this.style.removeProperty(e),dr(this,e));return o===a?null:o===n&&a===r?l:l=t(n=o,r=a)}}function Kx(e){return function(){this.style.removeProperty(e)}}function nS(e,t,n){var r,l=n+"",o;return function(){var a=dr(this,e);return a===l?null:a===r?o:o=t(r=a,n)}}function sS(e,t,n){var r,l,o;return function(){var a=dr(this,e),i=n(this),c=i+"";return i==null&&(c=i=(this.style.removeProperty(e),dr(this,e))),a===c?null:a===r&&c===l?o:(l=c,o=t(r=a,i))}}function rS(e,t){var n,r,l,o="style."+t,a="end."+o,i;return function(){var c=rn(this,e),u=c.on,d=c.value[o]==null?i||(i=Kx(t)):void 0;(u!==n||l!==d)&&(r=(n=u).copy()).on(a,l=d),c.on=r}}function lS(e,t,n){var r=(e+="")=="transform"?l1:Yx;return t==null?this.styleTween(e,tS(e,r)).on("end.style."+e,Kx(e)):typeof t=="function"?this.styleTween(e,sS(e,r,ad(this,"style."+e,t))).each(rS(this._id,e)):this.styleTween(e,nS(e,r,t),n).on("end.style."+e,null)}function oS(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function aS(e,t,n){var r,l;function o(){var a=t.apply(this,arguments);return a!==l&&(r=(l=a)&&oS(e,a,n)),r}return o._value=t,o}function iS(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,aS(e,t,n??""))}function cS(e){return function(){this.textContent=e}}function uS(e){return function(){var t=e(this);this.textContent=t??""}}function dS(e){return this.tween("text",typeof e=="function"?uS(ad(this,"text",e)):cS(e==null?"":e+""))}function fS(e){return function(t){this.textContent=e.call(this,t)}}function mS(e){var t,n;function r(){var l=e.apply(this,arguments);return l!==n&&(t=(n=l)&&fS(l)),t}return r._value=e,r}function hS(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mS(e))}function pS(){for(var e=this._name,t=this._id,n=Xx(),r=this._groups,l=r.length,o=0;o<l;++o)for(var a=r[o],i=a.length,c,u=0;u<i;++u)if(c=a[u]){var d=Gt(c,t);$a(c,e,n,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new jn(r,this._parents,e,n)}function xS(){var e,t,n=this,r=n._id,l=n.size();return new Promise(function(o,a){var i={value:a},c={value:function(){--l===0&&o()}};n.each(function(){var u=rn(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(c)),u.on=t}),l===0&&o()})}var gS=0;function jn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Xx(){return++gS}var cn=Ml.prototype;jn.prototype={constructor:jn,select:Q1,selectAll:Z1,selectChild:cn.selectChild,selectChildren:cn.selectChildren,filter:V1,merge:H1,selection:eS,transition:pS,call:cn.call,nodes:cn.nodes,node:cn.node,size:cn.size,empty:cn.empty,each:cn.each,on:K1,attr:T1,attrTween:R1,style:lS,styleTween:iS,text:dS,textTween:hS,remove:q1,tween:w1,delay:M1,duration:z1,ease:U1,easeVarying:B1,end:xS,[Symbol.iterator]:cn[Symbol.iterator]};function yS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vS={time:null,delay:0,duration:250,ease:yS};function bS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function wS(e){var t,n;e instanceof jn?(t=e._id,e=e._name):(t=Xx(),(n=vS).time=ld(),e=e==null?null:e+"");for(var r=this._groups,l=r.length,o=0;o<l;++o)for(var a=r[o],i=a.length,c,u=0;u<i;++u)(c=a[u])&&$a(c,e,t,u,a,n||bS(c,t));return new jn(r,this._parents,e,t)}Ml.prototype.interrupt=y1;Ml.prototype.transition=wS;const co=e=>()=>e;function NS(e,{sourceEvent:t,target:n,transform:r,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:l}})}function hn(e,t,n){this.k=e,this.x=t,this.y=n}hn.prototype={constructor:hn,scale:function(e){return e===1?this:new hn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gn=new hn(1,0,0);hn.prototype;function Li(e){e.stopImmediatePropagation()}function Mr(e){e.preventDefault(),e.stopImmediatePropagation()}function jS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function SS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cm(){return this.__zoom||gn}function kS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ES(){return navigator.maxTouchPoints||"ontouchstart"in this}function CS(e,t,n){var r=e.invertX(t[0][0])-n[0][0],l=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function qx(){var e=jS,t=SS,n=CS,r=kS,l=ES,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],i=250,c=u1,u=Da("start","zoom","end"),d,f,m,x=500,y=150,b=0,w=10;function g(j){j.property("__zoom",cm).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(l).on("touchstart.zoom",I).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(j,P,A,O){var R=j.selection?j.selection():j;R.property("__zoom",cm),j!==R?S(j,P,A,O):R.interrupt().each(function(){E(this,arguments).event(O).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},g.scaleBy=function(j,P,A,O){g.scaleTo(j,function(){var R=this.__zoom.k,_=typeof P=="function"?P.apply(this,arguments):P;return R*_},A,O)},g.scaleTo=function(j,P,A,O){g.transform(j,function(){var R=t.apply(this,arguments),_=this.__zoom,D=A==null?N(R):typeof A=="function"?A.apply(this,arguments):A,M=_.invert(D),W=typeof P=="function"?P.apply(this,arguments):P;return n(v(h(_,W),D,M),R,a)},A,O)},g.translateBy=function(j,P,A,O){g.transform(j,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),a)},null,O)},g.translateTo=function(j,P,A,O,R){g.transform(j,function(){var _=t.apply(this,arguments),D=this.__zoom,M=O==null?N(_):typeof O=="function"?O.apply(this,arguments):O;return n(gn.translate(M[0],M[1]).scale(D.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof A=="function"?-A.apply(this,arguments):-A),_,a)},O,R)};function h(j,P){return P=Math.max(o[0],Math.min(o[1],P)),P===j.k?j:new hn(P,j.x,j.y)}function v(j,P,A){var O=P[0]-A[0]*j.k,R=P[1]-A[1]*j.k;return O===j.x&&R===j.y?j:new hn(j.k,O,R)}function N(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function S(j,P,A,O){j.on("start.zoom",function(){E(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(O).end()}).tween("zoom",function(){var R=this,_=arguments,D=E(R,_).event(O),M=t.apply(R,_),W=A==null?N(M):typeof A=="function"?A.apply(R,_):A,K=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),Y=R.__zoom,X=typeof P=="function"?P.apply(R,_):P,Z=c(Y.invert(W).concat(K/Y.k),X.invert(W).concat(K/X.k));return function(B){if(B===1)B=X;else{var ee=Z(B),oe=K/ee[2];B=new hn(oe,W[0]-ee[0]*oe,W[1]-ee[1]*oe)}D.zoom(null,B)}})}function E(j,P,A){return!A&&j.__zooming||new L(j,P)}function L(j,P){this.that=j,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(j,P),this.taps=0}L.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,P){return this.mouse&&j!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var P=Ct(this.that).datum();u.call(j,this.that,new NS(j,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:u}),P)}};function C(j,...P){if(!e.apply(this,arguments))return;var A=E(this,P).event(j),O=this.__zoom,R=Math.max(o[0],Math.min(o[1],O.k*Math.pow(2,r.apply(this,arguments)))),_=Ft(j);if(A.wheel)(A.mouse[0][0]!==_[0]||A.mouse[0][1]!==_[1])&&(A.mouse[1]=O.invert(A.mouse[0]=_)),clearTimeout(A.wheel);else{if(O.k===R)return;A.mouse=[_,O.invert(_)],Ro(this),A.start()}Mr(j),A.wheel=setTimeout(D,y),A.zoom("mouse",n(v(h(O,R),A.mouse[0],A.mouse[1]),A.extent,a));function D(){A.wheel=null,A.end()}}function k(j,...P){if(m||!e.apply(this,arguments))return;var A=j.currentTarget,O=E(this,P,!0).event(j),R=Ct(j.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",K,!0),_=Ft(j,A),D=j.clientX,M=j.clientY;Ix(j.view),Li(j),O.mouse=[_,this.__zoom.invert(_)],Ro(this),O.start();function W(Y){if(Mr(Y),!O.moved){var X=Y.clientX-D,Z=Y.clientY-M;O.moved=X*X+Z*Z>b}O.event(Y).zoom("mouse",n(v(O.that.__zoom,O.mouse[0]=Ft(Y,A),O.mouse[1]),O.extent,a))}function K(Y){R.on("mousemove.zoom mouseup.zoom",null),Mx(Y.view,O.moved),Mr(Y),O.event(Y).end()}}function T(j,...P){if(e.apply(this,arguments)){var A=this.__zoom,O=Ft(j.changedTouches?j.changedTouches[0]:j,this),R=A.invert(O),_=A.k*(j.shiftKey?.5:2),D=n(v(h(A,_),O,R),t.apply(this,P),a);Mr(j),i>0?Ct(this).transition().duration(i).call(S,D,O,j):Ct(this).call(g.transform,D,O,j)}}function I(j,...P){if(e.apply(this,arguments)){var A=j.touches,O=A.length,R=E(this,P,j.changedTouches.length===O).event(j),_,D,M,W;for(Li(j),D=0;D<O;++D)M=A[D],W=Ft(M,this),W=[W,this.__zoom.invert(W),M.identifier],R.touch0?!R.touch1&&R.touch0[2]!==W[2]&&(R.touch1=W,R.taps=0):(R.touch0=W,_=!0,R.taps=1+!!d);d&&(d=clearTimeout(d)),_&&(R.taps<2&&(f=W[0],d=setTimeout(function(){d=null},x)),Ro(this),R.start())}}function $(j,...P){if(this.__zooming){var A=E(this,P).event(j),O=j.changedTouches,R=O.length,_,D,M,W;for(Mr(j),_=0;_<R;++_)D=O[_],M=Ft(D,this),A.touch0&&A.touch0[2]===D.identifier?A.touch0[0]=M:A.touch1&&A.touch1[2]===D.identifier&&(A.touch1[0]=M);if(D=A.that.__zoom,A.touch1){var K=A.touch0[0],Y=A.touch0[1],X=A.touch1[0],Z=A.touch1[1],B=(B=X[0]-K[0])*B+(B=X[1]-K[1])*B,ee=(ee=Z[0]-Y[0])*ee+(ee=Z[1]-Y[1])*ee;D=h(D,Math.sqrt(B/ee)),M=[(K[0]+X[0])/2,(K[1]+X[1])/2],W=[(Y[0]+Z[0])/2,(Y[1]+Z[1])/2]}else if(A.touch0)M=A.touch0[0],W=A.touch0[1];else return;A.zoom("touch",n(v(D,M,W),A.extent,a))}}function F(j,...P){if(this.__zooming){var A=E(this,P).event(j),O=j.changedTouches,R=O.length,_,D;for(Li(j),m&&clearTimeout(m),m=setTimeout(function(){m=null},x),_=0;_<R;++_)D=O[_],A.touch0&&A.touch0[2]===D.identifier?delete A.touch0:A.touch1&&A.touch1[2]===D.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(D=Ft(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<w)){var M=Ct(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return g.wheelDelta=function(j){return arguments.length?(r=typeof j=="function"?j:co(+j),g):r},g.filter=function(j){return arguments.length?(e=typeof j=="function"?j:co(!!j),g):e},g.touchable=function(j){return arguments.length?(l=typeof j=="function"?j:co(!!j),g):l},g.extent=function(j){return arguments.length?(t=typeof j=="function"?j:co([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),g):t},g.scaleExtent=function(j){return arguments.length?(o[0]=+j[0],o[1]=+j[1],g):[o[0],o[1]]},g.translateExtent=function(j){return arguments.length?(a[0][0]=+j[0][0],a[1][0]=+j[1][0],a[0][1]=+j[0][1],a[1][1]=+j[1][1],g):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},g.constrain=function(j){return arguments.length?(n=j,g):n},g.duration=function(j){return arguments.length?(i=+j,g):i},g.interpolate=function(j){return arguments.length?(c=j,g):c},g.on=function(){var j=u.on.apply(u,arguments);return j===u?g:j},g.clickDistance=function(j){return arguments.length?(b=(j=+j)*j,g):Math.sqrt(b)},g.tapDistance=function(j){return arguments.length?(w=+j,g):w},g}const Fa=p.createContext(null),TS=Fa.Provider,Sn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Qx=Sn.error001();function he(e,t){const n=p.useContext(Fa);if(n===null)throw new Error(Qx);return Nx(n,e,t)}const Me=()=>{const e=p.useContext(Fa);if(e===null)throw new Error(Qx);return p.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},AS=e=>e.userSelectionActive?"none":"all";function id({position:e,children:t,className:n,style:r,...l}){const o=he(AS),a=`${e}`.split("-");return U.createElement("div",{className:He(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...l},t)}function PS({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:U.createElement(id,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},U.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const _S=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:l=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:i=2,children:c,className:u,...d})=>{const f=p.useRef(null),[m,x]=p.useState({x:0,y:0,width:0,height:0}),y=He(["react-flow__edge-textwrapper",u]);return p.useEffect(()=>{if(f.current){const b=f.current.getBBox();x({x:b.x,y:b.y,width:b.width,height:b.height})}},[n]),typeof n>"u"||!n?null:U.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:y,visibility:m.width?"visible":"hidden",...d},l&&U.createElement("rect",{width:m.width+2*a[0],x:-a[0],y:-a[1],height:m.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:i,ry:i}),U.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:r},n),c)};var LS=p.memo(_S);const cd=e=>({width:e.offsetWidth,height:e.offsetHeight}),mr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ud=(e={x:0,y:0},t)=>({x:mr(e.x,t[0][0],t[1][0]),y:mr(e.y,t[0][1],t[1][1])}),um=(e,t,n)=>e<t?mr(Math.abs(e-t),1,50)/50:e>n?-mr(Math.abs(e-n),1,50)/50:0,Zx=(e,t)=>{const n=um(e.x,35,t.width-35)*20,r=um(e.y,35,t.height-35)*20;return[n,r]},Jx=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},e0=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),kl=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),t0=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),dm=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),RS=(e,t)=>t0(e0(kl(e),kl(t))),Hc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},DS=e=>At(e.width)&&At(e.height)&&At(e.x)&&At(e.y),At=e=>!isNaN(e)&&isFinite(e),Te=Symbol.for("internals"),n0=["Enter"," ","Escape"],IS=(e,t)=>{},MS=e=>"nativeEvent"in e;function Gc(e){var l,o;const t=MS(e)?e.nativeEvent:e,n=((o=(l=t.composedPath)==null?void 0:l.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const s0=e=>"clientX"in e,Yn=(e,t)=>{var o,a;const n=s0(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,l=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:l-((t==null?void 0:t.top)??0)}},da=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Fl=({id:e,path:t,labelX:n,labelY:r,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:x=20})=>U.createElement(U.Fragment,null,U.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),x&&U.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),l&&At(n)&&At(r)?U.createElement(LS,{x:n,y:r,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u}):null);Fl.displayName="BaseEdge";function $r(e,t,n){return n===void 0?n:r=>{const l=t().edges.find(o=>o.id===e);l&&n(r,{...l})}}function r0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const l=Math.abs(n-e)/2,o=n<e?n+l:n-l,a=Math.abs(r-t)/2,i=r<t?r+a:r-a;return[o,i,l,a]}function l0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:l,sourceControlY:o,targetControlX:a,targetControlY:i}){const c=e*.125+l*.375+a*.375+n*.125,u=t*.125+o*.375+i*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var js;(function(e){e.Strict="strict",e.Loose="loose"})(js||(js={}));var ds;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ds||(ds={}));var El;(function(e){e.Partial="partial",e.Full="full"})(El||(El={}));var Mn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Mn||(Mn={}));var ps;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ps||(ps={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));function fm({pos:e,x1:t,y1:n,x2:r,y2:l}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+l)]}function o0({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:l,targetPosition:o=G.Top}){const[a,i]=fm({pos:n,x1:e,y1:t,x2:r,y2:l}),[c,u]=fm({pos:o,x1:r,y1:l,x2:e,y2:t}),[d,f,m,x]=l0({sourceX:e,sourceY:t,targetX:r,targetY:l,sourceControlX:a,sourceControlY:i,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${i} ${c},${u} ${r},${l}`,d,f,m,x]}const dd=p.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:l=G.Bottom,targetPosition:o=G.Top,label:a,labelStyle:i,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:y,interactionWidth:b})=>{const[w,g,h]=o0({sourceX:e,sourceY:t,sourcePosition:l,targetX:n,targetY:r,targetPosition:o});return U.createElement(Fl,{path:w,labelX:g,labelY:h,label:a,labelStyle:i,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:y,interactionWidth:b})});dd.displayName="SimpleBezierEdge";const mm={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},$S=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},hm=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function FS({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:l,offset:o}){const a=mm[t],i=mm[r],c={x:e.x+a.x*o,y:e.y+a.y*o},u={x:n.x+i.x*o,y:n.y+i.y*o},d=$S({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let x=[],y,b;const w={x:0,y:0},g={x:0,y:0},[h,v,N,S]=r0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*i[f]===-1){y=l.x??h,b=l.y??v;const L=[{x:y,y:c.y},{x:y,y:u.y}],C=[{x:c.x,y:b},{x:u.x,y:b}];a[f]===m?x=f==="x"?L:C:x=f==="x"?C:L}else{const L=[{x:c.x,y:u.y}],C=[{x:u.x,y:c.y}];if(f==="x"?x=a.x===m?C:L:x=a.y===m?L:C,t===r){const F=Math.abs(e[f]-n[f]);if(F<=o){const j=Math.min(o-1,o-F);a[f]===m?w[f]=(c[f]>e[f]?-1:1)*j:g[f]=(u[f]>n[f]?-1:1)*j}}if(t!==r){const F=f==="x"?"y":"x",j=a[f]===i[F],P=c[F]>u[F],A=c[F]<u[F];(a[f]===1&&(!j&&P||j&&A)||a[f]!==1&&(!j&&A||j&&P))&&(x=f==="x"?L:C)}const k={x:c.x+w.x,y:c.y+w.y},T={x:u.x+g.x,y:u.y+g.y},I=Math.max(Math.abs(k.x-x[0].x),Math.abs(T.x-x[0].x)),$=Math.max(Math.abs(k.y-x[0].y),Math.abs(T.y-x[0].y));I>=$?(y=(k.x+T.x)/2,b=x[0].y):(y=x[0].x,b=(k.y+T.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...x,{x:u.x+g.x,y:u.y+g.y},n],y,b,N,S]}function zS(e,t,n,r){const l=Math.min(hm(e,t)/2,hm(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+l*u},${a}Q ${o},${a} ${o},${a+l*d}`}const i=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${a+l*c}Q ${o},${a} ${o+l*i},${a}`}function Yc({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:l,targetPosition:o=G.Top,borderRadius:a=5,centerX:i,centerY:c,offset:u=20}){const[d,f,m,x,y]=FS({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:l},targetPosition:o,center:{x:i,y:c},offset:u});return[d.reduce((w,g,h)=>{let v="";return h>0&&h<d.length-1?v=zS(d[h-1],g,d[h+1],a):v=`${h===0?"M":"L"}${g.x} ${g.y}`,w+=v,w},""),f,m,x,y]}const za=p.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=G.Bottom,targetPosition:m=G.Top,markerEnd:x,markerStart:y,pathOptions:b,interactionWidth:w})=>{const[g,h,v]=Yc({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:m,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset});return U.createElement(Fl,{path:g,labelX:h,labelY:v,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:x,markerStart:y,interactionWidth:w})});za.displayName="SmoothStepEdge";const fd=p.memo(e=>{var t;return U.createElement(za,{...e,pathOptions:p.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});fd.displayName="StepEdge";function OS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[l,o,a,i]=r0({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,l,o,a,i]}const md=p.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:x})=>{const[y,b,w]=OS({sourceX:e,sourceY:t,targetX:n,targetY:r});return U.createElement(Fl,{path:y,labelX:b,labelY:w,label:l,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:x})});md.displayName="StraightEdge";function uo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function pm({pos:e,x1:t,y1:n,x2:r,y2:l,c:o}){switch(e){case G.Left:return[t-uo(t-r,o),n];case G.Right:return[t+uo(r-t,o),n];case G.Top:return[t,n-uo(n-l,o)];case G.Bottom:return[t,n+uo(l-n,o)]}}function a0({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:l,targetPosition:o=G.Top,curvature:a=.25}){const[i,c]=pm({pos:n,x1:e,y1:t,x2:r,y2:l,c:a}),[u,d]=pm({pos:o,x1:r,y1:l,x2:e,y2:t,c:a}),[f,m,x,y]=l0({sourceX:e,sourceY:t,targetX:r,targetY:l,sourceControlX:i,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${i},${c} ${u},${d} ${r},${l}`,f,m,x,y]}const fa=p.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:l=G.Bottom,targetPosition:o=G.Top,label:a,labelStyle:i,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:y,pathOptions:b,interactionWidth:w})=>{const[g,h,v]=a0({sourceX:e,sourceY:t,sourcePosition:l,targetX:n,targetY:r,targetPosition:o,curvature:b==null?void 0:b.curvature});return U.createElement(Fl,{path:g,labelX:h,labelY:v,label:a,labelStyle:i,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:y,interactionWidth:w})});fa.displayName="BezierEdge";const hd=p.createContext(null),US=hd.Provider;hd.Consumer;const WS=()=>p.useContext(hd),BS=e=>"id"in e&&"source"in e&&"target"in e,VS=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Kc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,HS=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),i0=(e,t)=>{if(!e.source||!e.target)return t;let n;return BS(e)?n={...e}:n={...e,id:VS(e)},HS(n,t)?t:t.concat(n)},Xc=({x:e,y:t},[n,r,l],o,[a,i])=>{const c={x:(e-n)/l,y:(t-r)/l};return o?{x:a*Math.round(c.x/a),y:i*Math.round(c.y/i)}:c},c0=({x:e,y:t},[n,r,l])=>({x:e*l+n,y:t*l+r}),xs=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],l={x:e.position.x-n,y:e.position.y-r};return{...l,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:l}},Oa=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,l)=>{const{x:o,y:a}=xs(l,t).positionAbsolute;return e0(r,kl({x:o,y:a,width:l.width||0,height:l.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return t0(n)},u0=(e,t,[n,r,l]=[0,0,1],o=!1,a=!1,i=[0,0])=>{const c={x:(t.x-n)/l,y:(t.y-r)/l,width:t.width/l,height:t.height/l},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:x=!0,hidden:y=!1}=d;if(a&&!x||y)return!1;const{positionAbsolute:b}=xs(d,i),w={x:b.x,y:b.y,width:f||0,height:m||0},g=Hc(c,w),h=typeof f>"u"||typeof m>"u"||f===null||m===null,v=o&&g>0,N=(f||0)*(m||0);(h||v||g>=N||d.dragging)&&u.push(d)}),u},d0=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},f0=(e,t,n,r,l,o=.1)=>{const a=t/(e.width*(1+o)),i=n/(e.height*(1+o)),c=Math.min(a,i),u=mr(c,r,l),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,x=n/2-f*u;return{x:m,y:x,zoom:u}},os=(e,t=0)=>e.transition().duration(t);function xm(e,t,n,r){return(t[n]||[]).reduce((l,o)=>{var a,i;return`${e.id}-${o.id}-${n}`!==r&&l.push({id:o.id||null,type:n,nodeId:e.id,x:(((a=e.positionAbsolute)==null?void 0:a.x)??0)+o.x+o.width/2,y:(((i=e.positionAbsolute)==null?void 0:i.y)??0)+o.y+o.height/2}),l},[])}function GS(e,t,n,r,l,o){const{x:a,y:i}=Yn(e),u=t.elementsFromPoint(a,i).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const b=pd(void 0,u),w=u.getAttribute("data-handleid"),g=o({nodeId:y,id:w,type:b});if(g){const h=l.find(v=>v.nodeId===y&&v.type===b&&v.id===w);return{handle:{id:w,type:b,nodeId:y,x:(h==null?void 0:h.x)||n.x,y:(h==null?void 0:h.y)||n.y},validHandleResult:g}}}}let d=[],f=1/0;if(l.forEach(y=>{const b=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(b<=r){const w=o(y);b<=f&&(b<f?d=[{handle:y,validHandleResult:w}]:b===f&&d.push({handle:y,validHandleResult:w}),f=b)}}),!d.length)return{handle:null,validHandleResult:m0()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:y})=>y.isValid),x=d.some(({handle:y})=>y.type==="target");return d.find(({handle:y,validHandleResult:b})=>x?y.type==="target":m?b.isValid:!0)||d[0]}const YS={source:null,target:null,sourceHandle:null,targetHandle:null},m0=()=>({handleDomNode:null,isValid:!1,connection:YS,endHandle:null});function h0(e,t,n,r,l,o,a){const i=l==="target",c=a.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...m0(),handleDomNode:c};if(c){const d=pd(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),x=c.classList.contains("connectable"),y=c.classList.contains("connectableend"),b={source:i?f:n,sourceHandle:i?m:r,target:i?n:f,targetHandle:i?r:m};u.connection=b,x&&y&&(t===js.Strict?i&&d==="source"||!i&&d==="target":f!==n||m!==r)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=o(b))}return u}function KS({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((l,o)=>{if(o[Te]){const{handleBounds:a}=o[Te];let i=[],c=[];a&&(i=xm(o,a,"source",`${t}-${n}-${r}`),c=xm(o,a,"target",`${t}-${n}-${r}`)),l.push(...i,...c)}return l},[])}function pd(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ri(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function XS(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function p0({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:l,getState:o,setState:a,isValidConnection:i,edgeUpdaterType:c,onReconnectEnd:u}){const d=Jx(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:x,connectionRadius:y,onConnectStart:b,panBy:w,getNodes:g,cancelConnection:h}=o();let v=0,N;const{x:S,y:E}=Yn(e),L=d==null?void 0:d.elementFromPoint(S,E),C=pd(c,L),k=m==null?void 0:m.getBoundingClientRect();if(!k||!C)return;let T,I=Yn(e,k),$=!1,F=null,j=!1,P=null;const A=KS({nodes:g(),nodeId:n,handleId:t,handleType:C}),O=()=>{if(!x)return;const[D,M]=Zx(I,k);w({x:D,y:M}),v=requestAnimationFrame(O)};a({connectionPosition:I,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:t,type:C},connectionEndHandle:null}),b==null||b(e,{nodeId:n,handleId:t,handleType:C});function R(D){const{transform:M}=o();I=Yn(D,k);const{handle:W,validHandleResult:K}=GS(D,d,Xc(I,M,!1,[1,1]),y,A,Y=>h0(Y,f,n,t,l?"target":"source",i,d));if(N=W,$||(O(),$=!0),P=K.handleDomNode,F=K.connection,j=K.isValid,a({connectionPosition:N&&j?c0({x:N.x,y:N.y},M):I,connectionStatus:XS(!!N,j),connectionEndHandle:K.endHandle}),!N&&!j&&!P)return Ri(T);F.source!==F.target&&P&&(Ri(T),T=P,P.classList.add("connecting","react-flow__handle-connecting"),P.classList.toggle("valid",j),P.classList.toggle("react-flow__handle-valid",j))}function _(D){var M,W;(N||P)&&F&&j&&(r==null||r(F)),(W=(M=o()).onConnectEnd)==null||W.call(M,D),c&&(u==null||u(D)),Ri(T),h(),cancelAnimationFrame(v),$=!1,j=!1,F=null,P=null,d.removeEventListener("mousemove",R),d.removeEventListener("mouseup",_),d.removeEventListener("touchmove",R),d.removeEventListener("touchend",_)}d.addEventListener("mousemove",R),d.addEventListener("mouseup",_),d.addEventListener("touchmove",R),d.addEventListener("touchend",_)}const gm=()=>!0,qS=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),QS=(e,t,n)=>r=>{const{connectionStartHandle:l,connectionEndHandle:o,connectionClickStartHandle:a}=r;return{connecting:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.handleId)===t&&(l==null?void 0:l.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n}},x0=p.forwardRef(({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:l=!0,isConnectableEnd:o=!0,id:a,onConnect:i,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},x)=>{var k,T;const y=a||null,b=e==="target",w=Me(),g=WS(),{connectOnClick:h,noPanClassName:v}=he(qS,Ue),{connecting:N,clickConnecting:S}=he(QS(g,y,e),Ue);g||(T=(k=w.getState()).onError)==null||T.call(k,"010",Sn.error010());const E=I=>{const{defaultEdgeOptions:$,onConnect:F,hasDefaultEdges:j}=w.getState(),P={...$,...I};if(j){const{edges:A,setEdges:O}=w.getState();O(i0(P,A))}F==null||F(P),i==null||i(P)},L=I=>{if(!g)return;const $=s0(I);l&&($&&I.button===0||!$)&&p0({event:I,handleId:y,nodeId:g,onConnect:E,isTarget:b,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||gm}),$?d==null||d(I):f==null||f(I)},C=I=>{const{onClickConnectStart:$,onClickConnectEnd:F,connectionClickStartHandle:j,connectionMode:P,isValidConnection:A}=w.getState();if(!g||!j&&!l)return;if(!j){$==null||$(I,{nodeId:g,handleId:y,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:y}});return}const O=Jx(I.target),R=n||A||gm,{connection:_,isValid:D}=h0({nodeId:g,id:y,type:e},P,j.nodeId,j.handleId||null,j.type,R,O);D&&E(_),F==null||F(I),w.setState({connectionClickStartHandle:null})};return U.createElement("div",{"data-handleid":y,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${y}-${e}`,className:He(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,u,{source:!b,target:b,connectable:r,connectablestart:l,connectableend:o,connecting:S,connectionindicator:r&&(l&&!N||o&&N)}]),onMouseDown:L,onTouchStart:L,onClick:h?C:void 0,ref:x,...m},c)});x0.displayName="Handle";var Cl=p.memo(x0);const g0=({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom})=>U.createElement(U.Fragment,null,U.createElement(Cl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,U.createElement(Cl,{type:"source",position:r,isConnectable:t}));g0.displayName="DefaultNode";var qc=p.memo(g0);const y0=({data:e,isConnectable:t,sourcePosition:n=G.Bottom})=>U.createElement(U.Fragment,null,e==null?void 0:e.label,U.createElement(Cl,{type:"source",position:n,isConnectable:t}));y0.displayName="InputNode";var v0=p.memo(y0);const b0=({data:e,isConnectable:t,targetPosition:n=G.Top})=>U.createElement(U.Fragment,null,U.createElement(Cl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);b0.displayName="OutputNode";var w0=p.memo(b0);const xd=()=>null;xd.displayName="GroupNode";const ZS=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),fo=e=>e.id;function JS(e,t){return Ue(e.selectedNodes.map(fo),t.selectedNodes.map(fo))&&Ue(e.selectedEdges.map(fo),t.selectedEdges.map(fo))}const N0=p.memo(({onSelectionChange:e})=>{const t=Me(),{selectedNodes:n,selectedEdges:r}=he(ZS,JS);return p.useEffect(()=>{const l={nodes:n,edges:r};e==null||e(l),t.getState().onSelectionChange.forEach(o=>o(l))},[n,r,e]),null});N0.displayName="SelectionListener";const ek=e=>!!e.onSelectionChange;function tk({onSelectionChange:e}){const t=he(ek);return e||t?U.createElement(N0,{onSelectionChange:e}):null}const nk=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ps(e,t){p.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ne(e,t,n){p.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const sk=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:l,onConnectStart:o,onConnectEnd:a,onClickConnectStart:i,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:x,elevateNodesOnSelect:y,minZoom:b,maxZoom:w,nodeExtent:g,onNodesChange:h,onEdgesChange:v,elementsSelectable:N,connectionMode:S,snapGrid:E,snapToGrid:L,translateExtent:C,connectOnClick:k,defaultEdgeOptions:T,fitView:I,fitViewOptions:$,onNodesDelete:F,onEdgesDelete:j,onNodeDrag:P,onNodeDragStart:A,onNodeDragStop:O,onSelectionDrag:R,onSelectionDragStart:_,onSelectionDragStop:D,noPanClassName:M,nodeOrigin:W,rfId:K,autoPanOnConnect:Y,autoPanOnNodeDrag:X,onError:Z,connectionRadius:B,isValidConnection:ee,nodeDragThreshold:oe})=>{const{setNodes:te,setEdges:Pe,setDefaultNodesAndEdges:ge,setMinZoom:$e,setMaxZoom:Le,setTranslateExtent:ye,setNodeExtent:Ge,reset:ce}=he(nk,Ue),Q=Me();return p.useEffect(()=>{const Fe=r==null?void 0:r.map(St=>({...St,...T}));return ge(n,Fe),()=>{ce()}},[]),ne("defaultEdgeOptions",T,Q.setState),ne("connectionMode",S,Q.setState),ne("onConnect",l,Q.setState),ne("onConnectStart",o,Q.setState),ne("onConnectEnd",a,Q.setState),ne("onClickConnectStart",i,Q.setState),ne("onClickConnectEnd",c,Q.setState),ne("nodesDraggable",u,Q.setState),ne("nodesConnectable",d,Q.setState),ne("nodesFocusable",f,Q.setState),ne("edgesFocusable",m,Q.setState),ne("edgesUpdatable",x,Q.setState),ne("elementsSelectable",N,Q.setState),ne("elevateNodesOnSelect",y,Q.setState),ne("snapToGrid",L,Q.setState),ne("snapGrid",E,Q.setState),ne("onNodesChange",h,Q.setState),ne("onEdgesChange",v,Q.setState),ne("connectOnClick",k,Q.setState),ne("fitViewOnInit",I,Q.setState),ne("fitViewOnInitOptions",$,Q.setState),ne("onNodesDelete",F,Q.setState),ne("onEdgesDelete",j,Q.setState),ne("onNodeDrag",P,Q.setState),ne("onNodeDragStart",A,Q.setState),ne("onNodeDragStop",O,Q.setState),ne("onSelectionDrag",R,Q.setState),ne("onSelectionDragStart",_,Q.setState),ne("onSelectionDragStop",D,Q.setState),ne("noPanClassName",M,Q.setState),ne("nodeOrigin",W,Q.setState),ne("rfId",K,Q.setState),ne("autoPanOnConnect",Y,Q.setState),ne("autoPanOnNodeDrag",X,Q.setState),ne("onError",Z,Q.setState),ne("connectionRadius",B,Q.setState),ne("isValidConnection",ee,Q.setState),ne("nodeDragThreshold",oe,Q.setState),Ps(e,te),Ps(t,Pe),Ps(b,$e),Ps(w,Le),Ps(C,ye),Ps(g,Ge),null},ym={display:"none"},rk={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},j0="react-flow__node-desc",S0="react-flow__edge-desc",lk="react-flow__aria-live",ok=e=>e.ariaLiveMessage;function ak({rfId:e}){const t=he(ok);return U.createElement("div",{id:`${lk}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rk},t)}function ik({rfId:e,disableKeyboardA11y:t}){return U.createElement(U.Fragment,null,U.createElement("div",{id:`${j0}-${e}`,style:ym},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),U.createElement("div",{id:`${S0}-${e}`,style:ym},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&U.createElement(ak,{rfId:e}))}var Tl=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=p.useState(!1),l=p.useRef(!1),o=p.useRef(new Set([])),[a,i]=p.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return p.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=x=>{if(l.current=x.ctrlKey||x.metaKey||x.shiftKey,(!l.current||l.current&&!t.actInsideInputWithModifier)&&Gc(x))return!1;const b=bm(x.code,i);o.current.add(x[b]),vm(a,o.current,!1)&&(x.preventDefault(),r(!0))},f=x=>{if((!l.current||l.current&&!t.actInsideInputWithModifier)&&Gc(x))return!1;const b=bm(x.code,i);vm(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(x[b]),x.key==="Meta"&&o.current.clear(),l.current=!1},m=()=>{o.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,r]),n};function vm(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(l=>t.has(l)))}function bm(e,t){return t.includes(e)?"code":"key"}function k0(e,t,n,r){var i,c;const l=e.parentNode||e.parentId;if(!l)return n;const o=t.get(l),a=xs(o,r);return k0(o,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((i=o[Te])==null?void 0:i.z)??0)>(n.z??0)?((c=o[Te])==null?void 0:c.z)??0:n.z??0},r)}function E0(e,t,n){e.forEach(r=>{var o;const l=r.parentNode||r.parentId;if(l&&!e.has(l))throw new Error(`Parent node ${l} not found`);if(l||n!=null&&n[r.id]){const{x:a,y:i,z:c}=k0(r,e,{...r.position,z:((o=r[Te])==null?void 0:o.z)??0},t);r.positionAbsolute={x:a,y:i},r[Te].z=c,n!=null&&n[r.id]&&(r[Te].isParent=!0)}})}function Di(e,t,n,r){const l=new Map,o={},a=r?1e3:0;return e.forEach(i=>{var x;const c=(At(i.zIndex)?i.zIndex:0)+(i.selected?a:0),u=t.get(i.id),d={...i,positionAbsolute:{x:i.position.x,y:i.position.y}},f=i.parentNode||i.parentId;f&&(o[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==i.type;Object.defineProperty(d,Te,{enumerable:!1,value:{handleBounds:m||(x=u==null?void 0:u[Te])==null?void 0:x.handleBounds,z:c}}),l.set(i.id,d)}),E0(l,n,o),l}function C0(e,t={}){const{getNodes:n,width:r,height:l,minZoom:o,maxZoom:a,d3Zoom:i,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(i&&c&&(m||!t.initial)){const y=n().filter(w=>{var h;const g=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(h=t.nodes)!=null&&h.length?g&&t.nodes.some(v=>v.id===w.id):g}),b=y.every(w=>w.width&&w.height);if(y.length>0&&b){const w=Oa(y,f),{x:g,y:h,zoom:v}=f0(w,r,l,t.minZoom??o,t.maxZoom??a,t.padding??.1),N=gn.translate(g,h).scale(v);return typeof t.duration=="number"&&t.duration>0?i.transform(os(c,t.duration),N):i.transform(c,N),!0}}return!1}function ck(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Te]:r[Te],selected:n.selected})}),new Map(t)}function uk(e,t){return t.map(n=>{const r=e.find(l=>l.id===n.id);return r&&(n.selected=r.selected),n})}function mo({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:l,edges:o,onNodesChange:a,onEdgesChange:i,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:ck(e,l)}),a==null||a(e)),t!=null&&t.length&&(u&&r({edges:uk(t,o)}),i==null||i(t))}const _s=()=>{},dk={zoomIn:_s,zoomOut:_s,zoomTo:_s,getZoom:()=>1,setViewport:_s,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:_s,fitBounds:_s,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},fk=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),mk=()=>{const e=Me(),{d3Zoom:t,d3Selection:n}=he(fk,Ue);return p.useMemo(()=>n&&t?{zoomIn:l=>t.scaleBy(os(n,l==null?void 0:l.duration),1.2),zoomOut:l=>t.scaleBy(os(n,l==null?void 0:l.duration),1/1.2),zoomTo:(l,o)=>t.scaleTo(os(n,o==null?void 0:o.duration),l),getZoom:()=>e.getState().transform[2],setViewport:(l,o)=>{const[a,i,c]=e.getState().transform,u=gn.translate(l.x??a,l.y??i).scale(l.zoom??c);t.transform(os(n,o==null?void 0:o.duration),u)},getViewport:()=>{const[l,o,a]=e.getState().transform;return{x:l,y:o,zoom:a}},fitView:l=>C0(e.getState,l),setCenter:(l,o,a)=>{const{width:i,height:c,maxZoom:u}=e.getState(),d=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:u,f=i/2-l*d,m=c/2-o*d,x=gn.translate(f,m).scale(d);t.transform(os(n,a==null?void 0:a.duration),x)},fitBounds:(l,o)=>{const{width:a,height:i,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=f0(l,a,i,c,u,(o==null?void 0:o.padding)??.1),x=gn.translate(d,f).scale(m);t.transform(os(n,o==null?void 0:o.duration),x)},project:l=>{const{transform:o,snapToGrid:a,snapGrid:i}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Xc(l,o,a,i)},screenToFlowPosition:l=>{const{transform:o,snapToGrid:a,snapGrid:i,domNode:c}=e.getState();if(!c)return l;const{x:u,y:d}=c.getBoundingClientRect(),f={x:l.x-u,y:l.y-d};return Xc(f,o,a,i)},flowToScreenPosition:l=>{const{transform:o,domNode:a}=e.getState();if(!a)return l;const{x:i,y:c}=a.getBoundingClientRect(),u=c0(l,o);return{x:u.x+i,y:u.y+c}},viewportInitialized:!0}:dk,[t,n])};function gd(){const e=mk(),t=Me(),n=p.useCallback(()=>t.getState().getNodes().map(b=>({...b})),[]),r=p.useCallback(b=>t.getState().nodeInternals.get(b),[]),l=p.useCallback(()=>{const{edges:b=[]}=t.getState();return b.map(w=>({...w}))},[]),o=p.useCallback(b=>{const{edges:w=[]}=t.getState();return w.find(g=>g.id===b)},[]),a=p.useCallback(b=>{const{getNodes:w,setNodes:g,hasDefaultNodes:h,onNodesChange:v}=t.getState(),N=w(),S=typeof b=="function"?b(N):b;if(h)g(S);else if(v){const E=S.length===0?N.map(L=>({type:"remove",id:L.id})):S.map(L=>({item:L,type:"reset"}));v(E)}},[]),i=p.useCallback(b=>{const{edges:w=[],setEdges:g,hasDefaultEdges:h,onEdgesChange:v}=t.getState(),N=typeof b=="function"?b(w):b;if(h)g(N);else if(v){const S=N.length===0?w.map(E=>({type:"remove",id:E.id})):N.map(E=>({item:E,type:"reset"}));v(S)}},[]),c=p.useCallback(b=>{const w=Array.isArray(b)?b:[b],{getNodes:g,setNodes:h,hasDefaultNodes:v,onNodesChange:N}=t.getState();if(v){const E=[...g(),...w];h(E)}else if(N){const S=w.map(E=>({item:E,type:"add"}));N(S)}},[]),u=p.useCallback(b=>{const w=Array.isArray(b)?b:[b],{edges:g=[],setEdges:h,hasDefaultEdges:v,onEdgesChange:N}=t.getState();if(v)h([...g,...w]);else if(N){const S=w.map(E=>({item:E,type:"add"}));N(S)}},[]),d=p.useCallback(()=>{const{getNodes:b,edges:w=[],transform:g}=t.getState(),[h,v,N]=g;return{nodes:b().map(S=>({...S})),edges:w.map(S=>({...S})),viewport:{x:h,y:v,zoom:N}}},[]),f=p.useCallback(({nodes:b,edges:w})=>{const{nodeInternals:g,getNodes:h,edges:v,hasDefaultNodes:N,hasDefaultEdges:S,onNodesDelete:E,onEdgesDelete:L,onNodesChange:C,onEdgesChange:k}=t.getState(),T=(b||[]).map(P=>P.id),I=(w||[]).map(P=>P.id),$=h().reduce((P,A)=>{const O=A.parentNode||A.parentId,R=!T.includes(A.id)&&O&&P.find(D=>D.id===O);return(typeof A.deletable=="boolean"?A.deletable:!0)&&(T.includes(A.id)||R)&&P.push(A),P},[]),F=v.filter(P=>typeof P.deletable=="boolean"?P.deletable:!0),j=F.filter(P=>I.includes(P.id));if($||j){const P=d0($,F),A=[...j,...P],O=A.reduce((R,_)=>(R.includes(_.id)||R.push(_.id),R),[]);if((S||N)&&(S&&t.setState({edges:v.filter(R=>!O.includes(R.id))}),N&&($.forEach(R=>{g.delete(R.id)}),t.setState({nodeInternals:new Map(g)}))),O.length>0&&(L==null||L(A),k&&k(O.map(R=>({id:R,type:"remove"})))),$.length>0&&(E==null||E($),C)){const R=$.map(_=>({id:_.id,type:"remove"}));C(R)}}},[]),m=p.useCallback(b=>{const w=DS(b),g=w?null:t.getState().nodeInternals.get(b.id);return!w&&!g?[null,null,w]:[w?b:dm(g),g,w]},[]),x=p.useCallback((b,w=!0,g)=>{const[h,v,N]=m(b);return h?(g||t.getState().getNodes()).filter(S=>{if(!N&&(S.id===v.id||!S.positionAbsolute))return!1;const E=dm(S),L=Hc(E,h);return w&&L>0||L>=h.width*h.height}):[]},[]),y=p.useCallback((b,w,g=!0)=>{const[h]=m(b);if(!h)return!1;const v=Hc(h,w);return g&&v>0||v>=h.width*h.height},[]);return p.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:l,getEdge:o,setNodes:a,setEdges:i,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:x,isNodeIntersecting:y}),[e,n,r,l,o,a,i,c,u,d,f,x,y])}const hk={actInsideInputWithModifier:!1};var pk=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Me(),{deleteElements:r}=gd(),l=Tl(e,hk),o=Tl(t);p.useEffect(()=>{if(l){const{edges:a,getNodes:i}=n.getState(),c=i().filter(d=>d.selected),u=a.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[l]),p.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function xk(e){const t=Me();p.useEffect(()=>{let n;const r=()=>{var o,a;if(!e.current)return;const l=cd(e.current);(l.height===0||l.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",Sn.error004())),t.setState({width:l.width||500,height:l.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const yd={position:"absolute",width:"100%",height:"100%",top:0,left:0},gk=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ho=e=>({x:e.x,y:e.y,zoom:e.k}),Ls=(e,t)=>e.target.closest(`.${t}`),wm=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Nm=e=>{const t=e.ctrlKey&&da()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},yk=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),vk=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:l=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:i=.5,panOnScrollMode:c=ds.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:x,minZoom:y,maxZoom:b,zoomActivationKeyCode:w,preventScrolling:g=!0,children:h,noWheelClassName:v,noPanClassName:N})=>{const S=p.useRef(),E=Me(),L=p.useRef(!1),C=p.useRef(!1),k=p.useRef(null),T=p.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:$,d3ZoomHandler:F,userSelectionActive:j}=he(yk,Ue),P=Tl(w),A=p.useRef(0),O=p.useRef(!1),R=p.useRef();return xk(k),p.useEffect(()=>{if(k.current){const _=k.current.getBoundingClientRect(),D=qx().scaleExtent([y,b]).translateExtent(x),M=Ct(k.current).call(D),W=gn.translate(m.x,m.y).scale(mr(m.zoom,y,b)),K=[[0,0],[_.width,_.height]],Y=D.constrain()(W,K,x);D.transform(M,Y),D.wheelDelta(Nm),E.setState({d3Zoom:D,d3Selection:M,d3ZoomHandler:M.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:k.current.closest(".react-flow")})}},[]),p.useEffect(()=>{$&&I&&(a&&!P&&!j?$.on("wheel.zoom",_=>{if(Ls(_,v))return!1;_.preventDefault(),_.stopImmediatePropagation();const D=$.property("__zoom").k||1;if(_.ctrlKey&&o){const ee=Ft(_),oe=Nm(_),te=D*Math.pow(2,oe);I.scaleTo($,te,ee,_);return}const M=_.deltaMode===1?20:1;let W=c===ds.Vertical?0:_.deltaX*M,K=c===ds.Horizontal?0:_.deltaY*M;!da()&&_.shiftKey&&c!==ds.Vertical&&(W=_.deltaY*M,K=0),I.translateBy($,-(W/D)*i,-(K/D)*i,{internal:!0});const Y=ho($.property("__zoom")),{onViewportChangeStart:X,onViewportChange:Z,onViewportChangeEnd:B}=E.getState();clearTimeout(R.current),O.current||(O.current=!0,t==null||t(_,Y),X==null||X(Y)),O.current&&(e==null||e(_,Y),Z==null||Z(Y),R.current=setTimeout(()=>{n==null||n(_,Y),B==null||B(Y),O.current=!1},150))},{passive:!1}):typeof F<"u"&&$.on("wheel.zoom",function(_,D){if(!g&&_.type==="wheel"&&!_.ctrlKey||Ls(_,v))return null;_.preventDefault(),F.call(this,_,D)},{passive:!1}))},[j,a,c,$,I,F,P,o,g,v,t,e,n]),p.useEffect(()=>{I&&I.on("start",_=>{var W,K;if(!_.sourceEvent||_.sourceEvent.internal)return null;A.current=(W=_.sourceEvent)==null?void 0:W.button;const{onViewportChangeStart:D}=E.getState(),M=ho(_.transform);L.current=!0,T.current=M,((K=_.sourceEvent)==null?void 0:K.type)==="mousedown"&&E.setState({paneDragging:!0}),D==null||D(M),t==null||t(_.sourceEvent,M)})},[I,t]),p.useEffect(()=>{I&&(j&&!L.current?I.on("zoom",null):j||I.on("zoom",_=>{var M;const{onViewportChange:D}=E.getState();if(E.setState({transform:[_.transform.x,_.transform.y,_.transform.k]}),C.current=!!(r&&wm(f,A.current??0)),(e||D)&&!((M=_.sourceEvent)!=null&&M.internal)){const W=ho(_.transform);D==null||D(W),e==null||e(_.sourceEvent,W)}}))},[j,I,e,f,r]),p.useEffect(()=>{I&&I.on("end",_=>{if(!_.sourceEvent||_.sourceEvent.internal)return null;const{onViewportChangeEnd:D}=E.getState();if(L.current=!1,E.setState({paneDragging:!1}),r&&wm(f,A.current??0)&&!C.current&&r(_.sourceEvent),C.current=!1,(n||D)&&gk(T.current,_.transform)){const M=ho(_.transform);T.current=M,clearTimeout(S.current),S.current=setTimeout(()=>{D==null||D(M),n==null||n(_.sourceEvent,M)},a?150:0)}})},[I,a,f,n,r]),p.useEffect(()=>{I&&I.filter(_=>{const D=P||l,M=o&&_.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&_.button===1&&_.type==="mousedown"&&(Ls(_,"react-flow__node")||Ls(_,"react-flow__edge")))return!0;if(!f&&!D&&!a&&!u&&!o||j||!u&&_.type==="dblclick"||Ls(_,v)&&_.type==="wheel"||Ls(_,N)&&(_.type!=="wheel"||a&&_.type==="wheel"&&!P)||!o&&_.ctrlKey&&_.type==="wheel"||!D&&!a&&!M&&_.type==="wheel"||!f&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(f)&&!f.includes(_.button)&&_.type==="mousedown")return!1;const W=Array.isArray(f)&&f.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||_.type==="wheel")&&W})},[j,I,l,o,a,u,f,d,P]),U.createElement("div",{className:"react-flow__renderer",ref:k,style:yd},h)},bk=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function wk(){const{userSelectionActive:e,userSelectionRect:t}=he(bk,Ue);return e&&t?U.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function jm(e,t){const n=t.parentNode||t.parentId,r=e.find(l=>l.id===n);if(r){const l=t.position.x+t.width-r.width,o=t.position.y+t.height-r.height;if(l>0||o>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,l>0&&(r.style.width+=l),o>0&&(r.style.height+=o),t.position.x<0){const a=Math.abs(t.position.x);r.position.x=r.position.x-a,r.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);r.position.y=r.position.y-a,r.style.height+=a,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function T0(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,l)=>{const o=e.filter(i=>i.id===l.id);if(o.length===0)return r.push(l),r;const a={...l};for(const i of o)if(i)switch(i.type){case"select":{a.selected=i.selected;break}case"position":{typeof i.position<"u"&&(a.position=i.position),typeof i.positionAbsolute<"u"&&(a.positionAbsolute=i.positionAbsolute),typeof i.dragging<"u"&&(a.dragging=i.dragging),a.expandParent&&jm(r,a);break}case"dimensions":{typeof i.dimensions<"u"&&(a.width=i.dimensions.width,a.height=i.dimensions.height),typeof i.updateStyle<"u"&&(a.style={...a.style||{},...i.dimensions}),typeof i.resizing=="boolean"&&(a.resizing=i.resizing),a.expandParent&&jm(r,a);break}case"remove":return r}return r.push(a),r},n)}function A0(e,t){return T0(e,t)}function Nk(e,t){return T0(e,t)}const Rn=(e,t)=>({id:e,type:"select",selected:t});function Ys(e,t){return e.reduce((n,r)=>{const l=t.includes(r.id);return!r.selected&&l?(r.selected=!0,n.push(Rn(r.id,!0))):r.selected&&!l&&(r.selected=!1,n.push(Rn(r.id,!1))),n},[])}const Ii=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},jk=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),P0=p.memo(({isSelecting:e,selectionMode:t=El.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:l,onPaneClick:o,onPaneContextMenu:a,onPaneScroll:i,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=p.useRef(null),x=Me(),y=p.useRef(0),b=p.useRef(0),w=p.useRef(),{userSelectionActive:g,elementsSelectable:h,dragging:v}=he(jk,Ue),N=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,b.current=0},S=F=>{o==null||o(F),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},E=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}a==null||a(F)},L=i?F=>i(F):void 0,C=F=>{const{resetSelectedElements:j,domNode:P}=x.getState();if(w.current=P==null?void 0:P.getBoundingClientRect(),!h||!e||F.button!==0||F.target!==m.current||!w.current)return;const{x:A,y:O}=Yn(F,w.current);j(),x.setState({userSelectionRect:{width:0,height:0,startX:A,startY:O,x:A,y:O}}),r==null||r(F)},k=F=>{const{userSelectionRect:j,nodeInternals:P,edges:A,transform:O,onNodesChange:R,onEdgesChange:_,nodeOrigin:D,getNodes:M}=x.getState();if(!e||!w.current||!j)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const W=Yn(F,w.current),K=j.startX??0,Y=j.startY??0,X={...j,x:W.x<K?W.x:K,y:W.y<Y?W.y:Y,width:Math.abs(W.x-K),height:Math.abs(W.y-Y)},Z=M(),B=u0(P,X,O,t===El.Partial,!0,D),ee=d0(B,A).map(te=>te.id),oe=B.map(te=>te.id);if(y.current!==oe.length){y.current=oe.length;const te=Ys(Z,oe);te.length&&(R==null||R(te))}if(b.current!==ee.length){b.current=ee.length;const te=Ys(A,ee);te.length&&(_==null||_(te))}x.setState({userSelectionRect:X})},T=F=>{if(F.button!==0)return;const{userSelectionRect:j}=x.getState();!g&&j&&F.target===m.current&&(S==null||S(F)),x.setState({nodesSelectionActive:y.current>0}),N(),l==null||l(F)},I=F=>{g&&(x.setState({nodesSelectionActive:y.current>0}),l==null||l(F)),N()},$=h&&(e||g);return U.createElement("div",{className:He(["react-flow__pane",{dragging:v,selection:e}]),onClick:$?void 0:Ii(S,m),onContextMenu:Ii(E,m),onWheel:Ii(L,m),onMouseEnter:$?void 0:c,onMouseDown:$?C:void 0,onMouseMove:$?k:u,onMouseUp:$?T:void 0,onMouseLeave:$?I:d,ref:m,style:yd},f,U.createElement(wk,null))});P0.displayName="Pane";function _0(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:_0(r,t):!1}function Sm(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Sk(e,t,n,r){return Array.from(e.values()).filter(l=>(l.selected||l.id===r)&&(!l.parentNode||l.parentId||!_0(l,e))&&(l.draggable||t&&typeof l.draggable>"u")).map(l=>{var o,a;return{id:l.id,position:l.position||{x:0,y:0},positionAbsolute:l.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=l.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((a=l.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:l.extent,parentNode:l.parentNode||l.parentId,parentId:l.parentNode||l.parentId,width:l.width,height:l.height,expandParent:l.expandParent}})}function kk(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function L0(e,t,n,r,l=[0,0],o){const a=kk(e,e.extent||r);let i=a;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:x}=xs(f,l).positionAbsolute;i=f&&At(m)&&At(x)&&At(f.width)&&At(f.height)?[[m+e.width*l[0],x+e.height*l[1]],[m+f.width-e.width+e.width*l[0],x+f.height-e.height+e.height*l[1]]]:i}else o==null||o("005",Sn.error005()),i=a;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:x}=xs(f,l).positionAbsolute;i=[[e.extent[0][0]+m,e.extent[0][1]+x],[e.extent[1][0]+m,e.extent[1][1]+x]]}let u={x:0,y:0};if(c){const f=n.get(c);u=xs(f,l).positionAbsolute}const d=i&&i!=="parent"?ud(t,i):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function Mi({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(l=>({...n.get(l.id),position:l.position,positionAbsolute:l.positionAbsolute}));return[e?r.find(l=>l.id===e):r[0],r]}const km=(e,t,n,r)=>{const l=t.querySelectorAll(e);if(!l||!l.length)return null;const o=Array.from(l),a=t.getBoundingClientRect(),i={x:a.width*r[0],y:a.height*r[1]};return o.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-a.left-i.x)/n,y:(u.top-a.top-i.y)/n,...cd(c)}})};function Fr(e,t,n){return n===void 0?n:r=>{const l=t().nodeInternals.get(e);l&&n(r,{...l})}}function Qc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:l,unselectNodesAndEdges:o,multiSelectionActive:a,nodeInternals:i,onError:c}=t.getState(),u=i.get(e);if(!u){c==null||c("012",Sn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):l([e])}function Ek(){const e=Me();return p.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:l,snapToGrid:o}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,i=n.touches?n.touches[0].clientY:n.clientY,c={x:(a-r[0])/r[2],y:(i-r[1])/r[2]};return{xSnapped:o?l[0]*Math.round(c.x/l[0]):c.x,ySnapped:o?l[1]*Math.round(c.y/l[1]):c.y,...c}},[])}function $i(e){return(t,n,r)=>e==null?void 0:e(t,r)}function R0({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:l,isSelectable:o,selectNodesOnDrag:a}){const i=Me(),[c,u]=p.useState(!1),d=p.useRef([]),f=p.useRef({x:null,y:null}),m=p.useRef(0),x=p.useRef(null),y=p.useRef({x:0,y:0}),b=p.useRef(null),w=p.useRef(!1),g=p.useRef(!1),h=p.useRef(!1),v=Ek();return p.useEffect(()=>{if(e!=null&&e.current){const N=Ct(e.current),S=({x:C,y:k})=>{const{nodeInternals:T,onNodeDrag:I,onSelectionDrag:$,updateNodePositions:F,nodeExtent:j,snapGrid:P,snapToGrid:A,nodeOrigin:O,onError:R}=i.getState();f.current={x:C,y:k};let _=!1,D={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&j){const W=Oa(d.current,O);D=kl(W)}if(d.current=d.current.map(W=>{const K={x:C-W.distance.x,y:k-W.distance.y};A&&(K.x=P[0]*Math.round(K.x/P[0]),K.y=P[1]*Math.round(K.y/P[1]));const Y=[[j[0][0],j[0][1]],[j[1][0],j[1][1]]];d.current.length>1&&j&&!W.extent&&(Y[0][0]=W.positionAbsolute.x-D.x+j[0][0],Y[1][0]=W.positionAbsolute.x+(W.width??0)-D.x2+j[1][0],Y[0][1]=W.positionAbsolute.y-D.y+j[0][1],Y[1][1]=W.positionAbsolute.y+(W.height??0)-D.y2+j[1][1]);const X=L0(W,K,T,Y,O,R);return _=_||W.position.x!==X.position.x||W.position.y!==X.position.y,W.position=X.position,W.positionAbsolute=X.positionAbsolute,W}),!_)return;F(d.current,!0,!0),u(!0);const M=l?I:$i($);if(M&&b.current){const[W,K]=Mi({nodeId:l,dragItems:d.current,nodeInternals:T});M(b.current,W,K)}},E=()=>{if(!x.current)return;const[C,k]=Zx(y.current,x.current);if(C!==0||k!==0){const{transform:T,panBy:I}=i.getState();f.current.x=(f.current.x??0)-C/T[2],f.current.y=(f.current.y??0)-k/T[2],I({x:C,y:k})&&S(f.current)}m.current=requestAnimationFrame(E)},L=C=>{var O;const{nodeInternals:k,multiSelectionActive:T,nodesDraggable:I,unselectNodesAndEdges:$,onNodeDragStart:F,onSelectionDragStart:j}=i.getState();g.current=!0;const P=l?F:$i(j);(!a||!o)&&!T&&l&&((O=k.get(l))!=null&&O.selected||$()),l&&o&&a&&Qc({id:l,store:i,nodeRef:e});const A=v(C);if(f.current=A,d.current=Sk(k,I,A,l),P&&d.current){const[R,_]=Mi({nodeId:l,dragItems:d.current,nodeInternals:k});P(C.sourceEvent,R,_)}};if(t)N.on(".drag",null);else{const C=F2().on("start",k=>{const{domNode:T,nodeDragThreshold:I}=i.getState();I===0&&L(k),h.current=!1;const $=v(k);f.current=$,x.current=(T==null?void 0:T.getBoundingClientRect())||null,y.current=Yn(k.sourceEvent,x.current)}).on("drag",k=>{var F,j;const T=v(k),{autoPanOnNodeDrag:I,nodeDragThreshold:$}=i.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(h.current=!0),!h.current){if(!w.current&&g.current&&I&&(w.current=!0,E()),!g.current){const P=T.xSnapped-(((F=f==null?void 0:f.current)==null?void 0:F.x)??0),A=T.ySnapped-(((j=f==null?void 0:f.current)==null?void 0:j.y)??0);Math.sqrt(P*P+A*A)>$&&L(k)}(f.current.x!==T.xSnapped||f.current.y!==T.ySnapped)&&d.current&&g.current&&(b.current=k.sourceEvent,y.current=Yn(k.sourceEvent,x.current),S(T))}}).on("end",k=>{if(!(!g.current||h.current)&&(u(!1),w.current=!1,g.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:T,nodeInternals:I,onNodeDragStop:$,onSelectionDragStop:F}=i.getState(),j=l?$:$i(F);if(T(d.current,!1,!1),j){const[P,A]=Mi({nodeId:l,dragItems:d.current,nodeInternals:I});j(k.sourceEvent,P,A)}}}).filter(k=>{const T=k.target;return!k.button&&(!n||!Sm(T,`.${n}`,e))&&(!r||Sm(T,r,e))});return N.call(C),()=>{N.on(".drag",null)}}}},[e,t,n,r,o,i,l,a,v]),c}function D0(){const e=Me();return p.useCallback(n=>{const{nodeInternals:r,nodeExtent:l,updateNodePositions:o,getNodes:a,snapToGrid:i,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=a().filter(h=>h.selected&&(h.draggable||d&&typeof h.draggable>"u")),m=i?c[0]:5,x=i?c[1]:5,y=n.isShiftPressed?4:1,b=n.x*m*y,w=n.y*x*y,g=f.map(h=>{if(h.positionAbsolute){const v={x:h.positionAbsolute.x+b,y:h.positionAbsolute.y+w};i&&(v.x=c[0]*Math.round(v.x/c[0]),v.y=c[1]*Math.round(v.y/c[1]));const{positionAbsolute:N,position:S}=L0(h,v,r,l,void 0,u);h.position=S,h.positionAbsolute=N}return h});o(g,!0,!1)},[])}const nr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var zr=e=>{const t=({id:n,type:r,data:l,xPos:o,yPos:a,xPosOrigin:i,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:x,onContextMenu:y,onDoubleClick:b,style:w,className:g,isDraggable:h,isSelectable:v,isConnectable:N,isFocusable:S,selectNodesOnDrag:E,sourcePosition:L,targetPosition:C,hidden:k,resizeObserver:T,dragHandle:I,zIndex:$,isParent:F,noDragClassName:j,noPanClassName:P,initialized:A,disableKeyboardA11y:O,ariaLabel:R,rfId:_,hasHandleBounds:D})=>{const M=Me(),W=p.useRef(null),K=p.useRef(null),Y=p.useRef(L),X=p.useRef(C),Z=p.useRef(r),B=v||h||d||f||m||x,ee=D0(),oe=Fr(n,M.getState,f),te=Fr(n,M.getState,m),Pe=Fr(n,M.getState,x),ge=Fr(n,M.getState,y),$e=Fr(n,M.getState,b),Le=ce=>{const{nodeDragThreshold:Q}=M.getState();if(v&&(!E||!h||Q>0)&&Qc({id:n,store:M,nodeRef:W}),d){const Fe=M.getState().nodeInternals.get(n);Fe&&d(ce,{...Fe})}},ye=ce=>{if(!Gc(ce)&&!O)if(n0.includes(ce.key)&&v){const Q=ce.key==="Escape";Qc({id:n,store:M,unselect:Q,nodeRef:W})}else h&&u&&Object.prototype.hasOwnProperty.call(nr,ce.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${ce.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),ee({x:nr[ce.key].x,y:nr[ce.key].y,isShiftPressed:ce.shiftKey}))};p.useEffect(()=>()=>{K.current&&(T==null||T.unobserve(K.current),K.current=null)},[]),p.useEffect(()=>{if(W.current&&!k){const ce=W.current;(!A||!D||K.current!==ce)&&(K.current&&(T==null||T.unobserve(K.current)),T==null||T.observe(ce),K.current=ce)}},[k,A,D]),p.useEffect(()=>{const ce=Z.current!==r,Q=Y.current!==L,Fe=X.current!==C;W.current&&(ce||Q||Fe)&&(ce&&(Z.current=r),Q&&(Y.current=L),Fe&&(X.current=C),M.getState().updateNodeDimensions([{id:n,nodeElement:W.current,forceUpdate:!0}]))},[n,r,L,C]);const Ge=R0({nodeRef:W,disabled:k||!h,noDragClassName:j,handleSelector:I,nodeId:n,isSelectable:v,selectNodesOnDrag:E});return k?null:U.createElement("div",{className:He(["react-flow__node",`react-flow__node-${r}`,{[P]:h},g,{selected:u,selectable:v,parent:F,dragging:Ge}]),ref:W,style:{zIndex:$,transform:`translate(${i}px,${c}px)`,pointerEvents:B?"all":"none",visibility:A?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:oe,onMouseMove:te,onMouseLeave:Pe,onContextMenu:ge,onClick:Le,onDoubleClick:$e,onKeyDown:S?ye:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":O?void 0:`${j0}-${_}`,"aria-label":R},U.createElement(US,{value:n},U.createElement(e,{id:n,data:l,type:r,xPos:o,yPos:a,selected:u,isConnectable:N,sourcePosition:L,targetPosition:C,dragging:Ge,dragHandle:I,zIndex:$})))};return t.displayName="NodeWrapper",p.memo(t)};const Ck=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Oa(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Tk({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Me(),{width:l,height:o,x:a,y:i,transformString:c,userSelectionActive:u}=he(Ck,Ue),d=D0(),f=p.useRef(null);if(p.useEffect(()=>{var y;n||(y=f.current)==null||y.focus({preventScroll:!0})},[n]),R0({nodeRef:f}),u||!l||!o)return null;const m=e?y=>{const b=r.getState().getNodes().filter(w=>w.selected);e(y,b)}:void 0,x=y=>{Object.prototype.hasOwnProperty.call(nr,y.key)&&d({x:nr[y.key].x,y:nr[y.key].y,isShiftPressed:y.shiftKey})};return U.createElement("div",{className:He(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},U.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:l,height:o,top:i,left:a}}))}var Ak=p.memo(Tk);const Pk=e=>e.nodesSelectionActive,I0=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:l,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:i,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:x,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:w,panActivationKeyCode:g,zoomActivationKeyCode:h,elementsSelectable:v,zoomOnScroll:N,zoomOnPinch:S,panOnScroll:E,panOnScrollSpeed:L,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:T,defaultViewport:I,translateExtent:$,minZoom:F,maxZoom:j,preventScrolling:P,onSelectionContextMenu:A,noWheelClassName:O,noPanClassName:R,disableKeyboardA11y:_})=>{const D=he(Pk),M=Tl(f),W=Tl(g),K=W||T,Y=W||E,X=M||m&&K!==!0;return pk({deleteKeyCode:i,multiSelectionKeyCode:w}),U.createElement(vk,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:o,elementsSelectable:v,zoomOnScroll:N,zoomOnPinch:S,panOnScroll:Y,panOnScrollSpeed:L,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:!M&&K,defaultViewport:I,translateExtent:$,minZoom:F,maxZoom:j,zoomActivationKeyCode:h,preventScrolling:P,noWheelClassName:O,noPanClassName:R},U.createElement(P0,{onSelectionStart:y,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:l,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:K,isSelecting:!!X,selectionMode:x},e,D&&U.createElement(Ak,{onSelectionContextMenu:A,noPanClassName:R,disableKeyboardA11y:_})))};I0.displayName="FlowRenderer";var _k=p.memo(I0);function Lk(e){return he(p.useCallback(n=>e?u0(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Rk(e){const t={input:zr(e.input||v0),default:zr(e.default||qc),output:zr(e.output||w0),group:zr(e.group||xd)},n={},r=Object.keys(e).filter(l=>!["input","default","output","group"].includes(l)).reduce((l,o)=>(l[o]=zr(e[o]||qc),l),n);return{...t,...r}}const Dk=({x:e,y:t,width:n,height:r,origin:l})=>!n||!r?{x:e,y:t}:l[0]<0||l[1]<0||l[0]>1||l[1]>1?{x:e,y:t}:{x:e-n*l[0],y:t-r*l[1]},Ik=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),M0=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:l,updateNodeDimensions:o,onError:a}=he(Ik,Ue),i=Lk(e.onlyRenderVisibleElements),c=p.useRef(),u=p.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));o(m)});return c.current=d,d},[]);return p.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),U.createElement("div",{className:"react-flow__nodes",style:yd},i.map(d=>{var S,E,L;let f=d.type||"default";e.nodeTypes[f]||(a==null||a("003",Sn.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,x=!!(d.draggable||t&&typeof d.draggable>"u"),y=!!(d.selectable||l&&typeof d.selectable>"u"),b=!!(d.connectable||n&&typeof d.connectable>"u"),w=!!(d.focusable||r&&typeof d.focusable>"u"),g=e.nodeExtent?ud(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,h=(g==null?void 0:g.x)??0,v=(g==null?void 0:g.y)??0,N=Dk({x:h,y:v,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return U.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||G.Bottom,targetPosition:d.targetPosition||G.Top,hidden:d.hidden,xPos:h,yPos:v,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:x,isSelectable:y,isConnectable:b,isFocusable:w,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((S=d[Te])==null?void 0:S.z)??0,isParent:!!((E=d[Te])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((L=d[Te])!=null&&L.handleBounds)})}))};M0.displayName="NodeRenderer";var Mk=p.memo(M0);const $k=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,Fk=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,Em="react-flow__edgeupdater",Cm=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:l,onMouseEnter:o,onMouseOut:a,type:i})=>U.createElement("circle",{onMouseDown:l,onMouseEnter:o,onMouseOut:a,className:He([Em,`${Em}-${i}`]),cx:$k(t,r,e),cy:Fk(n,r,e),r,stroke:"transparent",fill:"transparent"}),zk=()=>!0;var Rs=e=>{const t=({id:n,className:r,type:l,data:o,onClick:a,onEdgeDoubleClick:i,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:b,style:w,source:g,target:h,sourceX:v,sourceY:N,targetX:S,targetY:E,sourcePosition:L,targetPosition:C,elementsSelectable:k,hidden:T,sourceHandleId:I,targetHandleId:$,onContextMenu:F,onMouseEnter:j,onMouseMove:P,onMouseLeave:A,reconnectRadius:O,onReconnect:R,onReconnectStart:_,onReconnectEnd:D,markerEnd:M,markerStart:W,rfId:K,ariaLabel:Y,isFocusable:X,isReconnectable:Z,pathOptions:B,interactionWidth:ee,disableKeyboardA11y:oe})=>{const te=p.useRef(null),[Pe,ge]=p.useState(!1),[$e,Le]=p.useState(!1),ye=Me(),Ge=p.useMemo(()=>`url('#${Kc(W,K)}')`,[W,K]),ce=p.useMemo(()=>`url('#${Kc(M,K)}')`,[M,K]);if(T)return null;const Q=ve=>{var ht;const{edges:st,addSelectedEdges:ft,unselectNodesAndEdges:Xt,multiSelectionActive:Dt}=ye.getState(),mt=st.find(Qe=>Qe.id===n);mt&&(k&&(ye.setState({nodesSelectionActive:!1}),mt.selected&&Dt?(Xt({nodes:[],edges:[mt]}),(ht=te.current)==null||ht.blur()):ft([n])),a&&a(ve,mt))},Fe=$r(n,ye.getState,i),St=$r(n,ye.getState,F),Jn=$r(n,ye.getState,j),Yt=$r(n,ye.getState,P),es=$r(n,ye.getState,A),Kt=(ve,st)=>{if(ve.button!==0)return;const{edges:ft,isValidConnection:Xt}=ye.getState(),Dt=st?h:g,mt=(st?$:I)||null,ht=st?"target":"source",Qe=Xt||zk,br=st,ts=ft.find(an=>an.id===n);Le(!0),_==null||_(ve,ts,ht);const wr=an=>{Le(!1),D==null||D(an,ts,ht)};p0({event:ve,handleId:mt,nodeId:Dt,onConnect:an=>R==null?void 0:R(ts,an),isTarget:br,getState:ye.getState,setState:ye.setState,isValidConnection:Qe,edgeUpdaterType:ht,onReconnectEnd:wr})},ln=ve=>Kt(ve,!0),fe=ve=>Kt(ve,!1),dt=()=>ge(!0),on=()=>ge(!1),nt=!k&&!a,Cn=ve=>{var st;if(!oe&&n0.includes(ve.key)&&k){const{unselectNodesAndEdges:ft,addSelectedEdges:Xt,edges:Dt}=ye.getState();ve.key==="Escape"?((st=te.current)==null||st.blur(),ft({edges:[Dt.find(ht=>ht.id===n)]})):Xt([n])}};return U.createElement("g",{className:He(["react-flow__edge",`react-flow__edge-${l}`,r,{selected:c,animated:u,inactive:nt,updating:Pe}]),onClick:Q,onDoubleClick:Fe,onContextMenu:St,onMouseEnter:Jn,onMouseMove:Yt,onMouseLeave:es,onKeyDown:X?Cn:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${g} to ${h}`,"aria-describedby":X?`${S0}-${K}`:void 0,ref:te},!$e&&U.createElement(e,{id:n,source:g,target:h,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:b,data:o,style:w,sourceX:v,sourceY:N,targetX:S,targetY:E,sourcePosition:L,targetPosition:C,sourceHandleId:I,targetHandleId:$,markerStart:Ge,markerEnd:ce,pathOptions:B,interactionWidth:ee}),Z&&U.createElement(U.Fragment,null,(Z==="source"||Z===!0)&&U.createElement(Cm,{position:L,centerX:v,centerY:N,radius:O,onMouseDown:ln,onMouseEnter:dt,onMouseOut:on,type:"source"}),(Z==="target"||Z===!0)&&U.createElement(Cm,{position:C,centerX:S,centerY:E,radius:O,onMouseDown:fe,onMouseEnter:dt,onMouseOut:on,type:"target"})))};return t.displayName="EdgeWrapper",p.memo(t)};function Ok(e){const t={default:Rs(e.default||fa),straight:Rs(e.bezier||md),step:Rs(e.step||fd),smoothstep:Rs(e.step||za),simplebezier:Rs(e.simplebezier||dd)},n={},r=Object.keys(e).filter(l=>!["default","bezier"].includes(l)).reduce((l,o)=>(l[o]=Rs(e[o]||fa),l),n);return{...t,...r}}function Tm(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,l=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case G.Top:return{x:r+o/2,y:l};case G.Right:return{x:r+o,y:l+a/2};case G.Bottom:return{x:r+o/2,y:l+a};case G.Left:return{x:r,y:l+a/2}}}function Am(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Uk=(e,t,n,r,l,o)=>{const a=Tm(n,e,t),i=Tm(o,r,l);return{sourceX:a.x,sourceY:a.y,targetX:i.x,targetY:i.y}};function Wk({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:l,targetHeight:o,width:a,height:i,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+l),y2:Math.max(e.y+r,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=kl({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:i/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function Pm(e){var r,l,o,a,i;const t=((r=e==null?void 0:e[Te])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Bk=[{level:0,isMaxLevel:!0,edges:[]}];function Vk(e,t,n=!1){let r=-1;const l=e.reduce((a,i)=>{var d,f;const c=At(i.zIndex);let u=c?i.zIndex:0;if(n){const m=t.get(i.target),x=t.get(i.source),y=i.selected||(m==null?void 0:m.selected)||(x==null?void 0:x.selected),b=Math.max(((d=x==null?void 0:x[Te])==null?void 0:d.z)||0,((f=m==null?void 0:m[Te])==null?void 0:f.z)||0,1e3);u=(c?i.zIndex:0)+(y?b:0)}return a[u]?a[u].push(i):a[u]=[i],r=u>r?u:r,a},{}),o=Object.entries(l).map(([a,i])=>{const c=+a;return{edges:i,level:c,isMaxLevel:c===r}});return o.length===0?Bk:o}function Hk(e,t,n){const r=he(p.useCallback(l=>e?l.edges.filter(o=>{const a=t.get(o.source),i=t.get(o.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&Wk({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:i.width,targetHeight:i.height,width:l.width,height:l.height,transform:l.transform})}):l.edges,[e,t]));return Vk(r,t,n)}const Gk=({color:e="none",strokeWidth:t=1})=>U.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Yk=({color:e="none",strokeWidth:t=1})=>U.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),_m={[ps.Arrow]:Gk,[ps.ArrowClosed]:Yk};function Kk(e){const t=Me();return p.useMemo(()=>{var l,o;return Object.prototype.hasOwnProperty.call(_m,e)?_m[e]:((o=(l=t.getState()).onError)==null||o.call(l,"009",Sn.error009(e)),null)},[e])}const Xk=({id:e,type:t,color:n,width:r=12.5,height:l=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:i="auto-start-reverse"})=>{const c=Kk(t);return c?U.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:i,refX:"0",refY:"0"},U.createElement(c,{color:n,strokeWidth:a})):null},qk=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((l,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const i=Kc(a,t);r.includes(i)||(l.push({id:i,color:a.color||e,...a}),r.push(i))}}),l),[]).sort((l,o)=>l.id.localeCompare(o.id))},$0=({defaultColor:e,rfId:t})=>{const n=he(p.useCallback(qk({defaultColor:e,rfId:t}),[e,t]),(r,l)=>!(r.length!==l.length||r.some((o,a)=>o.id!==l[a].id)));return U.createElement("defs",null,n.map(r=>U.createElement(Xk,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};$0.displayName="MarkerDefinitions";var Qk=p.memo($0);const Zk=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),F0=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:l,noPanClassName:o,onEdgeContextMenu:a,onEdgeMouseEnter:i,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:x,onReconnectEnd:y,reconnectRadius:b,children:w,disableKeyboardA11y:g})=>{const{edgesFocusable:h,edgesUpdatable:v,elementsSelectable:N,width:S,height:E,connectionMode:L,nodeInternals:C,onError:k}=he(Zk,Ue),T=Hk(t,C,n);return S?U.createElement(U.Fragment,null,T.map(({level:I,edges:$,isMaxLevel:F})=>U.createElement("svg",{key:I,style:{zIndex:I},width:S,height:E,className:"react-flow__edges react-flow__container"},F&&U.createElement(Qk,{defaultColor:e,rfId:r}),U.createElement("g",null,$.map(j=>{const[P,A,O]=Pm(C.get(j.source)),[R,_,D]=Pm(C.get(j.target));if(!O||!D)return null;let M=j.type||"default";l[M]||(k==null||k("011",Sn.error011(M)),M="default");const W=l[M]||l.default,K=L===js.Strict?_.target:(_.target??[]).concat(_.source??[]),Y=Am(A.source,j.sourceHandle),X=Am(K,j.targetHandle),Z=(Y==null?void 0:Y.position)||G.Bottom,B=(X==null?void 0:X.position)||G.Top,ee=!!(j.focusable||h&&typeof j.focusable>"u"),oe=j.reconnectable||j.updatable,te=typeof m<"u"&&(oe||v&&typeof oe>"u");if(!Y||!X)return k==null||k("008",Sn.error008(Y,j)),null;const{sourceX:Pe,sourceY:ge,targetX:$e,targetY:Le}=Uk(P,Y,Z,R,X,B);return U.createElement(W,{key:j.id,id:j.id,className:He([j.className,o]),type:M,data:j.data,selected:!!j.selected,animated:!!j.animated,hidden:!!j.hidden,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,style:j.style,source:j.source,target:j.target,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerEnd:j.markerEnd,markerStart:j.markerStart,sourceX:Pe,sourceY:ge,targetX:$e,targetY:Le,sourcePosition:Z,targetPosition:B,elementsSelectable:N,onContextMenu:a,onMouseEnter:i,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:x,onReconnectEnd:y,reconnectRadius:b,rfId:r,ariaLabel:j.ariaLabel,isFocusable:ee,isReconnectable:te,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth,disableKeyboardA11y:g})})))),w):null};F0.displayName="EdgeRenderer";var Jk=p.memo(F0);const eE=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function tE({children:e}){const t=he(eE);return U.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function nE(e){const t=gd(),n=p.useRef(!1);p.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const sE={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top},z0=({nodeId:e,handleType:t,style:n,type:r=Mn.Bezier,CustomComponent:l,connectionStatus:o})=>{var E,L,C;const{fromNode:a,handleId:i,toX:c,toY:u,connectionMode:d}=he(p.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),Ue),f=(E=a==null?void 0:a[Te])==null?void 0:E.handleBounds;let m=f==null?void 0:f[t];if(d===js.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!a||!m)return null;const x=i?m.find(k=>k.id===i):m[0],y=x?x.x+x.width/2:(a.width??0)/2,b=x?x.y+x.height/2:a.height??0,w=(((L=a.positionAbsolute)==null?void 0:L.x)??0)+y,g=(((C=a.positionAbsolute)==null?void 0:C.y)??0)+b,h=x==null?void 0:x.position,v=h?sE[h]:null;if(!h||!v)return null;if(l)return U.createElement(l,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:x,fromX:w,fromY:g,toX:c,toY:u,fromPosition:h,toPosition:v,connectionStatus:o});let N="";const S={sourceX:w,sourceY:g,sourcePosition:h,targetX:c,targetY:u,targetPosition:v};return r===Mn.Bezier?[N]=a0(S):r===Mn.Step?[N]=Yc({...S,borderRadius:0}):r===Mn.SmoothStep?[N]=Yc(S):r===Mn.SimpleBezier?[N]=o0(S):N=`M${w},${g} ${c},${u}`,U.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};z0.displayName="ConnectionLine";const rE=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function lE({containerStyle:e,style:t,type:n,component:r}){const{nodeId:l,handleType:o,nodesConnectable:a,width:i,height:c,connectionStatus:u}=he(rE,Ue);return!(l&&o&&i&&a)?null:U.createElement("svg",{style:e,width:i,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},U.createElement("g",{className:He(["react-flow__connection",u])},U.createElement(z0,{nodeId:l,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function Lm(e,t){return p.useRef(null),Me(),p.useMemo(()=>t(e),[e])}const O0=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:l,onInit:o,onNodeClick:a,onEdgeClick:i,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:x,onSelectionContextMenu:y,onSelectionStart:b,onSelectionEnd:w,connectionLineType:g,connectionLineStyle:h,connectionLineComponent:v,connectionLineContainerStyle:N,selectionKeyCode:S,selectionOnDrag:E,selectionMode:L,multiSelectionKeyCode:C,panActivationKeyCode:k,zoomActivationKeyCode:T,deleteKeyCode:I,onlyRenderVisibleElements:$,elementsSelectable:F,selectNodesOnDrag:j,defaultViewport:P,translateExtent:A,minZoom:O,maxZoom:R,preventScrolling:_,defaultMarkerColor:D,zoomOnScroll:M,zoomOnPinch:W,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:X,zoomOnDoubleClick:Z,panOnDrag:B,onPaneClick:ee,onPaneMouseEnter:oe,onPaneMouseMove:te,onPaneMouseLeave:Pe,onPaneScroll:ge,onPaneContextMenu:$e,onEdgeContextMenu:Le,onEdgeMouseEnter:ye,onEdgeMouseMove:Ge,onEdgeMouseLeave:ce,onReconnect:Q,onReconnectStart:Fe,onReconnectEnd:St,reconnectRadius:Jn,noDragClassName:Yt,noWheelClassName:es,noPanClassName:Kt,elevateEdgesOnSelect:ln,disableKeyboardA11y:fe,nodeOrigin:dt,nodeExtent:on,rfId:nt})=>{const Cn=Lm(e,Rk),ve=Lm(t,Ok);return nE(o),U.createElement(_k,{onPaneClick:ee,onPaneMouseEnter:oe,onPaneMouseMove:te,onPaneMouseLeave:Pe,onPaneContextMenu:$e,onPaneScroll:ge,deleteKeyCode:I,selectionKeyCode:S,selectionOnDrag:E,selectionMode:L,onSelectionStart:b,onSelectionEnd:w,multiSelectionKeyCode:C,panActivationKeyCode:k,zoomActivationKeyCode:T,elementsSelectable:F,onMove:n,onMoveStart:r,onMoveEnd:l,zoomOnScroll:M,zoomOnPinch:W,zoomOnDoubleClick:Z,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:X,panOnDrag:B,defaultViewport:P,translateExtent:A,minZoom:O,maxZoom:R,onSelectionContextMenu:y,preventScrolling:_,noDragClassName:Yt,noWheelClassName:es,noPanClassName:Kt,disableKeyboardA11y:fe},U.createElement(tE,null,U.createElement(Jk,{edgeTypes:ve,onEdgeClick:i,onEdgeDoubleClick:u,onlyRenderVisibleElements:$,onEdgeContextMenu:Le,onEdgeMouseEnter:ye,onEdgeMouseMove:Ge,onEdgeMouseLeave:ce,onReconnect:Q,onReconnectStart:Fe,onReconnectEnd:St,reconnectRadius:Jn,defaultMarkerColor:D,noPanClassName:Kt,elevateEdgesOnSelect:!!ln,disableKeyboardA11y:fe,rfId:nt},U.createElement(lE,{style:h,type:g,component:v,containerStyle:N})),U.createElement("div",{className:"react-flow__edgelabel-renderer"}),U.createElement(Mk,{nodeTypes:Cn,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:x,selectNodesOnDrag:j,onlyRenderVisibleElements:$,noPanClassName:Kt,noDragClassName:Yt,disableKeyboardA11y:fe,nodeOrigin:dt,nodeExtent:on,rfId:nt})))};O0.displayName="GraphView";var oE=p.memo(O0);const Zc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],An={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Zc,nodeExtent:Zc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:js.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:IS,isValidConnection:void 0},aE=()=>qN((e,t)=>({...An,setNodes:n=>{const{nodeInternals:r,nodeOrigin:l,elevateNodesOnSelect:o}=t();e({nodeInternals:Di(n,r,l,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(l=>({...r,...l}))})},setDefaultNodesAndEdges:(n,r)=>{const l=typeof n<"u",o=typeof r<"u",a=l?Di(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:l,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:l,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:i,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),x=n.reduce((b,w)=>{const g=l.get(w.id);if(g!=null&&g.hidden)l.set(g.id,{...g,[Te]:{...g[Te],handleBounds:void 0}});else if(g){const h=cd(w.nodeElement);!!(h.width&&h.height&&(g.width!==h.width||g.height!==h.height||w.forceUpdate))&&(l.set(g.id,{...g,[Te]:{...g[Te],handleBounds:{source:km(".source",w.nodeElement,m,u),target:km(".target",w.nodeElement,m,u)}},...h}),b.push({id:g.id,type:"dimensions",dimensions:h}))}return b},[]);E0(l,u);const y=a||o&&!a&&C0(t,{initial:!0,...i});e({nodeInternals:new Map(l),fitViewOnInitDone:y}),(x==null?void 0:x.length)>0&&(r==null||r(x))},updateNodePositions:(n,r=!0,l=!1)=>{const{triggerNodeChanges:o}=t(),a=n.map(i=>{const c={id:i.id,type:"position",dragging:l};return r&&(c.positionAbsolute=i.positionAbsolute,c.position=i.position),c});o(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:l,hasDefaultNodes:o,nodeOrigin:a,getNodes:i,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(o){const u=A0(n,i()),d=Di(u,l,a,c);e({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:l,getNodes:o}=t();let a,i=null;r?a=n.map(c=>Rn(c,!0)):(a=Ys(o(),n),i=Ys(l,[])),mo({changedNodes:a,changedEdges:i,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:l,getNodes:o}=t();let a,i=null;r?a=n.map(c=>Rn(c,!0)):(a=Ys(l,n),i=Ys(o(),[])),mo({changedNodes:i,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:l,getNodes:o}=t(),a=n||o(),i=r||l,c=a.map(d=>(d.selected=!1,Rn(d.id,!1))),u=i.map(d=>Rn(d.id,!1));mo({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:l}=t();r==null||r.scaleExtent([n,l]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:l}=t();r==null||r.scaleExtent([l,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(i=>i.selected).map(i=>Rn(i.id,!1)),a=n.filter(i=>i.selected).map(i=>Rn(i.id,!1));mo({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(l=>{l.positionAbsolute=ud(l.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:l,height:o,d3Zoom:a,d3Selection:i,translateExtent:c}=t();if(!a||!i||!n.x&&!n.y)return!1;const u=gn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[l,o]],f=a==null?void 0:a.constrain()(u,d,c);return a.transform(i,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:An.connectionNodeId,connectionHandleId:An.connectionHandleId,connectionHandleType:An.connectionHandleType,connectionStatus:An.connectionStatus,connectionStartHandle:An.connectionStartHandle,connectionEndHandle:An.connectionEndHandle}),reset:()=>e({...An})}),Object.is),U0=({children:e})=>{const t=p.useRef(null);return t.current||(t.current=aE()),U.createElement(TS,{value:t.current},e)};U0.displayName="ReactFlowProvider";const W0=({children:e})=>p.useContext(Fa)?U.createElement(U.Fragment,null,e):U.createElement(U0,null,e);W0.displayName="ReactFlowWrapper";const iE={input:v0,default:qc,output:w0,group:xd},cE={default:fa,straight:md,step:fd,smoothstep:za,simplebezier:dd},uE=[0,0],dE=[15,15],fE={x:0,y:0,zoom:1},mE={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},B0=p.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:l,nodeTypes:o=iE,edgeTypes:a=cE,onNodeClick:i,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:x,onConnectStart:y,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:g,onNodeMouseEnter:h,onNodeMouseMove:v,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:E,onNodeDragStart:L,onNodeDrag:C,onNodeDragStop:k,onNodesDelete:T,onEdgesDelete:I,onSelectionChange:$,onSelectionDragStart:F,onSelectionDrag:j,onSelectionDragStop:P,onSelectionContextMenu:A,onSelectionStart:O,onSelectionEnd:R,connectionMode:_=js.Strict,connectionLineType:D=Mn.Bezier,connectionLineStyle:M,connectionLineComponent:W,connectionLineContainerStyle:K,deleteKeyCode:Y="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Z=!1,selectionMode:B=El.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:oe=da()?"Meta":"Control",zoomActivationKeyCode:te=da()?"Meta":"Control",snapToGrid:Pe=!1,snapGrid:ge=dE,onlyRenderVisibleElements:$e=!1,selectNodesOnDrag:Le=!0,nodesDraggable:ye,nodesConnectable:Ge,nodesFocusable:ce,nodeOrigin:Q=uE,edgesFocusable:Fe,edgesUpdatable:St,elementsSelectable:Jn,defaultViewport:Yt=fE,minZoom:es=.5,maxZoom:Kt=2,translateExtent:ln=Zc,preventScrolling:fe=!0,nodeExtent:dt,defaultMarkerColor:on="#b1b1b7",zoomOnScroll:nt=!0,zoomOnPinch:Cn=!0,panOnScroll:ve=!1,panOnScrollSpeed:st=.5,panOnScrollMode:ft=ds.Free,zoomOnDoubleClick:Xt=!0,panOnDrag:Dt=!0,onPaneClick:mt,onPaneMouseEnter:ht,onPaneMouseMove:Qe,onPaneMouseLeave:br,onPaneScroll:ts,onPaneContextMenu:wr,children:zl,onEdgeContextMenu:an,onEdgeDoubleClick:Ol,onEdgeMouseEnter:Ua,onEdgeMouseMove:Wa,onEdgeMouseLeave:Ba,onEdgeUpdate:Va,onEdgeUpdateStart:Ha,onEdgeUpdateEnd:Ga,onReconnect:Ya,onReconnectStart:Ka,onReconnectEnd:Xa,reconnectRadius:rt=10,edgeUpdaterRadius:ns=10,onNodesChange:z,onEdgesChange:ae,noDragClassName:J="nodrag",noWheelClassName:ue="nowheel",noPanClassName:ss="nopan",fitView:Cs=!1,fitViewOptions:Ts,connectOnClick:Nr=!0,attributionPosition:q0,proOptions:Q0,defaultEdgeOptions:Z0,elevateNodesOnSelect:J0=!0,elevateEdgesOnSelect:eg=!1,disableKeyboardA11y:jd=!1,autoPanOnConnect:tg=!0,autoPanOnNodeDrag:ng=!0,connectionRadius:sg=20,isValidConnection:rg,onError:lg,style:og,id:Sd,nodeDragThreshold:ag,...ig},cg)=>{const qa=Sd||"1";return U.createElement("div",{...ig,style:{...og,...mE},ref:cg,className:He(["react-flow",l]),"data-testid":"rf__wrapper",id:Sd},U.createElement(W0,null,U.createElement(oE,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:i,onEdgeClick:c,onNodeMouseEnter:h,onNodeMouseMove:v,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:a,connectionLineType:D,connectionLineStyle:M,connectionLineComponent:W,connectionLineContainerStyle:K,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:B,deleteKeyCode:Y,multiSelectionKeyCode:oe,panActivationKeyCode:ee,zoomActivationKeyCode:te,onlyRenderVisibleElements:$e,selectNodesOnDrag:Le,defaultViewport:Yt,translateExtent:ln,minZoom:es,maxZoom:Kt,preventScrolling:fe,zoomOnScroll:nt,zoomOnPinch:Cn,zoomOnDoubleClick:Xt,panOnScroll:ve,panOnScrollSpeed:st,panOnScrollMode:ft,panOnDrag:Dt,onPaneClick:mt,onPaneMouseEnter:ht,onPaneMouseMove:Qe,onPaneMouseLeave:br,onPaneScroll:ts,onPaneContextMenu:wr,onSelectionContextMenu:A,onSelectionStart:O,onSelectionEnd:R,onEdgeContextMenu:an,onEdgeDoubleClick:Ol,onEdgeMouseEnter:Ua,onEdgeMouseMove:Wa,onEdgeMouseLeave:Ba,onReconnect:Ya??Va,onReconnectStart:Ka??Ha,onReconnectEnd:Xa??Ga,reconnectRadius:rt??ns,defaultMarkerColor:on,noDragClassName:J,noWheelClassName:ue,noPanClassName:ss,elevateEdgesOnSelect:eg,rfId:qa,disableKeyboardA11y:jd,nodeOrigin:Q,nodeExtent:dt}),U.createElement(sk,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:y,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:g,nodesDraggable:ye,nodesConnectable:Ge,nodesFocusable:ce,edgesFocusable:Fe,edgesUpdatable:St,elementsSelectable:Jn,elevateNodesOnSelect:J0,minZoom:es,maxZoom:Kt,nodeExtent:dt,onNodesChange:z,onEdgesChange:ae,snapToGrid:Pe,snapGrid:ge,connectionMode:_,translateExtent:ln,connectOnClick:Nr,defaultEdgeOptions:Z0,fitView:Cs,fitViewOptions:Ts,onNodesDelete:T,onEdgesDelete:I,onNodeDragStart:L,onNodeDrag:C,onNodeDragStop:k,onSelectionDrag:j,onSelectionDragStart:F,onSelectionDragStop:P,noPanClassName:ss,nodeOrigin:Q,rfId:qa,autoPanOnConnect:tg,autoPanOnNodeDrag:ng,onError:lg,connectionRadius:sg,isValidConnection:rg,nodeDragThreshold:ag}),U.createElement(tk,{onSelectionChange:$}),zl,U.createElement(PS,{proOptions:Q0,position:q0}),U.createElement(ik,{rfId:qa,disableKeyboardA11y:jd})))});B0.displayName="ReactFlow";function V0(e){return t=>{const[n,r]=p.useState(t),l=p.useCallback(o=>r(a=>e(o,a)),[]);return[n,r,l]}}const hE=V0(A0),pE=V0(Nk),H0=({id:e,x:t,y:n,width:r,height:l,style:o,color:a,strokeColor:i,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:m,selected:x})=>{const{background:y,backgroundColor:b}=o||{},w=a||y||b;return U.createElement("rect",{className:He(["react-flow__minimap-node",{selected:x},u]),x:t,y:n,rx:d,ry:d,width:r,height:l,fill:w,stroke:i,strokeWidth:c,shapeRendering:f,onClick:m?g=>m(g,e):void 0})};H0.displayName="MiniMapNode";var xE=p.memo(H0);const gE=e=>e.nodeOrigin,yE=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Fi=e=>e instanceof Function?e:()=>e;function vE({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:l=2,nodeComponent:o=xE,onClick:a}){const i=he(yE,Ue),c=he(gE),u=Fi(t),d=Fi(e),f=Fi(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return U.createElement(U.Fragment,null,i.map(x=>{const{x:y,y:b}=xs(x,c).positionAbsolute;return U.createElement(o,{key:x.id,x:y,y:b,width:x.width,height:x.height,style:x.style,selected:x.selected,className:f(x),color:u(x),borderRadius:r,strokeColor:d(x),strokeWidth:l,shapeRendering:m,onClick:a,id:x.id})}))}var bE=p.memo(vE);const wE=200,NE=150,jE=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?RS(Oa(t,e.nodeOrigin),n):n,rfId:e.rfId}},SE="react-flow__minimap-desc";function G0({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:l="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,nodeComponent:i,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:m,onNodeClick:x,pannable:y=!1,zoomable:b=!1,ariaLabel:w="React Flow mini map",inversePan:g=!1,zoomStep:h=10,offsetScale:v=5}){const N=Me(),S=p.useRef(null),{boundingRect:E,viewBB:L,rfId:C}=he(jE,Ue),k=(e==null?void 0:e.width)??wE,T=(e==null?void 0:e.height)??NE,I=E.width/k,$=E.height/T,F=Math.max(I,$),j=F*k,P=F*T,A=v*F,O=E.x-(j-E.width)/2-A,R=E.y-(P-E.height)/2-A,_=j+A*2,D=P+A*2,M=`${SE}-${C}`,W=p.useRef(0);W.current=F,p.useEffect(()=>{if(S.current){const X=Ct(S.current),Z=oe=>{const{transform:te,d3Selection:Pe,d3Zoom:ge}=N.getState();if(oe.sourceEvent.type!=="wheel"||!Pe||!ge)return;const $e=-oe.sourceEvent.deltaY*(oe.sourceEvent.deltaMode===1?.05:oe.sourceEvent.deltaMode?1:.002)*h,Le=te[2]*Math.pow(2,$e);ge.scaleTo(Pe,Le)},B=oe=>{const{transform:te,d3Selection:Pe,d3Zoom:ge,translateExtent:$e,width:Le,height:ye}=N.getState();if(oe.sourceEvent.type!=="mousemove"||!Pe||!ge)return;const Ge=W.current*Math.max(1,te[2])*(g?-1:1),ce={x:te[0]-oe.sourceEvent.movementX*Ge,y:te[1]-oe.sourceEvent.movementY*Ge},Q=[[0,0],[Le,ye]],Fe=gn.translate(ce.x,ce.y).scale(te[2]),St=ge.constrain()(Fe,Q,$e);ge.transform(Pe,St)},ee=qx().on("zoom",y?B:null).on("zoom.wheel",b?Z:null);return X.call(ee),()=>{X.on("zoom",null)}}},[y,b,g,h]);const K=m?X=>{const Z=Ft(X);m(X,{x:Z[0],y:Z[1]})}:void 0,Y=x?(X,Z)=>{const B=N.getState().nodeInternals.get(Z);x(X,B)}:void 0;return U.createElement(id,{position:f,style:e,className:He(["react-flow__minimap",t]),"data-testid":"rf__minimap"},U.createElement("svg",{width:k,height:T,viewBox:`${O} ${R} ${_} ${D}`,role:"img","aria-labelledby":M,ref:S,onClick:K},w&&U.createElement("title",{id:M},w),U.createElement(bE,{onClick:Y,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:l,nodeStrokeWidth:a,nodeComponent:i}),U.createElement("path",{className:"react-flow__minimap-mask",d:`M${O-A},${R-A}h${_+A*2}v${D+A*2}h${-_-A*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}G0.displayName="MiniMap";var kE=p.memo(G0);function EE(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},U.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function CE(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},U.createElement("path",{d:"M0 0h32v4.2H0z"}))}function TE(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},U.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function AE(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},U.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function PE(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},U.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Gr=({children:e,className:t,...n})=>U.createElement("button",{type:"button",className:He(["react-flow__controls-button",t]),...n},e);Gr.displayName="ControlButton";const _E=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Y0=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:l,onZoomIn:o,onZoomOut:a,onFitView:i,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=Me(),[x,y]=p.useState(!1),{isInteractive:b,minZoomReached:w,maxZoomReached:g}=he(_E,Ue),{zoomIn:h,zoomOut:v,fitView:N}=gd();if(p.useEffect(()=>{y(!0)},[]),!x)return null;const S=()=>{h(),o==null||o()},E=()=>{v(),a==null||a()},L=()=>{N(l),i==null||i()},C=()=>{m.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),c==null||c(!b)};return U.createElement(id,{className:He(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&U.createElement(U.Fragment,null,U.createElement(Gr,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},U.createElement(EE,null)),U.createElement(Gr,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},U.createElement(CE,null))),n&&U.createElement(Gr,{className:"react-flow__controls-fitview",onClick:L,title:"fit view","aria-label":"fit view"},U.createElement(TE,null)),r&&U.createElement(Gr,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},b?U.createElement(PE,null):U.createElement(AE,null)),d)};Y0.displayName="Controls";var LE=p.memo(Y0),Bt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Bt||(Bt={}));function RE({color:e,dimensions:t,lineWidth:n}){return U.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function DE({color:e,radius:t}){return U.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const IE={[Bt.Dots]:"#91919a",[Bt.Lines]:"#eee",[Bt.Cross]:"#e2e2e2"},ME={[Bt.Dots]:1,[Bt.Lines]:1,[Bt.Cross]:6},$E=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function K0({id:e,variant:t=Bt.Dots,gap:n=20,size:r,lineWidth:l=1,offset:o=2,color:a,style:i,className:c}){const u=p.useRef(null),{transform:d,patternId:f}=he($E,Ue),m=a||IE[t],x=r||ME[t],y=t===Bt.Dots,b=t===Bt.Cross,w=Array.isArray(n)?n:[n,n],g=[w[0]*d[2]||1,w[1]*d[2]||1],h=x*d[2],v=b?[h,h]:g,N=y?[h/o,h/o]:[v[0]/o,v[1]/o];return U.createElement("svg",{className:He(["react-flow__background",c]),style:{...i,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},U.createElement("pattern",{id:f+e,x:d[0]%g[0],y:d[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},y?U.createElement(DE,{color:m,radius:h/o}):U.createElement(RE,{dimensions:v,color:m,lineWidth:l})),U.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}K0.displayName="Background";var FE=p.memo(K0);function vd({className:e="w-5 h-5"}){return s.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.375a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}function bd({className:e="w-5 h-5"}){return s.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161l-1.84 8.68c-.133.595-.475.742-.963.461l-2.662-1.96-1.285 1.234c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.053 4.94-4.463c.215-.193-.047-.3-.333-.108l-6.108 3.85-2.637-.82c-.574-.18-.59-.574.12-.87l10.34-3.99c.48-.177.899.112.74.69z"})})}function wd({className:e="w-5 h-5"}){return s.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})})}function Nd({className:e="w-5 h-5"}){return s.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}function ma({className:e="w-5 h-5"}){return s.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M23.552 11.99c0-6.617-5.383-12-12-12s-12 5.383-12 12c0 5.602 3.85 10.32 9.05 11.66.66.12.9-.29.9-.64v-2.19c-3.67.8-4.45-1.76-4.45-1.76-.6-1.52-1.46-1.92-1.46-1.92-1.19-.82.09-.8.09-.8 1.32.09 2.01 1.36 2.01 1.36 1.17 2.01 3.07 1.43 3.82 1.09.12-.85.46-1.43.83-1.76-2.9-.33-5.95-1.45-5.95-6.46 0-1.43.51-2.6 1.35-3.52-.14-.33-.58-1.65.13-3.44 0 0 1.1-.35 3.6 1.34 1.04-.29 2.16-.44 3.27-.44 1.11 0 2.23.15 3.27.44 2.5-1.69 3.6-1.34 3.6-1.34.71 1.79.27 3.11.13 3.44.84.92 1.35 2.09 1.35 3.52 0 5.02-3.07 6.13-5.99 6.45.47.41.89 1.22.89 2.46v3.65c0 .35.24.77.9.64 5.2-1.34 9.05-6.06 9.05-11.66z"})})}const zE=[{value:"LEAD_CREATED",label:"Lead Created"},{value:"LEAD_UPDATED",label:"Lead Updated"},{value:"LEAD_STAGE_CHANGED",label:"Lead Stage Changed"},{value:"LEAD_ASSIGNED",label:"Lead Assigned"},{value:"TASK_CREATED",label:"Task Created"},{value:"TASK_COMPLETED",label:"Task Completed"},{value:"USER_INVITED",label:"User Invited"}];function re({type:e,position:t,id:n,style:r,...l}){return s.jsx(Cl,{type:e,position:t,id:n,style:{width:"12px",height:"12px",border:"2px solid white",backgroundColor:e==="source"?"#3b82f6":"#10b981",...r},className:"!bg-blue-500 hover:!bg-blue-600 transition-colors",...l})}function OE({data:e,id:t}){return s.jsxs("div",{className:"px-4 py-3 bg-purple-100 border-2 border-purple-500 rounded-lg shadow-lg min-w-[200px] hover:shadow-xl transition-shadow relative group",children:[s.jsx(re,{type:"source",position:G.Bottom}),s.jsx("button",{onClick:()=>{var n;return(n=e.onDelete)==null?void 0:n.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold",title:"Delete node",children:""}),s.jsxs("div",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Trigger"]}),s.jsxs("select",{value:e.triggerEvent||"",onChange:n=>{var r;return(r=e.onChange)==null?void 0:r.call(e,{triggerEvent:n.target.value})},className:"w-full text-sm border border-purple-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-purple-500",children:[s.jsx("option",{value:"",children:"Select event..."}),zE.map(n=>s.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function UE({data:e}){var t,n,r;return s.jsxs("div",{className:"px-4 py-3 bg-blue-100 border-2 border-blue-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow",children:[s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," HTTP Request"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:"Method"}),s.jsxs("select",{value:((t=e.config)==null?void 0:t.method)||"GET",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,method:l.target.value}})},className:"w-full border border-blue-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{children:"GET"}),s.jsx("option",{children:"POST"}),s.jsx("option",{children:"PUT"}),s.jsx("option",{children:"DELETE"}),s.jsx("option",{children:"PATCH"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:"URL"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.url)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,url:l.target.value}})},placeholder:"https://api.example.com/endpoint",className:"w-full border border-blue-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:"Body (JSON)"}),s.jsx("textarea",{value:((r=e.config)==null?void 0:r.body)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,body:l.target.value}})},placeholder:'{"key": "value"}',className:"w-full border border-blue-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-blue-500"})]})]})]})}function WE({data:e}){var n,r,l,o;const t=((n=e.config)==null?void 0:n.useCustomSMTP)||!1;return s.jsxs("div",{className:"px-4 py-3 bg-green-100 border-2 border-green-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow",children:[s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Send Email"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-green-700 mb-1",children:"Email Provider"}),s.jsxs("select",{value:t?"CUSTOM_SMTP":"LITE_CRM",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,useCustomSMTP:a.target.value==="CUSTOM_SMTP"}})},className:"w-full border border-green-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"LITE_CRM",children:"Use Lite CRM Mail"}),s.jsx("option",{value:"CUSTOM_SMTP",children:"Use Custom SMTP"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-green-700 mb-1",children:"To"}),s.jsx("input",{type:"text",value:((r=e.config)==null?void 0:r.to)||"",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,to:a.target.value}})},placeholder:"user@example.com or {{data.lead.email}}",className:"w-full border border-green-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-green-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-green-700 mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:((l=e.config)==null?void 0:l.subject)||"",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,subject:a.target.value}})},placeholder:"Email subject",className:"w-full border border-green-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-green-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-green-700 mb-1",children:"Body"}),s.jsx("textarea",{value:((o=e.config)==null?void 0:o.body)||"",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,body:a.target.value}})},placeholder:"Email body (use {{variables}} for interpolation)",className:"w-full border border-green-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-green-500"})]}),t&&s.jsx("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:" Configure your SMTP settings in Settings  Email Integration"})]})]})}function BE({data:e,id:t}){var n;return s.jsxs("div",{className:"px-4 py-3 bg-yellow-100 border-2 border-yellow-500 rounded-lg shadow-lg min-w-[200px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var r;return(r=e.onDelete)==null?void 0:r.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-yellow-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Delay"]}),s.jsx("div",{className:"space-y-2 text-sm",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-yellow-700 mb-1",children:"Delay (ms)"}),s.jsx("input",{type:"number",value:((n=e.config)==null?void 0:n.delayMs)||1e3,onChange:r=>{var l;return(l=e.onChange)==null?void 0:l.call(e,{config:{...e.config,delayMs:parseInt(r.target.value)||1e3}})},className:"w-full border border-yellow-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-yellow-500"})]})})]})}function VE({data:e,id:t}){var n,r,l;return s.jsxs("div",{className:"px-4 py-3 bg-orange-100 border-2 border-orange-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var o;return(o=e.onDelete)==null?void 0:o.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom,id:"true",style:{backgroundColor:"#10b981"}}),s.jsx(re,{type:"source",position:G.Right,id:"false",style:{backgroundColor:"#ef4444"}}),s.jsxs("div",{className:"font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Condition"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-orange-700 mb-1",children:"Left Value"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.leftValue)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,leftValue:o.target.value}})},placeholder:"{{data.lead.stage}}",className:"w-full border border-orange-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-orange-700 mb-1",children:"Operator"}),s.jsxs("select",{value:((r=e.config)==null?void 0:r.operator)||"==",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,operator:o.target.value}})},className:"w-full border border-orange-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-orange-500",children:[s.jsx("option",{value:"==",children:"Equals (==)"}),s.jsx("option",{value:"!=",children:"Not Equals (!=)"}),s.jsx("option",{value:">",children:"Greater Than (>)"}),s.jsx("option",{value:"<",children:"Less Than (<)"}),s.jsx("option",{value:">=",children:"Greater or Equal (>=)"}),s.jsx("option",{value:"<=",children:"Less or Equal (<=)"}),s.jsx("option",{value:"contains",children:"Contains"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-orange-700 mb-1",children:"Right Value"}),s.jsx("input",{type:"text",value:((l=e.config)==null?void 0:l.rightValue)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,rightValue:o.target.value}})},placeholder:"WON",className:"w-full border border-orange-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-orange-500"})]})]})]})}function HE({data:e,id:t}){var n,r;return s.jsxs("div",{className:"px-4 py-3 bg-indigo-100 border-2 border-indigo-500 rounded-lg shadow-lg min-w-[200px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var l;return(l=e.onDelete)==null?void 0:l.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-indigo-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Set Variable"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-indigo-700 mb-1",children:"Variable Name"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.variableName)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,variableName:l.target.value}})},placeholder:"myVar",className:"w-full border border-indigo-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-indigo-700 mb-1",children:"Value"}),s.jsx("input",{type:"text",value:((r=e.config)==null?void 0:r.variableValue)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,variableValue:l.target.value}})},placeholder:"{{data.lead.name}}",className:"w-full border border-indigo-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-indigo-500"})]})]})]})}function GE({data:e,id:t}){var n,r;return s.jsxs("div",{className:"px-4 py-3 bg-pink-100 border-2 border-pink-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var l;return(l=e.onDelete)==null?void 0:l.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-pink-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Webhook"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-pink-700 mb-1",children:"URL"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.url)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,url:l.target.value}})},placeholder:"https://webhook.example.com",className:"w-full border border-pink-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-pink-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-pink-700 mb-1",children:"Method"}),s.jsxs("select",{value:((r=e.config)==null?void 0:r.method)||"POST",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,method:l.target.value}})},className:"w-full border border-pink-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-pink-500",children:[s.jsx("option",{children:"POST"}),s.jsx("option",{children:"PUT"}),s.jsx("option",{children:"PATCH"})]})]})]})]})}function YE({data:e,id:t}){var n,r,l;return s.jsxs("div",{className:"px-4 py-3 bg-emerald-100 border-2 border-emerald-500 rounded-lg shadow-lg min-w-[280px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var o;return(o=e.onDelete)==null?void 0:o.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-emerald-900 mb-2 flex items-center gap-2",children:[s.jsx(ma,{className:"w-5 h-5"}),s.jsx("span",{children:"ChatGPT"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-emerald-700 mb-1",children:"API Key"}),s.jsx("input",{type:"password",value:((n=e.config)==null?void 0:n.apiKey)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,apiKey:o.target.value}})},placeholder:"sk-... (or use env var)",className:"w-full border border-emerald-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-emerald-700 mb-1",children:"Model"}),s.jsxs("select",{value:((r=e.config)==null?void 0:r.model)||"gpt-3.5-turbo",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,model:o.target.value}})},className:"w-full border border-emerald-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-emerald-500",children:[s.jsx("option",{children:"gpt-3.5-turbo"}),s.jsx("option",{children:"gpt-4"}),s.jsx("option",{children:"gpt-4-turbo"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-emerald-700 mb-1",children:"Prompt"}),s.jsx("textarea",{value:((l=e.config)==null?void 0:l.prompt)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,prompt:o.target.value}})},placeholder:"Enter your prompt (use {{variables}} for interpolation)",className:"w-full border border-emerald-300 rounded px-2 py-1 text-xs bg-white h-24 focus:ring-2 focus:ring-emerald-500"})]})]})]})}function KE({data:e,id:t}){var n,r;return s.jsxs("div",{className:"px-4 py-3 bg-teal-100 border-2 border-teal-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var l;return(l=e.onDelete)==null?void 0:l.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-teal-900 mb-2 flex items-center gap-2",children:[s.jsx(vd,{className:"w-5 h-5"}),s.jsx("span",{children:"WhatsApp"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-teal-700 mb-1",children:"Phone Number"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.phoneNumber)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,phoneNumber:l.target.value}})},placeholder:"+1234567890 or {{data.lead.phone}}",className:"w-full border border-teal-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-teal-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-teal-700 mb-1",children:"Message"}),s.jsx("textarea",{value:((r=e.config)==null?void 0:r.message)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,message:l.target.value}})},placeholder:"Message content",className:"w-full border border-teal-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-teal-500"})]}),s.jsx("p",{className:"text-xs text-teal-600 italic",children:"Note: Requires WhatsApp API setup"})]})]})}function XE({data:e,id:t}){var n,r,l;return s.jsxs("div",{className:"px-4 py-3 bg-cyan-100 border-2 border-cyan-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var o;return(o=e.onDelete)==null?void 0:o.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-cyan-900 mb-2 flex items-center gap-2",children:[s.jsx(bd,{className:"w-5 h-5"}),s.jsx("span",{children:"Telegram"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-cyan-700 mb-1",children:"Bot Token"}),s.jsx("input",{type:"password",value:((n=e.config)==null?void 0:n.botToken)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,botToken:o.target.value}})},placeholder:"123456:ABC...",className:"w-full border border-cyan-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-cyan-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-cyan-700 mb-1",children:"Chat ID"}),s.jsx("input",{type:"text",value:((r=e.config)==null?void 0:r.chatId)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,chatId:o.target.value}})},placeholder:"123456789 or {{data.chatId}}",className:"w-full border border-cyan-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-cyan-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-cyan-700 mb-1",children:"Message"}),s.jsx("textarea",{value:((l=e.config)==null?void 0:l.message)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,message:o.target.value}})},placeholder:"Message content",className:"w-full border border-cyan-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-cyan-500"})]})]})]})}function qE({data:e,id:t}){var n,r,l;return s.jsxs("div",{className:"px-4 py-3 bg-violet-100 border-2 border-violet-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var o;return(o=e.onDelete)==null?void 0:o.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-violet-900 mb-2 flex items-center gap-2",children:[s.jsx(wd,{className:"w-5 h-5"}),s.jsx("span",{children:"Slack"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-violet-700 mb-1",children:"Webhook URL"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.webhookUrl)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,webhookUrl:o.target.value}})},placeholder:"https://hooks.slack.com/services/...",className:"w-full border border-violet-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-violet-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-violet-700 mb-1",children:"Channel (optional)"}),s.jsx("input",{type:"text",value:((r=e.config)==null?void 0:r.channel)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,channel:o.target.value}})},placeholder:"#general",className:"w-full border border-violet-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-violet-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-violet-700 mb-1",children:"Message"}),s.jsx("textarea",{value:((l=e.config)==null?void 0:l.message)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,message:o.target.value}})},placeholder:"Message content",className:"w-full border border-violet-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-violet-500"})]})]})]})}function QE({data:e,id:t}){var n,r;return s.jsxs("div",{className:"px-4 py-3 bg-rose-100 border-2 border-rose-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var l;return(l=e.onDelete)==null?void 0:l.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-rose-900 mb-2 flex items-center gap-2",children:[s.jsx(Nd,{className:"w-5 h-5"}),s.jsx("span",{children:"SMS"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-rose-700 mb-1",children:"Phone Number"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.phoneNumber)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,phoneNumber:l.target.value}})},placeholder:"+1234567890 or {{data.lead.phone}}",className:"w-full border border-rose-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-rose-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-rose-700 mb-1",children:"Message"}),s.jsx("textarea",{value:((r=e.config)==null?void 0:r.message)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,message:l.target.value}})},placeholder:"SMS content (160 chars max)",className:"w-full border border-rose-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-rose-500"})]}),s.jsx("p",{className:"text-xs text-rose-600 italic",children:"Note: Requires SMS API setup"})]})]})}function ZE({data:e,id:t}){var n,r;return s.jsxs("div",{className:"px-4 py-3 bg-gray-100 border-2 border-gray-500 rounded-lg shadow-lg min-w-[200px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var l;return(l=e.onDelete)==null?void 0:l.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Log"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Level"}),s.jsxs("select",{value:((n=e.config)==null?void 0:n.level)||"info",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,level:l.target.value}})},className:"w-full border border-gray-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-gray-500",children:[s.jsx("option",{value:"info",children:"Info"}),s.jsx("option",{value:"warn",children:"Warning"}),s.jsx("option",{value:"error",children:"Error"}),s.jsx("option",{value:"debug",children:"Debug"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Message"}),s.jsx("textarea",{value:((r=e.config)==null?void 0:r.message)||"",onChange:l=>{var o;return(o=e.onChange)==null?void 0:o.call(e,{config:{...e.config,message:l.target.value}})},placeholder:"Log message (use {{variables}} for interpolation)",className:"w-full border border-gray-300 rounded px-2 py-1 text-xs bg-white h-20 focus:ring-2 focus:ring-gray-500"})]})]})]})}function JE({data:e,id:t}){var n,r,l,o;return s.jsxs("div",{className:"px-4 py-3 bg-amber-100 border-2 border-amber-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var a;return(a=e.onDelete)==null?void 0:a.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Transform"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-amber-700 mb-1",children:"Transform Type"}),s.jsxs("select",{value:((n=e.config)==null?void 0:n.transformType)||"json",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,transformType:a.target.value}})},className:"w-full border border-amber-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-amber-500",children:[s.jsx("option",{value:"json",children:"Parse JSON"}),s.jsx("option",{value:"stringify",children:"Stringify JSON"}),s.jsx("option",{value:"uppercase",children:"Uppercase"}),s.jsx("option",{value:"lowercase",children:"Lowercase"}),s.jsx("option",{value:"trim",children:"Trim"}),s.jsx("option",{value:"replace",children:"Replace"})]})]}),((r=e.config)==null?void 0:r.transformType)==="replace"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-amber-700 mb-1",children:"Search"}),s.jsx("input",{type:"text",value:((l=e.config)==null?void 0:l.search)||"",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,search:a.target.value}})},placeholder:"Search pattern",className:"w-full border border-amber-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-amber-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-amber-700 mb-1",children:"Replace"}),s.jsx("input",{type:"text",value:((o=e.config)==null?void 0:o.replace)||"",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,replace:a.target.value}})},placeholder:"Replace with",className:"w-full border border-amber-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-amber-500"})]})]})]})]})}function eC({data:e,id:t}){var n,r,l;return s.jsxs("div",{className:"px-4 py-3 bg-sky-100 border-2 border-sky-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var o;return(o=e.onDelete)==null?void 0:o.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-sky-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Filter"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-sky-700 mb-1",children:"Field"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.filterField)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,filterField:o.target.value}})},placeholder:"fieldName or leave empty for array items",className:"w-full border border-sky-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-sky-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-sky-700 mb-1",children:"Operator"}),s.jsxs("select",{value:((r=e.config)==null?void 0:r.filterOperator)||"==",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,filterOperator:o.target.value}})},className:"w-full border border-sky-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-sky-500",children:[s.jsx("option",{value:"==",children:"Equals"}),s.jsx("option",{value:"!=",children:"Not Equals"}),s.jsx("option",{value:">",children:"Greater Than"}),s.jsx("option",{value:"<",children:"Less Than"}),s.jsx("option",{value:">=",children:"Greater or Equal"}),s.jsx("option",{value:"<=",children:"Less or Equal"}),s.jsx("option",{value:"contains",children:"Contains"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-sky-700 mb-1",children:"Value"}),s.jsx("input",{type:"text",value:((l=e.config)==null?void 0:l.filterValue)||"",onChange:o=>{var a;return(a=e.onChange)==null?void 0:a.call(e,{config:{...e.config,filterValue:o.target.value}})},placeholder:"Filter value",className:"w-full border border-sky-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-sky-500"})]})]})]})}function tC({data:e,id:t}){var n,r,l,o;return s.jsxs("div",{className:"px-4 py-3 bg-fuchsia-100 border-2 border-fuchsia-500 rounded-lg shadow-lg min-w-[250px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var a;return(a=e.onDelete)==null?void 0:a.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-fuchsia-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Loop"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-fuchsia-700 mb-1",children:"Loop Type"}),s.jsxs("select",{value:((n=e.config)==null?void 0:n.loopType)||"foreach",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,loopType:a.target.value}})},className:"w-full border border-fuchsia-300 rounded px-2 py-1 bg-white focus:ring-2 focus:ring-fuchsia-500",children:[s.jsx("option",{value:"foreach",children:"For Each"}),s.jsx("option",{value:"while",children:"While"})]})]}),((r=e.config)==null?void 0:r.loopType)==="while"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-fuchsia-700 mb-1",children:"Condition"}),s.jsx("input",{type:"text",value:((l=e.config)==null?void 0:l.condition)||"",onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,condition:a.target.value}})},placeholder:"true or {{variable}}",className:"w-full border border-fuchsia-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-fuchsia-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-fuchsia-700 mb-1",children:"Max Iterations"}),s.jsx("input",{type:"number",value:((o=e.config)==null?void 0:o.maxIterations)||100,onChange:a=>{var i;return(i=e.onChange)==null?void 0:i.call(e,{config:{...e.config,maxIterations:parseInt(a.target.value)||100}})},className:"w-full border border-fuchsia-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-fuchsia-500"})]})]})]})]})}function nC({data:e,id:t}){return s.jsxs("div",{className:"px-4 py-3 bg-lime-100 border-2 border-lime-500 rounded-lg shadow-lg min-w-[200px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var n;return(n=e.onDelete)==null?void 0:n.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top,id:"input1"}),s.jsx(re,{type:"target",position:G.Left,id:"input2",style:{top:"50%"}}),s.jsx(re,{type:"source",position:G.Bottom}),s.jsxs("div",{className:"font-semibold text-lime-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Merge"]}),s.jsx("p",{className:"text-xs text-lime-700",children:"Merges data from multiple inputs"})]})}function sC({data:e,id:t}){var n;return s.jsxs("div",{className:"px-4 py-3 bg-stone-100 border-2 border-stone-500 rounded-lg shadow-lg min-w-[200px] hover:shadow-xl transition-shadow relative group",children:[s.jsx("button",{onClick:()=>{var r;return(r=e.onDelete)==null?void 0:r.call(e,t)},className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 text-xs font-bold z-10",title:"Delete node",children:""}),s.jsx(re,{type:"target",position:G.Top}),s.jsx(re,{type:"source",position:G.Bottom,id:"output1"}),s.jsx(re,{type:"source",position:G.Right,id:"output2",style:{top:"50%"}}),s.jsxs("div",{className:"font-semibold text-stone-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""})," Split"]}),s.jsx("div",{className:"space-y-2 text-sm",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-stone-700 mb-1",children:"Split Field (optional)"}),s.jsx("input",{type:"text",value:((n=e.config)==null?void 0:n.splitField)||"",onChange:r=>{var l;return(l=e.onChange)==null?void 0:l.call(e,{config:{...e.config,splitField:r.target.value}})},placeholder:"fieldName",className:"w-full border border-stone-300 rounded px-2 py-1 text-xs bg-white focus:ring-2 focus:ring-stone-500"})]})})]})}const rC={trigger:OE,httpRequest:UE,email:WE,delay:BE,condition:VE,setVariable:HE,webhook:GE,chatgpt:YE,whatsapp:KE,telegram:XE,slack:qE,sms:QE,log:ZE,transform:JE,filter:eC,loop:tC,merge:nC,split:sC},lC=[{name:"Triggers",nodes:[{type:"trigger",label:"Trigger",icon:"",color:"purple"}]},{name:"Communication",nodes:[{type:"email",label:"Email",icon:"",color:"green"},{type:"whatsapp",label:"WhatsApp",icon:vd,color:"teal"},{type:"telegram",label:"Telegram",icon:bd,color:"cyan"},{type:"slack",label:"Slack",icon:wd,color:"violet"},{type:"sms",label:"SMS",icon:Nd,color:"rose"}]},{name:"AI & Integration",nodes:[{type:"chatgpt",label:"ChatGPT",icon:ma,color:"emerald"},{type:"httpRequest",label:"HTTP Request",icon:"",color:"blue"},{type:"webhook",label:"Webhook",icon:"",color:"pink"}]},{name:"Logic & Control",nodes:[{type:"condition",label:"Condition",icon:"",color:"orange"},{type:"delay",label:"Delay",icon:"",color:"yellow"},{type:"loop",label:"Loop",icon:"",color:"fuchsia"}]},{name:"Data",nodes:[{type:"setVariable",label:"Set Variable",icon:"",color:"indigo"},{type:"transform",label:"Transform",icon:"",color:"amber"},{type:"filter",label:"Filter",icon:"",color:"sky"},{type:"merge",label:"Merge",icon:"",color:"lime"},{type:"split",label:"Split",icon:"",color:"stone"},{type:"log",label:"Log",icon:"",color:"gray"}]}];function Rm(){const{id:e}=_a(),t=jt(),[n,r]=p.useState(""),[l,o]=p.useState(""),[a,i]=p.useState(!0),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,x]=p.useState(!0),[y,b,w]=hE([]),[g,h,v]=pE([]);p.useEffect(()=>{e&&N()},[e]);async function N(){if(e){f(!0);try{console.log("Loading workflow:",e);const C=await vN(e);if(console.log("Workflow loaded:",C),!C)throw new Error("Workflow not found");r(C.name||""),o(C.description||""),i(C.active!==void 0?C.active:!0);const k=(C.nodes||[]).map(I=>{var j,P,A,O,R;let $=(I.type||"").toLowerCase();$==="http_request"&&($="httpRequest"),$==="set_variable"&&($="setVariable");const F=I.nodeId||I.id||`node-${Date.now()}-${Math.random()}`;return{id:F,type:$||"httpRequest",position:{x:((j=I.position)==null?void 0:j.x)||I.positionX||0,y:((P=I.position)==null?void 0:P.y)||I.positionY||0},data:{label:I.label||((A=I.data)==null?void 0:A.label)||"",config:I.config||((O=I.data)==null?void 0:O.config)||{},triggerEvent:I.triggerEvent||((R=I.data)==null?void 0:R.triggerEvent)||null,onChange:_=>{b(D=>D.map(M=>M.id===F?{...M,data:{...M.data,..._}}:M))},onDelete:_=>{confirm("Are you sure you want to delete this node?")&&(b(D=>D.filter(M=>M.id!==_)),h(D=>D.filter(M=>M.source!==_&&M.target!==_)))}}}}),T=(C.edges||[]).map((I,$)=>{var A,O;const F=I.source||((A=I.sourceNode)==null?void 0:A.nodeId)||I.sourceNodeId||`source-${$}`,j=I.target||((O=I.targetNode)==null?void 0:O.nodeId)||I.targetNodeId||`target-${$}`;return{id:I.edgeId||I.id||`edge-${$}`,source:F,target:j,sourceHandle:I.sourceHandle||void 0,targetHandle:I.targetHandle||void 0,markerEnd:{type:ps.ArrowClosed}}}).filter(I=>I.source&&I.target);console.log("Converted nodes:",k.length,"edges:",T.length),b(k),h(T)}catch(C){console.error("Failed to load workflow:",C);const k=(C==null?void 0:C.message)||(C==null?void 0:C.toString())||"Unknown error";alert(`Failed to load workflow: ${k}`)}finally{f(!1)}}}const S=p.useCallback(C=>{if(C.source===C.target){alert("Cannot connect a node to itself");return}h(k=>i0({...C,markerEnd:{type:ps.ArrowClosed}},k))},[h]);function E(C){const k={id:`${C}-${Date.now()}`,type:C,position:{x:Math.random()*400+100,y:Math.random()*400+100},data:{label:C.charAt(0).toUpperCase()+C.slice(1).replace(/([A-Z])/g," $1"),config:{},onChange:T=>{b(I=>I.map($=>$.id===k.id?{...$,data:{...$.data,...T}}:$))},onDelete:T=>{confirm("Are you sure you want to delete this node?")&&(b(I=>I.filter($=>$.id!==T)),h(I=>I.filter($=>$.source!==T&&$.target!==T)))}}};b(T=>[...T,k])}async function L(){var k,T,I;if(!n.trim()){alert("Workflow name is required");return}const C=y.find($=>$.type==="trigger");if(!C||!((k=C.data)!=null&&k.triggerEvent)){alert("Please add a trigger node and select an event");return}u(!0);try{console.log("Saving workflow:",{name:n,nodes:y.length,edges:g.length});const $={name:n.trim(),description:(l==null?void 0:l.trim())||null,active:a,nodes:y.map(F=>{var P,A,O,R;let j=(F.type||"httpRequest").toUpperCase();return j==="HTTPREQUEST"&&(j="HTTP_REQUEST"),j==="SETVARIABLE"&&(j="SET_VARIABLE"),{id:F.id,nodeId:F.id,type:j,label:((P=F.data)==null?void 0:P.label)||"",position:F.position||{x:0,y:0},data:{label:((A=F.data)==null?void 0:A.label)||"",config:((O=F.data)==null?void 0:O.config)||{},triggerEvent:((R=F.data)==null?void 0:R.triggerEvent)||null}}}),edges:g.map((F,j)=>({id:F.id||`edge-${j}`,edgeId:F.id||`edge-${j}`,source:F.source,target:F.target,sourceNodeId:F.source,targetNodeId:F.target,sourceHandle:F.sourceHandle||null,targetHandle:F.targetHandle||null}))};if(console.log("Workflow data prepared:",$),e){const F=await wN(e,$);console.log("Workflow updated:",F)}else{const F=await bN($);console.log("Workflow created:",F),t(`/workflows/editor/${F.id}`)}alert("Workflow saved successfully!")}catch($){console.error("Failed to save workflow:",$);const F=($==null?void 0:$.message)||((I=(T=$==null?void 0:$.response)==null?void 0:T.data)==null?void 0:I.message)||($==null?void 0:$.toString())||"Unknown error";alert(`Failed to save workflow: ${F}`)}finally{u(!1)}}return d?s.jsx(Ee,{children:s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{children:"Loading workflow..."})})}):s.jsx(Ee,{children:s.jsxs("div",{className:"h-screen flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white border-b border-slate-200/60 p-6 shadow-sm backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"text",value:n,onChange:C=>r(C.target.value),placeholder:"Workflow Name",className:"text-3xl font-bold bg-transparent border-none outline-none w-full text-slate-900 placeholder-slate-400 focus:ring-0"}),s.jsx("input",{type:"text",value:l,onChange:C=>o(C.target.value),placeholder:"Description (optional)",className:"text-sm text-slate-500 bg-transparent border-none outline-none w-full mt-2 placeholder-slate-400 focus:ring-0"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",checked:a,onChange:C=>i(C.target.checked),className:"cursor-pointer w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-slate-900",children:"Active"})]}),s.jsx("button",{onClick:L,disabled:c,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-all font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:c?"Saving...":"Save Workflow"})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("button",{onClick:()=>x(!m),className:"text-sm text-slate-600 hover:text-slate-900 flex items-center gap-2",children:[m?"":""," Node Palette"]})}),m&&s.jsx("div",{className:"mt-4 space-y-4 max-h-80 overflow-y-auto custom-scrollbar pr-2",children:lC.map(C=>s.jsxs("div",{className:"border-b border-slate-200/60 pb-3 last:border-0",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-600 mb-3 uppercase tracking-wider",children:C.name}),s.jsx("div",{className:"flex gap-2.5 flex-wrap",children:C.nodes.map(k=>{const T={purple:"bg-purple-50 text-purple-700 border-purple-200 hover:bg-purple-100 hover:border-purple-300",green:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 hover:border-green-300",teal:"bg-teal-50 text-teal-700 border-teal-200 hover:bg-teal-100 hover:border-teal-300",cyan:"bg-cyan-50 text-cyan-700 border-cyan-200 hover:bg-cyan-100 hover:border-cyan-300",violet:"bg-violet-50 text-violet-700 border-violet-200 hover:bg-violet-100 hover:border-violet-300",rose:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 hover:border-rose-300",blue:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 hover:border-blue-300",emerald:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300",orange:"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100 hover:border-orange-300",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100 hover:border-yellow-300",indigo:"bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100 hover:border-indigo-300",pink:"bg-pink-50 text-pink-700 border-pink-200 hover:bg-pink-100 hover:border-pink-300",gray:"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100 hover:border-gray-300",amber:"bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100 hover:border-amber-300",sky:"bg-sky-50 text-sky-700 border-sky-200 hover:bg-sky-100 hover:border-sky-300",fuchsia:"bg-fuchsia-50 text-fuchsia-700 border-fuchsia-200 hover:bg-fuchsia-100 hover:border-fuchsia-300",lime:"bg-lime-50 text-lime-700 border-lime-200 hover:bg-lime-100 hover:border-lime-300",stone:"bg-stone-50 text-stone-700 border-stone-200 hover:bg-stone-100 hover:border-stone-300"};return s.jsxs("button",{onClick:()=>E(k.type),className:`px-4 py-2 text-sm rounded-lg border transition-all flex items-center gap-2 font-medium shadow-sm hover:shadow-md transform hover:-translate-y-0.5 ${T[k.color]||T.gray}`,title:`Add ${k.label} node`,children:[typeof k.icon=="string"?s.jsx("span",{children:k.icon}):s.jsx(k.icon,{className:"w-4 h-4"}),s.jsx("span",{children:k.label})]},k.type)})})]},C.name))})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsxs(B0,{nodes:y,edges:g,onNodesChange:w,onEdgesChange:v,onConnect:S,nodeTypes:rC,fitView:!0,connectionLineStyle:{stroke:"#3b82f6",strokeWidth:2},defaultEdgeOptions:{type:"smoothstep",animated:!0,markerEnd:{type:ps.ArrowClosed}},deleteKeyCode:"Delete",multiSelectionKeyCode:"Shift",children:[s.jsx(LE,{}),s.jsx(FE,{gap:20,size:1}),s.jsx(kE,{nodeColor:C=>({trigger:"#a855f7",email:"#10b981",httpRequest:"#3b82f6",condition:"#f97316",delay:"#eab308",setVariable:"#6366f1",webhook:"#ec4899"})[C.type||""]||"#6b7280",maskColor:"rgba(0, 0, 0, 0.1)"})]})})]})})}function oC(){const[e,t]=p.useState(null),n=[{id:1,title:"Understanding Workflows",description:"Learn how workflows work in Lite CRM",content:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-900 mb-2",children:s.jsx("strong",{children:"What are Workflows?"})}),s.jsx("p",{className:"text-sm text-blue-800",children:"Workflows are automation scripts that run automatically when specific events occur in your CRM. For example, when a new lead is created, a workflow can send an email notification or update an external system."})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Workflow Setup Process"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-slate-700 space-y-2 ml-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Administrator creates workflows"})," - Workflows are set up by your system administrator"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Workflows are available"})," - Once created, workflows appear in your workflow list"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"You configure event mapping"})," - Use the Configuration page to connect workflows to CRM events"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Workflows run automatically"})," - When events occur, workflows execute automatically"]})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-yellow-900",children:[s.jsx("strong",{children:"Note:"})," If you need to create or modify workflows, please contact your administrator. You can configure which events trigger existing workflows using the Configuration page."]})})]})},{id:2,title:"Configure Workflow Event Mapping",description:"Connect workflows to CRM events",content:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"font-medium text-slate-900 mb-3",children:"Step 2.1: Go to Workflow Configuration"}),s.jsx("p",{className:"text-sm text-slate-700 mb-3",children:"Click the button below to open the Workflow Configuration page where you can connect workflows to CRM events."}),s.jsx(se,{to:"/workflows/configuration",className:"inline-block px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Open Workflow Configuration "})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Step 2.2: Add Configuration"}),s.jsxs("ul",{className:"list-decimal list-inside text-sm text-slate-700 space-y-1 ml-2",children:[s.jsxs("li",{children:["Click ",s.jsx("strong",{children:'"+ Add Configuration"'})," button"]}),s.jsx("li",{children:'Select the event you want to trigger (e.g., "Lead Created")'}),s.jsx("li",{children:"Enter the workflow ID (provided by your administrator) or use the custom webhook URL"}),s.jsx("li",{children:"Choose whether to use a custom webhook URL or default format"}),s.jsxs("li",{children:["Click ",s.jsx("strong",{children:'"Save Configuration"'})]}),s.jsx("li",{children:"The configuration is active by default - toggle it off if you want to disable it"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:[s.jsx("strong",{children:"Understanding the Data:"})," When a workflow is triggered, it receives data in this format:"]}),s.jsx("pre",{className:"bg-white rounded p-3 text-xs overflow-x-auto border border-blue-200",children:`{
  "event": "lead.created",
  "workspaceId": "workspace-123",
  "data": {
    "lead": {
      "id": "lead-456",
      "name": "John Doe",
      "email": "john@example.com",
      "stage": "NEW",
      ...
    }
  }
}`})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-green-900",children:[s.jsx("strong",{children:" That's it!"})," Your workflow is now connected. When the selected event occurs in Lite CRM, the workflow will automatically run."]})})]})},{id:3,title:"Available CRM Events",description:"Events you can connect workflows to",content:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"font-medium text-slate-900 mb-3",children:"Lead Events"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-slate-50 rounded p-3 border border-slate-200",children:[s.jsx("code",{className:"text-sm font-mono text-blue-600",children:"lead.created"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Triggered when a new lead is created in your CRM"})]}),s.jsxs("div",{className:"bg-slate-50 rounded p-3 border border-slate-200",children:[s.jsx("code",{className:"text-sm font-mono text-blue-600",children:"lead.updated"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Triggered when lead details are updated"})]}),s.jsxs("div",{className:"bg-slate-50 rounded p-3 border border-slate-200",children:[s.jsx("code",{className:"text-sm font-mono text-blue-600",children:"lead.stage.changed"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Triggered when lead stage changes (NEW  CONTACTED  WON/LOST)"})]}),s.jsxs("div",{className:"bg-slate-50 rounded p-3 border border-slate-200",children:[s.jsx("code",{className:"text-sm font-mono text-blue-600",children:"lead.assigned"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Triggered when a lead is assigned to a user"})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"font-medium text-slate-900 mb-3",children:"Task Events"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-slate-50 rounded p-3 border border-slate-200",children:[s.jsx("code",{className:"text-sm font-mono text-blue-600",children:"task.created"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Triggered when a new task is created"})]}),s.jsxs("div",{className:"bg-slate-50 rounded p-3 border border-slate-200",children:[s.jsx("code",{className:"text-sm font-mono text-blue-600",children:"task.completed"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Triggered when a task is marked as completed"})]})]})]})]})},{id:4,title:"Testing Your Configuration",description:"Verify your workflow configuration is working",content:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"font-medium text-slate-900 mb-3",children:"Step 4.1: Test from Lite CRM"}),s.jsxs("ul",{className:"list-decimal list-inside text-sm text-slate-700 space-y-2 ml-2",children:[s.jsx("li",{children:"Go to Lite CRM Dashboard"}),s.jsxs("li",{children:["Create a new lead (if you configured ",s.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"lead.created"})," event)"]}),s.jsxs("li",{children:["Or change a lead's stage (if you configured ",s.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"lead.stage.changed"})," event)"]}),s.jsx("li",{children:"The workflow should automatically execute"}),s.jsx("li",{children:"Check with your administrator to verify the workflow executed successfully"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:[s.jsx("strong",{children:"Workflow Execution:"})," Workflows execute automatically in the background. You won't see execution status in the Lite CRM UI - contact your administrator if you need to verify execution."]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-green-900",children:[s.jsx("strong",{children:" Success!"})," If your workflow executes correctly, it will continue to run automatically whenever the configured event occurs in Lite CRM."]})})]})}];return s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Workflow Setup Guide"}),s.jsx(se,{to:"/workflows/configuration",className:"text-sm text-blue-600 hover:text-blue-700",children:"Go to Configuration "})]}),s.jsx("p",{className:"text-sm text-slate-600",children:"Complete guide to configuring workflows and connecting them to Lite CRM events"})]}),s.jsxs("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:[s.jsx("p",{className:"text-sm text-blue-900 mb-2",children:s.jsx("strong",{children:"How It Works:"})}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-800 space-y-1 ml-2",children:[s.jsx("li",{children:"Workflows are created by your administrator"}),s.jsx("li",{children:"Workflows become available in your workflow list"}),s.jsx("li",{children:"You configure which CRM events trigger which workflows"}),s.jsx("li",{children:"Workflows run automatically when events occur"})]})]}),s.jsx("div",{className:"space-y-4",children:n.map(r=>s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white overflow-hidden",children:[s.jsxs("button",{onClick:()=>t(e===r.id?null:r.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-600 font-semibold text-sm",children:r.id}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:r.title}),s.jsx("p",{className:"text-sm text-slate-600",children:r.description})]})]}),s.jsx("svg",{className:`w-5 h-5 text-slate-400 transition-transform ${e===r.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e===r.id&&s.jsx("div",{className:"border-t border-slate-200 p-6 bg-slate-50",children:r.content})]},r.id))}),s.jsxs("div",{className:"rounded-lg bg-slate-50 border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold mb-4 text-slate-900",children:"Available CRM Events"}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"You can connect workflows to any of these events. Each event sends different data to your workflow."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{event:"lead.created",desc:"When a new lead is created"},{event:"lead.updated",desc:"When lead details are updated"},{event:"lead.stage.changed",desc:"When lead stage changes (NEW  CONTACTED  WON/LOST)"},{event:"lead.assigned",desc:"When a lead is assigned to a user"},{event:"task.created",desc:"When a new task is created"},{event:"task.completed",desc:"When a task is marked as completed"}].map(r=>s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsx("code",{className:"text-sm font-mono bg-slate-100 px-2 py-1 rounded text-blue-600",children:r.event})}),s.jsx("p",{className:"text-sm text-slate-600",children:r.desc})]},r.event))})]}),s.jsxs("div",{className:"rounded-lg bg-white border border-slate-200 p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-slate-900",children:"Next Steps"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx(se,{to:"/workflows/configuration",className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Configure Workflows "}),s.jsx(se,{to:"/workflows",className:"px-4 py-2 text-sm rounded border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium",children:"View Workflows"})]})]})]})})}const Dm=[{value:"lead.created",label:"Lead Created",description:"When a new lead is created"},{value:"lead.updated",label:"Lead Updated",description:"When lead details are updated"},{value:"lead.stage.changed",label:"Lead Stage Changed",description:"When lead stage changes (NEW  CONTACTED  WON/LOST)"},{value:"lead.assigned",label:"Lead Assigned",description:"When a lead is assigned to a user"},{value:"task.created",label:"Task Created",description:"When a new task is created"},{value:"task.completed",label:"Task Completed",description:"When a task is marked as completed"}];function aC(){const[e,t]=p.useState([]),[n,r]=p.useState(!1),[l,o]=p.useState(null),[a,i]=p.useState(null),[c,u]=p.useState(!1),[d,f]=p.useState({event:"",workflowId:"",useCustomUrl:!1,webhookUrl:"",active:!0});async function m(){r(!0),i(null);try{const h=await V("/workflows/config");t(h.configurations||[])}catch(h){console.error("Failed to load configurations:",h),i("Failed to load workflow configurations")}finally{r(!1)}}async function x(h,v,N,S,E){o(h),i(null);try{await V("/workflows/config",{method:"PUT",body:JSON.stringify({event:h,workflowId:v,useCustomUrl:N,webhookUrl:N?S:null,active:E})}),await m(),u(!1),f({event:"",workflowId:"",useCustomUrl:!1,webhookUrl:"",active:!0})}catch(L){i((L==null?void 0:L.message)||"Failed to save configuration")}finally{o(null)}}async function y(h){if(confirm(`Are you sure you want to remove the workflow configuration for "${h}"?`)){o(h),i(null);try{await V(`/workflows/config/${encodeURIComponent(h)}`,{method:"DELETE"}),await m()}catch(v){i((v==null?void 0:v.message)||"Failed to delete configuration")}finally{o(null)}}}async function b(h){await x(h.event,h.workflowId,h.useCustomUrl,h.webhookUrl,!h.active)}p.useEffect(()=>{m()},[]);const w=new Set(e.map(h=>h.event)),g=Dm.filter(h=>!w.has(h.value));return s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Workflow Configuration"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Connect CRM events to automation workflows"})]}),s.jsx(se,{to:"/workflows/setup-guide",className:"text-sm text-blue-600 hover:text-blue-700",children:" Setup Guide "})]}),s.jsxs("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:[s.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:[s.jsx("strong",{children:"How It Works:"})," Configure which workflows should run when events occur in your CRM. When a configured event happens (like a lead being created), Lite CRM automatically triggers the connected workflow."]}),s.jsxs("p",{className:"text-xs text-blue-700",children:["Don't have workflow IDs yet? ",s.jsx(se,{to:"/workflows/setup-guide",className:"underline font-medium",children:"Check the setup guide"})," to learn how to create workflows and get their IDs."]})]}),a&&s.jsx("div",{className:"rounded-lg bg-red-50 border border-red-200 p-4",children:s.jsx("p",{className:"text-sm text-red-800",children:a})}),c&&g.length>0&&s.jsxs("div",{className:"rounded-lg bg-white border border-slate-200 p-4",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Add Workflow Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Event"}),s.jsxs("select",{value:d.event,onChange:h=>f({...d,event:h.target.value}),className:"w-full rounded border border-slate-300 px-3 py-2 text-sm",children:[s.jsx("option",{value:"",children:"Select an event..."}),g.map(h=>s.jsxs("option",{value:h.value,children:[h.label," - ",h.description]},h.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Workflow ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:d.workflowId,onChange:h=>f({...d,workflowId:h.target.value}),placeholder:"e.g., kSeWTMmHdaA134gzYQVwq",className:"w-full rounded border border-slate-300 px-3 py-2 text-sm font-mono"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Get this from your administrator. The workflow ID is typically a long alphanumeric string."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 mb-3",children:[s.jsx("input",{type:"checkbox",checked:d.useCustomUrl,onChange:h=>f({...d,useCustomUrl:h.target.checked,webhookUrl:h.target.checked?d.webhookUrl:""}),className:"rounded border-slate-300"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Use custom webhook URL"})]}),d.useCustomUrl?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Custom Webhook URL ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:d.webhookUrl,onChange:h=>f({...d,webhookUrl:h.target.value}),placeholder:"e.g., http://localhost:5678/webhook-test/lead-created",className:"w-full rounded border border-slate-300 px-3 py-2 text-sm font-mono"}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Enter the full webhook URL (get this from your administrator). Example: ",s.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"https://your-workflow-server.com/webhook-test/lead-created"})]})]}):s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:"Default URL format:"})," Will be automatically constructed using the workflow ID"]}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"The webhook URL will be automatically generated using the workflow ID you provide above."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>x(d.event,d.workflowId,d.useCustomUrl,d.webhookUrl||null,d.active),disabled:!d.event||!d.workflowId||d.useCustomUrl&&!d.webhookUrl||l!==null,className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":"Save Configuration"}),s.jsx("button",{onClick:()=>{u(!1),f({event:"",workflowId:"",useCustomUrl:!1,webhookUrl:"",active:!0})},className:"px-4 py-2 text-sm rounded border border-slate-300 text-slate-700 hover:bg-slate-50",children:"Cancel"})]})]})]}),n?s.jsx("div",{className:"rounded-lg bg-white border border-slate-200 p-8 text-center",children:s.jsx("p",{className:"text-slate-500",children:"Loading configurations..."})}):e.length===0?s.jsx("div",{className:"rounded-lg bg-white border border-slate-200 p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No workflow configurations yet"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Get started by connecting your first CRM event to a workflow"}),g.length>0?s.jsx("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"+ Add Configuration"}):s.jsx(se,{to:"/workflows/setup-guide",className:"inline-flex items-center px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:" Learn How to Set Up Workflows"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Configured Workflows"}),g.length>0&&s.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"+ Add Configuration"})]}),s.jsx("div",{className:"space-y-3",children:e.map(h=>{const v=Dm.find(N=>N.value===h.event);return s.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:(v==null?void 0:v.label)||h.event}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:h.active,onChange:()=>b(h),disabled:l===h.event,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),s.jsx("span",{className:"ml-3 text-sm text-slate-600",children:h.active?"Active":"Inactive"})]})]}),s.jsx("p",{className:"text-sm text-slate-600 mb-2",children:(v==null?void 0:v.description)||h.event}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Workflow ID: "}),s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded font-mono text-xs",children:h.workflowId})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Webhook URL: "}),h.useCustomUrl&&h.webhookUrl?s.jsx("code",{className:"bg-blue-50 px-2 py-1 rounded font-mono text-xs text-blue-700 border border-blue-200 break-all",children:h.webhookUrl}):s.jsxs("code",{className:"bg-slate-100 px-2 py-1 rounded font-mono text-xs text-slate-700",children:["/webhook/",h.workflowId]}),s.jsxs("span",{className:"text-xs text-slate-400 ml-2",children:["(",h.useCustomUrl?"custom":"default",")"]})]})]})]}),s.jsx("button",{onClick:()=>y(h.event),disabled:l===h.event,className:"ml-4 px-3 py-1 text-sm rounded border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]})},h.id)})})]}),s.jsxs("div",{className:"rounded-lg bg-slate-50 border border-slate-200 p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-slate-900",children:"Need Help?"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx(se,{to:"/workflows/setup-guide",className:"px-4 py-2 text-sm rounded border border-slate-300 text-slate-700 hover:bg-white font-medium",children:" Setup Guide"}),s.jsx(se,{to:"/workflows",className:"px-4 py-2 text-sm rounded border border-slate-300 text-slate-700 hover:bg-white font-medium",children:"View Workflows"})]})]})]})})}function iC(){return s.jsx(Ee,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/20 to-indigo-50/20",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx(Es,{size:"lg"})}),s.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 bg-clip-text text-transparent mb-6",children:"Documentation"}),s.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Complete guide to using Lite CRM effectively - Your all-in-one CRM solution"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-8 mb-16 shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Table of Contents"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("a",{href:"#overview",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"1."})," Overview"]}),s.jsxs("a",{href:"#getting-started",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"2."})," Getting Started"]}),s.jsxs("a",{href:"#lead-management",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"3."})," Lead Management"]}),s.jsxs("a",{href:"#pipeline-kanban",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"4."})," Pipeline & Kanban"]}),s.jsxs("a",{href:"#calendar-tasks",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"5."})," Calendar & Tasks"]}),s.jsxs("a",{href:"#reports-analytics",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"6."})," Reports & Analytics"]}),s.jsxs("a",{href:"#workflow-automation",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"7."})," Workflow Automation"]}),s.jsxs("a",{href:"#team-collaboration",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"8."})," Team Collaboration"]}),s.jsxs("a",{href:"#integrations",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"9."})," Integrations"]}),s.jsxs("a",{href:"#api-reference",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:"10."})," API Reference"]})]})]}),s.jsx("section",{id:"overview",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"1. Overview"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("p",{className:"text-lg text-slate-700 mb-6 leading-relaxed",children:"Lite CRM is a modern, powerful Customer Relationship Management system designed for businesses of all sizes. It combines essential CRM features with native workflow automation, multi-channel messaging, and advanced analytics - all without external dependencies."}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Key Features"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Unlimited Lead Management"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Track and manage unlimited leads through your entire sales pipeline"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Native Workflow Automation"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Built-in workflow engine - no external dependencies required"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Multi-Channel Messaging"}),s.jsx("p",{className:"text-sm text-slate-600",children:"WhatsApp, Telegram, SMS, Email - all integrated natively"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Advanced Analytics"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Comprehensive reports and insights into your sales performance"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Team Collaboration"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Invite team members, assign leads, and collaborate seamlessly"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Custom Workflows"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Create unlimited custom workflows with visual editor"})]})]})]})]})]})}),s.jsx("section",{id:"getting-started",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"2. Getting Started"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Creating Your Account"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Navigate to the signup page"}),s.jsx("li",{children:"Enter your name, email, and password"}),s.jsx("li",{children:"Choose between Individual or Organization account type"}),s.jsx("li",{children:"Complete the signup process"}),s.jsx("li",{children:"You'll be redirected to the Dashboard"})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Understanding the Dashboard"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"The Dashboard is your central hub where you can:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsx("li",{children:"View all your leads in one place with advanced filtering"}),s.jsx("li",{children:"See real-time statistics (Total Leads, New, Contacted, Won, Lost)"}),s.jsx("li",{children:"Create new leads quickly with the inline form"}),s.jsx("li",{children:"Export leads to CSV"}),s.jsx("li",{children:"Perform bulk operations (update, delete, assign)"}),s.jsx("li",{children:"Use saved filter presets for quick access"})]})]})]})}),s.jsx("section",{id:"lead-management",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"3. Lead Management"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Adding a New Lead"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Go to the Dashboard"}),s.jsx("li",{children:'Fill in the "Add New Lead" form at the top'}),s.jsx("li",{children:"Enter the lead's name (required)"}),s.jsx("li",{children:"Optionally add email, phone, company, source, and region"}),s.jsx("li",{children:'Click "Add Lead" button'}),s.jsx("li",{children:"The lead will appear in your leads table immediately"})]}),s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mt-6 rounded-r-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," Email and phone are optional, but at least one contact method is recommended for follow-ups."]})}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Bulk Operations"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Select multiple leads and perform bulk actions:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Bulk Update:"})," Change stage, source, region, or assign owner for multiple leads"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Bulk Delete:"})," Remove multiple leads at once"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Bulk Assign:"})," Assign multiple leads to a team member"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Export to CSV:"})," Export filtered leads to CSV file"]})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Saved Filters"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Save frequently used filter combinations for quick access:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Apply your desired filters (stage, source, region, search)"}),s.jsx("li",{children:'Click "Save Filter" button'}),s.jsx("li",{children:'Give it a name (e.g., "Hot Leads", "Q4 Prospects")'}),s.jsx("li",{children:"Access saved filters from the dropdown menu"})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Custom Fields"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Add custom fields to capture additional lead information:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsx("li",{children:"Go to Settings  Custom Fields"}),s.jsx("li",{children:"Create fields of different types: text, number, date, select, boolean"}),s.jsx("li",{children:"Custom fields appear on lead detail pages"}),s.jsx("li",{children:"Use custom fields in workflows and reports"})]})]})]})}),s.jsx("section",{id:"pipeline-kanban",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"4. Pipeline & Kanban Board"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Kanban Board View"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Visualize your sales pipeline with the Kanban board:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsx("li",{children:'Access from the "Pipeline" link in the navigation'}),s.jsx("li",{children:"See all leads organized by stage (NEW, CONTACTED, WON, LOST)"}),s.jsx("li",{children:"Drag and drop leads between stages"}),s.jsx("li",{children:"View lead details by clicking on any card"}),s.jsx("li",{children:"See assigned owner on each card"})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Managing Pipeline Stages"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Update lead stages directly from the Kanban board:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Drag a lead card to a different stage column"}),s.jsx("li",{children:"The lead's stage will update automatically"}),s.jsx("li",{children:"Workflows can trigger on stage changes"})]})]})]})}),s.jsx("section",{id:"calendar-tasks",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"5. Calendar & Tasks"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Calendar View"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"View all tasks on a calendar:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsx("li",{children:'Access from the "Calendar" link in the navigation'}),s.jsx("li",{children:"See all tasks organized by due date"}),s.jsx("li",{children:"Filter by date range"}),s.jsx("li",{children:"Click on tasks to view details"})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Creating a Task"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Navigate to a lead's detail page"}),s.jsx("li",{children:'Scroll to the "Tasks" section'}),s.jsx("li",{children:'Click "Add Task" button'}),s.jsx("li",{children:"Fill in task title, due date, and optional notes"}),s.jsx("li",{children:'Click "Create Task"'})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"File Attachments"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Attach files to leads:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Go to a lead's detail page"}),s.jsx("li",{children:'Scroll to the "Attachments" section'}),s.jsx("li",{children:'Click "Upload File"'}),s.jsx("li",{children:"Select a file from your device"}),s.jsx("li",{children:"Files are stored securely and accessible anytime"})]})]})]})}),s.jsx("section",{id:"reports-analytics",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"6. Reports & Analytics"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-slate-700 mb-4",children:'Access comprehensive analytics from the "Reports" page:'}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Lead Statistics:"})," Total leads, leads by stage, conversion rates"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Source Analysis:"})," See which sources generate the most leads"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Regional Insights:"})," Geographic distribution of leads"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Team Performance:"})," Track individual and team metrics"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Time-based Trends:"})," Monthly and yearly trends"]})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Exporting Reports"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Export lead data for external analysis:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Apply filters on the Dashboard"}),s.jsx("li",{children:'Click "Export to CSV" button'}),s.jsx("li",{children:"CSV file will download with all filtered leads"}),s.jsx("li",{children:"Open in Excel, Google Sheets, or any spreadsheet tool"})]})]})]})}),s.jsx("section",{id:"workflow-automation",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"7. Workflow Automation"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Introduction to Workflows"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Lite CRM includes a powerful built-in workflow automation system that allows you to automate repetitive tasks and integrate with various services without any external dependencies."}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Creating Your First Workflow"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:'Navigate to "Workflows" from the main menu'}),s.jsx("li",{children:'Click "Create Workflow" or "Edit" on an existing workflow'}),s.jsx("li",{children:"You'll see the visual workflow editor with a node palette"}),s.jsx("li",{children:'Add a "Trigger" node and select an event (e.g., "Lead Created")'}),s.jsxs("li",{children:["Add action nodes from the palette:",s.jsxs("ul",{className:"list-disc list-inside ml-6 mt-2 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Communication:"})," Email, WhatsApp, Telegram, Slack, SMS"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"AI & Integration:"})," ChatGPT, HTTP Request, Webhook"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Logic & Control:"})," Condition, Delay, Loop"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data:"})," Set Variable, Transform, Filter, Merge, Split, Log"]})]})]}),s.jsx("li",{children:"Connect nodes by dragging from the blue handle (bottom) to green handle (top)"}),s.jsx("li",{children:"Configure each node by clicking on it and filling in the required fields"}),s.jsxs("li",{children:["Use variables like ",s.jsx("code",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-sm",children:"{{data.lead.email}}"})," for dynamic data"]}),s.jsx("li",{children:'Save your workflow and toggle it to "Active"'})]}),s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mt-6 rounded-r-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Tip:"})," Before using channels like WhatsApp, Telegram, or ChatGPT, configure your API credentials in Settings  Integrations."]})}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Available Workflow Triggers"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 ml-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Lead Created:"})," Triggered when a new lead is added"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Lead Updated:"})," Triggered when lead details are modified"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Lead Stage Changed:"})," Triggered when a lead's stage changes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Lead Assigned:"})," Triggered when a lead is assigned to a user"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Task Created:"})," Triggered when a new task is created"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Task Completed:"})," Triggered when a task is marked as complete"]})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Viewing Workflow Executions"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Monitor your workflow executions from the Workflows page:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:'Go to "Workflows" page'}),s.jsx("li",{children:'Click "View Executions" on any workflow'}),s.jsx("li",{children:"See execution history with status (SUCCESS, FAILED, RUNNING, PENDING)"}),s.jsx("li",{children:"View input data (what triggered the workflow) and output data (results)"}),s.jsx("li",{children:"Check detailed error messages for failed executions"})]})]})]})}),s.jsx("section",{id:"team-collaboration",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"8. Team Collaboration"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Inviting Team Members (Admin Only)"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:'Navigate to the "Team" page from the main menu'}),s.jsx("li",{children:'Click "Invite User" button'}),s.jsx("li",{children:"Enter the email address of the person you want to invite"}),s.jsx("li",{children:"Select their role (ADMIN or MEMBER)"}),s.jsx("li",{children:'Click "Send Invite"'}),s.jsx("li",{children:"The invited user will receive an email with an acceptance link"})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Email Templates"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Create reusable email templates:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:"Go to Settings  Email Templates"}),s.jsx("li",{children:'Click "Create Template"'}),s.jsxs("li",{children:["Add subject and body with variables (e.g., ","{{lead.name}}",")"]}),s.jsx("li",{children:"Use templates when sending emails from lead detail pages"})]})]})]})}),s.jsx("section",{id:"integrations",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"9. Integrations"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Configuring Integrations"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"Before using communication channels or AI features, configure your API credentials:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-slate-700 ml-4",children:[s.jsx("li",{children:'Go to "Settings"  "Integrations" from the main menu'}),s.jsx("li",{children:'Click "Configure" on the integration you want to set up'}),s.jsx("li",{children:"Enter your API credentials (e.g., WhatsApp API key, Telegram bot token, ChatGPT API key)"}),s.jsx("li",{children:'Click "Save" - credentials are encrypted and stored securely'}),s.jsx("li",{children:"You can now use these integrations in your workflows without entering credentials each time"})]}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Available Integrations"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"WhatsApp"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Meta WhatsApp Business API integration for sending messages"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Telegram"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Telegram Bot API for automated messaging"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"SMS"}),s.jsx("p",{className:"text-sm text-slate-600",children:"SMS gateway integration for text messaging"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"ChatGPT"}),s.jsx("p",{className:"text-sm text-slate-600",children:"OpenAI API for AI-powered responses and content generation"})]})]})]})]})}),s.jsx("section",{id:"api-reference",className:"mb-20",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-xl p-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"10. API Reference"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-6 mb-4",children:"Authentication"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"All API requests require authentication using a JWT token. Include the token in the Authorization header:"}),s.jsx("div",{className:"bg-slate-900 text-slate-100 rounded-lg p-4 mt-4 font-mono text-sm overflow-x-auto",children:s.jsx("code",{children:"Authorization: Bearer YOUR_JWT_TOKEN"})}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Base URL"}),s.jsx("div",{className:"bg-slate-900 text-slate-100 rounded-lg p-4 mt-4 font-mono text-sm overflow-x-auto",children:s.jsx("code",{children:"https://your-domain.com/api"})}),s.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mt-8 mb-4",children:"Key Endpoints"}),s.jsxs("div",{className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-6",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3 text-lg",children:"Leads"}),s.jsxs("ul",{className:"space-y-2 text-sm text-slate-700 font-mono",children:[s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"GET /leads"})," - List all leads"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"POST /leads"})," - Create a new lead"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"GET /leads/:id"})," - Get lead details"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"PATCH /leads/:id"})," - Update lead"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"DELETE /leads/:id"})," - Delete lead"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"GET /leads/export/csv"})," - Export leads to CSV"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"POST /leads/bulk/update"})," - Bulk update leads"]})]})]}),s.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-6",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3 text-lg",children:"Workflows"}),s.jsxs("ul",{className:"space-y-2 text-sm text-slate-700 font-mono",children:[s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"GET /workflows"})," - List all workflows"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"POST /workflows"})," - Create workflow"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"GET /workflows/:id"})," - Get workflow details"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"GET /workflows/:id/executions"})," - Get workflow executions"]})]})]})]})]})]})}),s.jsx("div",{className:"mt-16 pt-8 border-t-2 border-slate-200",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-center text-white",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Need More Help?"}),s.jsx("p",{className:"text-blue-100 mb-6",children:"Explore our resources or get in touch"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[s.jsx(se,{to:"/workflows/setup-guide",className:"px-6 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 font-semibold transition-colors",children:"Workflow Setup Guide"}),s.jsx(se,{to:"/upgrade",className:"px-6 py-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 font-semibold transition-colors",children:"View Pricing"})]})]})})]})})})}async function cC(){return V("/integrations")}async function uC(e){return V(`/integrations/${e}`)}async function dC(e,t,n,r=!0){return V("/integrations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,name:t,config:n,enabled:r})})}async function Im(e,t){return V(`/integrations/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function fC(e){return V(`/integrations/${e}`,{method:"DELETE"})}async function mC(){return V("/integrations/email")}async function hC(e){return V("/integrations/email",{method:"PUT",body:JSON.stringify(e)})}async function pC(){return V("/integrations/email/test",{method:"POST"})}const zi={WHATSAPP:{name:"WhatsApp",icon:vd,description:"Send WhatsApp messages via Meta WhatsApp Business API. Get your credentials from Meta Business Suite > WhatsApp Manager.",fields:[{key:"accessToken",label:"Access Token",type:"password",placeholder:"EAAVkoZCaSqs8BQWvkh7cXMtANNFPFGYZBXw...",required:!0,help:"Generate from Meta Developers > Your App > WhatsApp > API Setup > Access Token. Click 'Generate access token' and select your WhatsApp Business account.",example:"EAAVkoZCaSqs8BQWvkh7cXMtANNFPFGYZBXw8618PKK0ZAkXHBXjyaPh5duW3iw6fEWwnGQzjZB0qA0vX8JZCH6ziCZAZCJdZCvZAWJ7X3cj9mMmL9E2aqDOtSX3W9TyQNViZCuDNy3GC4x7KhbjEqArI2WaGFXsRAnt8av7ZCF0yRRKFfpgehaNZAnIftEbZAivT0XZA4p9XVgayDAkkveXQk1RXXjxZAADreEawOencQqTkSZByJnoajc3cavw8FAst1rHkzAivtnqPXfQDv6ZCLRa70kERimohn"},{key:"phoneNumberId",label:"Phone Number ID",type:"text",placeholder:"890306300839946",required:!0,help:"NOT your phone number! This is a Meta-assigned numeric ID. Find it in Meta Business Suite > WhatsApp Manager > Phone Numbers > Your number > Details, or in the API Setup page under 'From' section.",example:"890306300839946"},{key:"businessAccountId",label:"WhatsApp Business Account ID",type:"text",placeholder:"877118511632210",required:!1,help:"Your WhatsApp Business Account ID. Find it in Meta Business Suite > WhatsApp Manager > Settings > Business Settings, or in the API Setup page.",example:"877118511632210"},{key:"apiVersion",label:"Graph API Version",type:"text",placeholder:"v22.0",required:!1,help:"Meta Graph API version. Default is v22.0. Check Meta Developers documentation for the latest version.",example:"v22.0"}]},TELEGRAM:{name:"Telegram",icon:bd,description:"Send messages via Telegram Bot",fields:[{key:"botToken",label:"Bot Token",type:"password",placeholder:"123456:ABC...",required:!0}]},SLACK:{name:"Slack",icon:wd,description:"Send messages to Slack channels",fields:[{key:"webhookUrl",label:"Webhook URL",type:"text",placeholder:"https://hooks.slack.com/services/...",required:!0}]},SMS:{name:"SMS",icon:Nd,description:"Send SMS messages via Twilio or other providers",fields:[{key:"provider",label:"Provider",type:"select",placeholder:"Select provider",required:!0},{key:"accountSid",label:"Account SID",type:"text",placeholder:"AC...",required:!0},{key:"authToken",label:"Auth Token",type:"password",placeholder:"Your auth token",required:!0},{key:"fromNumber",label:"From Number",type:"text",placeholder:"+1234567890",required:!0}]},CHATGPT:{name:"ChatGPT",icon:ma,description:"Use OpenAI's ChatGPT API",fields:[{key:"apiKey",label:"API Key",type:"password",placeholder:"sk-...",required:!0}]},OPENAI:{name:"OpenAI",icon:ma,description:"Use OpenAI API",fields:[{key:"apiKey",label:"API Key",type:"password",placeholder:"sk-...",required:!0}]}};function xC(){const[e,t]=p.useState("integrations"),[n,r]=p.useState([]),[l,o]=p.useState(!0),[a,i]=p.useState(null),[c,u]=p.useState({}),[d,f]=p.useState(!1),[m,x]=p.useState(null),[y,b]=p.useState(!0),[w,g]=p.useState(!1),[h,v]=p.useState({provider:"LITE_CRM"}),[N,S]=p.useState(!1);p.useEffect(()=>{T(),E()},[]);async function E(){try{const P=await mC();x(P),v(P)}catch(P){console.error("Failed to load email integration:",P)}finally{b(!1)}}async function L(){g(!0),m&&v(m)}async function C(){try{S(!0),await hC(h),await E(),g(!1),alert("Email integration updated successfully!")}catch(P){alert(`Failed to save email integration: ${(P==null?void 0:P.message)||"Unknown error"}`)}finally{S(!1)}}async function k(){try{await pC(),alert("Test email sent successfully! Check your inbox.")}catch(P){alert(`Failed to send test email: ${(P==null?void 0:P.message)||"Unknown error"}`)}}async function T(){try{const P=await cC();r(P)}catch(P){console.error("Failed to load integrations:",P)}finally{o(!1)}}async function I(P){i(P);try{const A=await uC(P);if(A!=null&&A.config){const O=A.config,R={...O};P==="WHATSAPP"&&(O.authToken&&!O.accessToken&&(R.accessToken=O.authToken),delete R.provider,delete R.accountSid,delete R.fromNumber),u(R)}else u({})}catch(A){console.error("Failed to load integration:",A),u({})}}async function $(P){f(!0);try{const A=zi[P];n.find(R=>R.type===P)?await Im(P,{config:c,enabled:!0}):await dC(P,A.name,c,!0),await T(),i(null),u({})}catch(A){alert(`Failed to save integration: ${(A==null?void 0:A.message)||"Unknown error"}`)}finally{f(!1)}}async function F(P){if(confirm("Are you sure you want to delete this integration?"))try{await fC(P),await T()}catch(A){alert(`Failed to delete integration: ${(A==null?void 0:A.message)||"Unknown error"}`)}}async function j(P,A){try{await Im(P,{enabled:A}),await T()}catch(O){alert(`Failed to update integration: ${(O==null?void 0:O.message)||"Unknown error"}`)}}return s.jsx(Ee,{children:s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Settings"}),s.jsxs("div",{className:"border-b border-slate-200 mb-6 flex gap-4",children:[s.jsx("button",{onClick:()=>t("integrations"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${e==="integrations"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Integrations"}),s.jsx("button",{onClick:()=>t("email"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${e==="email"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Email Integration"})]}),e==="integrations"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-600 mb-6",children:"Configure API credentials for workflow channels. These credentials are encrypted and stored securely."}),l?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"Loading integrations..."})}):s.jsx("div",{className:"grid gap-4",children:Object.keys(zi).map(P=>{const A=zi[P],O=A.icon,R=n.find(D=>D.type===P),_=a===P;return s.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center",children:s.jsx(O,{className:"w-6 h-6 text-slate-700"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:A.name}),s.jsx("p",{className:"text-sm text-slate-600",children:A.description})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:R&&s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:R.enabled,onChange:D=>j(P,D.target.checked),className:"cursor-pointer"}),s.jsx("span",{className:"text-sm text-slate-600",children:R.enabled?"Enabled":"Disabled"})]})})]}),_?s.jsxs("div",{className:"mt-4 space-y-4 border-t border-slate-200 pt-4",children:[A.fields.map(D=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[D.label,D.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),D.help&&s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:D.help}),D.example&&s.jsxs("div",{className:"mb-2 p-2 bg-slate-50 rounded border border-slate-200",children:[s.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1",children:"Example:"}),s.jsx("code",{className:"text-xs text-slate-700 break-all",children:D.example})]}),D.type==="select"?s.jsxs("select",{value:c[D.key]||"",onChange:M=>u({...c,[D.key]:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select provider"}),D.key==="provider"&&s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"twilio",children:"Twilio"}),s.jsx("option",{value:"webhook",children:"Webhook"})]})]}):s.jsx("input",{type:D.type,value:c[D.key]||"",onChange:M=>u({...c,[D.key]:M.target.value}),placeholder:D.placeholder,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},D.key)),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{onClick:()=>$(P),disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium",children:d?"Saving...":"Save"}),s.jsx("button",{onClick:()=>{i(null),u({})},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium",children:"Cancel"}),R&&s.jsx("button",{onClick:()=>F(P),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 font-medium ml-auto",children:"Delete"})]})]}):s.jsxs("div",{className:"mt-4",children:[R?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Configured"]}):s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"}),"Not configured"]}),s.jsx("button",{onClick:()=>I(P),className:"mt-3 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 font-medium text-sm",children:R?"Edit Configuration":"Configure"})]})]})},P)})})]}),e==="email"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Email Integration"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Configure how emails are sent from workflows. You can use Lite CRM's mail service or set up your own SMTP."}),y?s.jsx("p",{className:"text-slate-500",children:"Loading email configuration..."}):w?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Provider"}),s.jsxs("select",{value:h.provider,onChange:P=>v({...h,provider:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"LITE_CRM",children:"Use Lite CRM Mail"}),s.jsx("option",{value:"CUSTOM_SMTP",children:"Use Custom SMTP"})]})]}),h.provider==="CUSTOM_SMTP"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SMTP Host"}),s.jsx("input",{type:"text",value:h.smtpHost||"",onChange:P=>v({...h,smtpHost:P.target.value}),placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SMTP Port"}),s.jsx("input",{type:"number",value:h.smtpPort||"",onChange:P=>v({...h,smtpPort:parseInt(P.target.value)||void 0}),placeholder:"587",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SMTP User"}),s.jsx("input",{type:"text",value:h.smtpUser||"",onChange:P=>v({...h,smtpUser:P.target.value}),placeholder:"your-email@example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SMTP Password"}),s.jsx("input",{type:"password",value:h.smtpPass||"",onChange:P=>v({...h,smtpPass:P.target.value}),placeholder:"Your SMTP password or app password",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:h.smtpSecure||!1,onChange:P=>v({...h,smtpSecure:P.target.checked}),className:"w-4 h-4"}),s.jsx("label",{className:"text-sm text-slate-700",children:"Use SSL/TLS (secure connection)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"From Email"}),s.jsx("input",{type:"email",value:h.fromEmail||"",onChange:P=>v({...h,fromEmail:P.target.value}),placeholder:"no-reply@example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"From Name"}),s.jsx("input",{type:"text",value:h.fromName||"",onChange:P=>v({...h,fromName:P.target.value}),placeholder:"Lite CRM",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:C,disabled:N,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50 font-medium",children:N?"Saving...":"Save Configuration"}),s.jsx("button",{onClick:()=>{g(!1),E()},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium",children:"Cancel"}),h.provider==="CUSTOM_SMTP"&&s.jsx("button",{onClick:k,className:"px-4 py-2 border border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 font-medium ml-auto",children:"Test Email"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[s.jsx("strong",{children:"Current Provider:"})," ",(m==null?void 0:m.provider)==="CUSTOM_SMTP"?"Custom SMTP":"Lite CRM Mail"]}),(m==null?void 0:m.provider)==="CUSTOM_SMTP"&&s.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"SMTP Host:"})," ",m.smtpHost||"Not set"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"SMTP Port:"})," ",m.smtpPort||"Not set"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"SMTP User:"})," ",m.smtpUser||"Not set"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"From Email:"})," ",m.fromEmail||"Not set"]})]})]}),s.jsx("button",{onClick:L,className:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 font-medium text-sm",children:m?"Edit Configuration":"Configure Email Integration"})]})]})]})})}async function gC(){return V("/admin/stats")}async function X0(e=1,t=50){return V(`/admin/workspaces?page=${e}&limit=${t}`)}async function yC(e=1,t=50){return V(`/admin/users?page=${e}&limit=${t}`)}async function vC(e=1,t=50){return V(`/admin/payments?page=${e}&limit=${t}`)}async function bC(e=1,t=50,n){const r=new URLSearchParams({page:e.toString(),limit:t.toString()});return n!=null&&n.workspaceId&&r.append("workspaceId",n.workspaceId),n!=null&&n.stage&&r.append("stage",n.stage),n!=null&&n.ownerId&&r.append("ownerId",n.ownerId),V(`/admin/leads?${r.toString()}`)}async function wC(e=1,t=50,n){const r=new URLSearchParams({page:e.toString(),limit:t.toString()});return n!=null&&n.workspaceId&&r.append("workspaceId",n.workspaceId),(n==null?void 0:n.active)!==void 0&&r.append("active",n.active.toString()),V(`/admin/workflows?${r.toString()}`)}async function NC(e,t){return V(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function jC(e,t){return V(`/admin/workspaces/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function SC(e,t){return V(`/subscriptions/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})})}async function kC(e){return V(`/subscriptions/${e}/suspend`,{method:"PATCH"})}async function EC(e){return V(`/subscriptions/${e}/unsuspend`,{method:"PATCH"})}async function CC(e,t){return V(`/admin/leads/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function TC(e){return V(`/admin/leads/${e}`,{method:"DELETE"})}async function AC(e,t){return V(`/admin/workflows/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function PC(e){return V(`/admin/workflows/${e}`,{method:"DELETE"})}async function _C(e=1,t=50,n){const r=new URLSearchParams({page:e.toString(),limit:t.toString()});return n!=null&&n.workspaceId&&r.append("workspaceId",n.workspaceId),n!=null&&n.workflowId&&r.append("workflowId",n.workflowId),n!=null&&n.status&&r.append("status",n.status),V(`/admin/workflow-executions?${r.toString()}`)}async function LC(e=1,t=50,n){const r=new URLSearchParams({page:e.toString(),limit:t.toString()});return n!=null&&n.workspaceId&&r.append("workspaceId",n.workspaceId),n!=null&&n.planType&&r.append("planType",n.planType),n!=null&&n.status&&r.append("status",n.status),V(`/admin/subscriptions?${r.toString()}`)}async function RC(){return V("/admin/analytics")}async function DC(){return V("/admin/dummy-accounts")}async function IC(e){return V("/admin/dummy-accounts",{method:"DELETE",body:JSON.stringify({workspaceIds:e})})}async function MC(){return V("/admin/plan-pricing")}async function $C(e,t,n,r,l,o){return V(`/admin/plan-pricing/${e}`,{method:"PUT",body:JSON.stringify({individualPrice:t,organizationPrice:n,currency:r||"INR",billingCycle:l||"monthly",isActive:o!==void 0?o:!0})})}function FC(){const{isSuperAdmin:e}=sn(),[t,n]=p.useState(null),[r,l]=p.useState([]),[o,a]=p.useState(!0),[i,c]=p.useState("overview");p.useEffect(()=>{e&&u()},[e]);async function u(){try{a(!0);const[d,f]=await Promise.all([gC(),X0(1,10)]);n(d),l(f.workspaces||[])}catch(d){console.error("Failed to load admin data:",d),alert("Failed to load admin dashboard. Super admin access required.")}finally{a(!1)}}return e?o?s.jsx(Ee,{children:s.jsx("div",{className:"max-w-7xl mx-auto p-6",children:s.jsx(Zt,{message:"Loading admin dashboard..."})})}):s.jsx(Ee,{children:s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Dashboard"}),s.jsx("p",{className:"text-slate-600",children:"Manage users, workspaces, subscriptions, and payments"})]}),s.jsx("div",{className:"border-b border-slate-200 mb-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>c("overview"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="overview"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Overview"}),s.jsx("button",{onClick:()=>c("workspaces"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="workspaces"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Workspaces"}),s.jsx("button",{onClick:()=>c("users"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="users"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Users"}),s.jsx("button",{onClick:()=>c("leads"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="leads"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Leads"}),s.jsx("button",{onClick:()=>c("workflows"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="workflows"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Workflows"}),s.jsx("button",{onClick:()=>c("subscriptions"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="subscriptions"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Subscriptions"}),s.jsx("button",{onClick:()=>c("executions"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="executions"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Executions"}),s.jsx("button",{onClick:()=>c("analytics"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="analytics"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Analytics"}),s.jsx("button",{onClick:()=>c("payments"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="payments"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Payments"}),s.jsx("button",{onClick:()=>c("payment-gateway"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="payment-gateway"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Payment Gateway"}),s.jsx("button",{onClick:()=>c("plan-pricing"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${i==="plan-pricing"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Plan Pricing"})]})}),i==="overview"&&t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Total Users"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t.totalUsers})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Workspaces"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t.totalWorkspaces})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Active Subscriptions"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t.activeSubscriptions})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Total Revenue"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t.totalRevenue)})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Plans Distribution"}),s.jsx("div",{className:"space-y-3",children:t.plansBreakdown.map(d=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700 font-medium",children:d.plan}),s.jsxs("span",{className:"text-slate-900 font-semibold",children:[d.count," workspaces"]})]},d.plan))})]}),t.recentPayments&&t.recentPayments.length>0&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Recent Payments"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Date"})]})}),s.jsx("tbody",{children:t.recentPayments.map(d=>{var f,m;return s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("td",{className:"p-2 text-sm text-slate-700",children:((m=(f=d.subscription)==null?void 0:f.workspace)==null?void 0:m.name)||"N/A"}),s.jsx("td",{className:"p-2 text-sm text-slate-900 font-medium",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:d.currency==="USD"?"INR":d.currency||"INR",maximumFractionDigits:2}).format(d.amount)}),s.jsx("td",{className:"p-2 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="COMPLETED"?"bg-green-100 text-green-800":d.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status})}),s.jsx("td",{className:"p-2 text-sm text-slate-600",children:d.paidAt?new Date(d.paidAt).toLocaleDateString():new Date(d.createdAt).toLocaleDateString()})]},d.id)})})]})})]})]}),i==="workspaces"&&s.jsx(UC,{workspaces:r,onUpdate:u}),i==="users"&&s.jsx(WC,{onUpdate:u}),i==="leads"&&s.jsx(BC,{}),i==="workflows"&&s.jsx(VC,{}),i==="subscriptions"&&s.jsx(GC,{}),i==="executions"&&s.jsx(YC,{}),i==="analytics"&&s.jsx(KC,{}),i==="payments"&&s.jsx(XC,{}),i==="plan-pricing"&&s.jsx(qC,{}),i==="payment-gateway"&&s.jsx(OC,{}),i==="dummy-accounts"&&s.jsx(zC,{})]})}):s.jsx(Re,{to:"/",replace:!0})}function zC(){const[e,t]=p.useState([]),[n,r]=p.useState(!1),[l,o]=p.useState(new Set),[a,i]=p.useState(!1);p.useEffect(()=>{c()},[]);async function c(){try{r(!0),setError(null);const m=await DC();t(m)}catch(m){setError(`Failed to load dummy accounts: ${m.message||"Unknown error"}`)}finally{r(!1)}}function u(m){o(x=>{const y=new Set(x);return y.has(m)?y.delete(m):y.add(m),y})}function d(){l.size===e.length?o(new Set):o(new Set(e.map(m=>m.id)))}async function f(){if(l.size===0){setError("Please select at least one account to delete");return}if(confirm(`Are you sure you want to delete ${l.size} account(s)? This action cannot be undone.`))try{i(!0),setError(null);const m=await IC(Array.from(l)),x=`Deleted ${m.deleted} account(s). ${m.failed>0?`${m.failed} failed.`:""}`;setError(x),setTimeout(()=>setError(null),5e3),o(new Set),await c()}catch(m){setError(`Failed to delete accounts: ${m.message||"Unknown error"}`)}finally{i(!1)}}return n?s.jsx(Zt,{message:"Identifying dummy accounts..."}):s.jsxs("div",{className:"space-y-4",children:[error&&s.jsx("div",{className:`rounded-lg border px-4 py-3 ${error.includes("Deleted")||error.includes("success")?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium",children:error}),s.jsx("button",{onClick:()=>setError(null),className:"text-lg font-bold hover:opacity-70",children:""})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Dummy/Test Accounts"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Accounts identified as test or dummy accounts based on email patterns, workspace names, or low activity."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 text-sm",children:"Refresh"}),l.size>0&&s.jsx("button",{onClick:f,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm",children:a?"Deleting...":`Delete ${l.size} Account(s)`})]})]}),e.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"No dummy accounts found."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:s.jsx("input",{type:"checkbox",checked:l.size===e.length&&e.length>0,onChange:d,className:"w-4 h-4"})}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Email"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Leads"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Users"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Created"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Reason"})]})}),s.jsx("tbody",{children:e.map(m=>s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4",children:s.jsx("input",{type:"checkbox",checked:l.has(m.id),onChange:()=>u(m.id),className:"w-4 h-4"})}),s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:m.name}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:m.email}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:m.leadCount}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:m.userCount}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(m.createdAt).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:m.reason})]},m.id))})]})})]})]})}function OC(){const[e,t]=p.useState(null),[n,r]=p.useState(null),[l,o]=p.useState(!0),[a,i]=p.useState(null),[c,u]=p.useState(null),[d,f]=p.useState({razorpayKeyId:"",razorpayKeySecret:"",isActive:!1}),[m,x]=p.useState(!1);p.useEffect(()=>{y()},[]);async function y(){var h;fetch("http://127.0.0.1:7243/ingest/f820d926-2dc0-48ad-80e3-12d0d79d1a67",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AdminDashboard.tsx:520",message:"loadConfigs entry",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});try{o(!0),fetch("http://127.0.0.1:7243/ingest/f820d926-2dc0-48ad-80e3-12d0d79d1a67",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AdminDashboard.tsx:524",message:"before apiFetch calls",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const[v,N]=await Promise.all([V("/admin/payment-gateway/config?environment=UAT"),V("/admin/payment-gateway/config?environment=PRODUCTION")]);fetch("http://127.0.0.1:7243/ingest/f820d926-2dc0-48ad-80e3-12d0d79d1a67",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AdminDashboard.tsx:528",message:"apiFetch success",data:{uatHasData:!!v,prodHasData:!!N},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),t(v),r(N),i(null)}catch(v){fetch("http://127.0.0.1:7243/ingest/f820d926-2dc0-48ad-80e3-12d0d79d1a67",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AdminDashboard.tsx:532",message:"loadConfigs error",data:{errorMessage:v==null?void 0:v.message,errorStack:(h=v==null?void 0:v.stack)==null?void 0:h.substring(0,200)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),i(`Failed to load payment gateway config: ${v.message||"Unknown error"}`)}finally{o(!1)}}async function b(h){u(h);const v=h==="UAT"?e:n;f({razorpayKeyId:(v==null?void 0:v.razorpayKeyId)||"",razorpayKeySecret:(v==null?void 0:v.razorpayKeySecret)||"",isActive:(v==null?void 0:v.isActive)||!1})}async function w(h){try{x(!0),i(null),await V("/admin/payment-gateway/config",{method:"PUT",body:JSON.stringify({environment:h,...d})}),await y(),u(null),i("Payment gateway configuration saved successfully!"),setTimeout(()=>i(null),5e3)}catch(v){i(`Failed to save: ${v.message||"Unknown error"}`)}finally{x(!1)}}async function g(h){try{i(null);const v=await V("/admin/payment-gateway/test",{method:"POST",body:JSON.stringify({environment:h,amount:100})});i(null);const N=`Test order created: ${v.order.id}. Use Razorpay test cards to complete payment.`;i(N),setTimeout(()=>i(null),5e3)}catch(v){i(`Test failed: ${v.message||"Unknown error"}`)}}return l?s.jsx(Zt,{message:"Loading payment gateway configuration..."}):s.jsxs("div",{className:"space-y-6",children:[a&&s.jsx("div",{className:`rounded-lg border px-4 py-3 ${a.includes("created")||a.includes("success")||a.includes("saved")?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium",children:a}),s.jsx("button",{onClick:()=>i(null),className:"text-lg font-bold hover:opacity-70",children:""})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Razorpay Configuration"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Configure Razorpay payment gateway keys for UAT and Production environments."}),s.jsxs("div",{className:"mb-6 p-4 border border-slate-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"UAT Environment"}),c==="UAT"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Razorpay Key ID"}),s.jsx("input",{type:"text",value:d.razorpayKeyId,onChange:h=>f({...d,razorpayKeyId:h.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",placeholder:"rzp_test_..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Razorpay Key Secret"}),s.jsx("input",{type:"password",value:d.razorpayKeySecret,onChange:h=>f({...d,razorpayKeySecret:h.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",placeholder:"Your secret key"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:d.isActive,onChange:h=>f({...d,isActive:h.target.checked}),className:"w-4 h-4"}),s.jsx("label",{className:"text-sm text-slate-700",children:"Active"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>w("UAT"),disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Saving...":"Save"}),s.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"}),s.jsx("button",{onClick:()=>g("UAT"),className:"px-4 py-2 border border-green-300 text-green-600 rounded-lg hover:bg-green-50 ml-auto",children:"Test Payment"})]})]}):s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[s.jsx("strong",{children:"Key ID:"})," ",(e==null?void 0:e.razorpayKeyId)||"Not configured"]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[s.jsx("strong",{children:"Status:"})," ",e!=null&&e.isActive?"Active":"Inactive"]}),s.jsx("button",{onClick:()=>b("UAT"),className:"mt-3 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 text-sm",children:e?"Edit Configuration":"Configure"})]})]}),s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Production Environment"}),c==="PRODUCTION"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Razorpay Key ID"}),s.jsx("input",{type:"text",value:d.razorpayKeyId,onChange:h=>f({...d,razorpayKeyId:h.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",placeholder:"rzp_live_..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Razorpay Key Secret"}),s.jsx("input",{type:"password",value:d.razorpayKeySecret,onChange:h=>f({...d,razorpayKeySecret:h.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",placeholder:"Your secret key"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:d.isActive,onChange:h=>f({...d,isActive:h.target.checked}),className:"w-4 h-4"}),s.jsx("label",{className:"text-sm text-slate-700",children:"Active"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>w("PRODUCTION"),disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Saving...":"Save"}),s.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"}),s.jsx("button",{onClick:()=>g("PRODUCTION"),className:"px-4 py-2 border border-green-300 text-green-600 rounded-lg hover:bg-green-50 ml-auto",children:"Test Payment"})]})]}):s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[s.jsx("strong",{children:"Key ID:"})," ",(n==null?void 0:n.razorpayKeyId)||"Not configured"]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[s.jsx("strong",{children:"Status:"})," ",n!=null&&n.isActive?"Active":"Inactive"]}),s.jsx("button",{onClick:()=>b("PRODUCTION"),className:"mt-3 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 text-sm",children:n?"Edit Configuration":"Configure"})]})]})]})]})}function UC({workspaces:e,onUpdate:t}){const[n,r]=p.useState(e),[l,o]=p.useState(!1),[a,i]=p.useState(1),[c,u]=p.useState(1),[d,f]=p.useState(null),[m,x]=p.useState(""),[y,b]=p.useState(""),[w,g]=p.useState(""),[h,v]=p.useState(!1),[N,S]=p.useState(""),[E,L]=p.useState(!1);p.useEffect(()=>{C()},[a]);async function C(){var T;try{o(!0);const I=await X0(a,20);r(I.workspaces||[]),u(((T=I.pagination)==null?void 0:T.totalPages)||1)}catch(I){console.error("Failed to load workspaces:",I),alert(`Failed to load workspaces: ${I.message||"Unknown error"}`)}finally{o(!1)}}async function k(T,I){try{L(!0),y&&await jC(T,{name:y,plan:m||void 0}),I&&m?await fetch(`/api/subscriptions/${T}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({planType:m,amount:w?parseFloat(w):void 0,isManual:h,adminNotes:N||void 0})}):m&&await fetch("/api/subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({workspaceId:T,planType:m,amount:w?parseFloat(w):0,isManual:h,adminNotes:N||void 0})}),alert("Workspace updated successfully!"),f(null),x(""),b(""),g(""),v(!1),S(""),await C(),t()}catch($){alert(`Failed to update workspace: ${$.message||"Unknown error"}`)}finally{L(!1)}}return l&&n.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading workspaces..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Plan"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Users"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Leads"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{children:n.map(T=>{var I,$,F,j,P,A,O,R,_,D;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:T.name}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:d===T.id?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",value:y||T.name,onChange:M=>b(M.target.value),placeholder:"Workspace name",className:"px-2 py-1 border border-slate-300 rounded text-sm mb-2 w-full"}),s.jsxs("select",{value:m||((I=T.subscription)==null?void 0:I.planType)||T.plan||"FREE",onChange:M=>x(M.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-full",children:[s.jsx("option",{value:"FREE",children:"FREE"}),s.jsx("option",{value:"STARTER",children:"STARTER"}),s.jsx("option",{value:"PROFESSIONAL",children:"PROFESSIONAL"}),s.jsx("option",{value:"BUSINESS",children:"BUSINESS"}),s.jsx("option",{value:"ENTERPRISE",children:"ENTERPRISE"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium",children:T.name}),s.jsx("div",{className:"text-xs text-slate-500",children:(($=T.subscription)==null?void 0:$.planType)||T.plan||"FREE"})]})}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:d===T.id?s.jsx("input",{type:"number",value:w||((F=T.subscription)==null?void 0:F.amount)||0,onChange:M=>g(M.target.value),placeholder:"Amount",className:"px-2 py-1 border border-slate-300 rounded text-sm w-24"}):(j=T.subscription)!=null&&j.amount?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(T.subscription.amount):"0"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((P=T._count)==null?void 0:P.users)||((A=T.users)==null?void 0:A.length)||0}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((O=T._count)==null?void 0:O.leads)||0}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((R=T.subscription)==null?void 0:R.status)==="ACTIVE"?"bg-green-100 text-green-800":((_=T.subscription)==null?void 0:_.status)==="TRIAL"?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"}`,children:((D=T.subscription)==null?void 0:D.status)||"TRIAL"})}),s.jsx("td",{className:"p-4 text-sm",children:d===T.id?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:M=>v(M.target.checked)}),"Manual (no payment)"]}),s.jsx("textarea",{value:N,onChange:M=>S(M.target.value),placeholder:"Admin notes...",className:"px-2 py-1 border border-slate-300 rounded text-xs w-32",rows:2}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{var M;return k(T.id,(M=T.subscription)==null?void 0:M.id)},disabled:E,className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{f(null),x(""),b(""),g(""),v(!1),S("")},className:"px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs hover:bg-slate-300",children:"Cancel"})]})]}):s.jsx("button",{onClick:()=>{var M,W,K,Y,X;f(T.id),b(T.name),x(((M=T.subscription)==null?void 0:M.planType)||T.plan||"FREE"),g(((K=(W=T.subscription)==null?void 0:W.amount)==null?void 0:K.toString())||"0"),v(((Y=T.subscription)==null?void 0:Y.isManual)||!1),S(((X=T.subscription)==null?void 0:X.adminNotes)||"")},className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Edit"})})]},T.id)})})]})}),c>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>i(Math.max(1,a-1)),disabled:a===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",a," of ",c]}),s.jsx("button",{onClick:()=>i(Math.min(c,a+1)),disabled:a===c,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function WC({onUpdate:e}){const[t,n]=p.useState([]),[r,l]=p.useState(!0),[o,a]=p.useState(1),[i,c]=p.useState(1),[u,d]=p.useState({role:"",search:""}),[f,m]=p.useState(null),[x,y]=p.useState(""),[b,w]=p.useState(""),[g,h]=p.useState(""),[v,N]=p.useState(""),[S,E]=p.useState(!1);p.useEffect(()=>{L()},[o]);async function L(){var k;try{l(!0);const T=await yC(o,20);let I=T.users||[];if(u.role&&(I=I.filter($=>$.role===u.role)),u.search){const $=u.search.toLowerCase();I=I.filter(F=>{var j,P,A,O;return((j=F.name)==null?void 0:j.toLowerCase().includes($))||((P=F.email)==null?void 0:P.toLowerCase().includes($))||((O=(A=F.workspace)==null?void 0:A.name)==null?void 0:O.toLowerCase().includes($))})}n(I),c(((k=T.pagination)==null?void 0:k.totalPages)||1)}catch(T){console.error("Failed to load users:",T),alert(`Failed to load users: ${T.message||"Unknown error"}`)}finally{l(!1)}}async function C(k){try{E(!0),await NC(k,{name:x||void 0,email:b||void 0,role:g||void 0,workspaceId:v||void 0}),alert("User updated successfully!"),m(null),y(""),w(""),h(""),N(""),await L(),e()}catch(T){alert(`Failed to update user: ${T.message||"Unknown error"}`)}finally{E(!1)}}return r&&t.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading users..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4 flex gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search by name, email, workspace...",value:u.search,onChange:k=>{d({...u,search:k.target.value}),L()},className:"px-3 py-2 border border-slate-300 rounded text-sm flex-1"}),s.jsxs("select",{value:u.role,onChange:k=>{d({...u,role:k.target.value}),L()},className:"px-3 py-2 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"",children:"All Roles"}),s.jsx("option",{value:"ADMIN",children:"ADMIN"}),s.jsx("option",{value:"MEMBER",children:"MEMBER"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Name"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Email"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Role"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Leads"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Created"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{children:t.map(k=>{var T,I;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:f===k.id?s.jsx("input",{type:"text",value:x||k.name||"",onChange:$=>y($.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-32"}):k.name||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:f===k.id?s.jsx("input",{type:"email",value:b||k.email||"",onChange:$=>w($.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-40"}):k.email}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((T=k.workspace)==null?void 0:T.name)||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:f===k.id?s.jsxs("select",{value:g||k.role||"MEMBER",onChange:$=>h($.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"ADMIN",children:"ADMIN"}),s.jsx("option",{value:"MEMBER",children:"MEMBER"})]}):s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.role==="ADMIN"?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800"}`,children:k.role})}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((I=k._count)==null?void 0:I.leads)||0}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(k.createdAt).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-sm",children:f===k.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C(k.id),disabled:S,className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{m(null),y(""),w(""),h(""),N("")},className:"px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs hover:bg-slate-300",children:"Cancel"})]}):s.jsx("button",{onClick:()=>{m(k.id),y(k.name||""),w(k.email||""),h(k.role||""),N(k.workspaceId||"")},className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Edit"})})]},k.id)})})]})}),i>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>a(Math.max(1,o-1)),disabled:o===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",o," of ",i]}),s.jsx("button",{onClick:()=>a(Math.min(i,o+1)),disabled:o===i,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function BC(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(1),[a,i]=p.useState(1),[c,u]=p.useState({stage:"",search:""}),[d,f]=p.useState(null),[m,x]=p.useState(""),[y,b]=p.useState(""),[w,g]=p.useState(""),[h,v]=p.useState(""),[N,S]=p.useState(!1);p.useEffect(()=>{E()},[l,c.stage]);async function E(){var k;try{r(!0);const T=await bC(l,20,{stage:c.stage||void 0});let I=T.leads||[];if(c.search){const $=c.search.toLowerCase();I=I.filter(F=>{var j,P,A,O;return((j=F.name)==null?void 0:j.toLowerCase().includes($))||((P=F.email)==null?void 0:P.toLowerCase().includes($))||((A=F.phone)==null?void 0:A.includes($))||((O=F.company)==null?void 0:O.toLowerCase().includes($))})}t(I),i(((k=T.pagination)==null?void 0:k.totalPages)||1)}catch(T){console.error("Failed to load leads:",T),alert(`Failed to load leads: ${T.message||"Unknown error"}`)}finally{r(!1)}}async function L(k){try{S(!0),await CC(k,{name:m||void 0,email:y||void 0,phone:w||void 0,stage:h||void 0}),alert("Lead updated successfully!"),f(null),x(""),b(""),g(""),v(""),await E()}catch(T){alert(`Failed to update lead: ${T.message||"Unknown error"}`)}finally{S(!1)}}async function C(k){if(confirm("Are you sure you want to delete this lead?"))try{await TC(k),alert("Lead deleted successfully!"),await E()}catch(T){alert(`Failed to delete lead: ${T.message||"Unknown error"}`)}}return n&&e.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading leads..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4 flex gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search by name, email, phone, company...",value:c.search,onChange:k=>u({...c,search:k.target.value}),className:"px-3 py-2 border border-slate-300 rounded text-sm flex-1"}),s.jsxs("select",{value:c.stage,onChange:k=>u({...c,stage:k.target.value}),className:"px-3 py-2 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"",children:"All Stages"}),s.jsx("option",{value:"NEW",children:"NEW"}),s.jsx("option",{value:"CONTACTED",children:"CONTACTED"}),s.jsx("option",{value:"FOLLOW_UP",children:"FOLLOW_UP"}),s.jsx("option",{value:"WON",children:"WON"}),s.jsx("option",{value:"LOST",children:"LOST"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Name"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Email"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Phone"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Owner"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Stage"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Created"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(k=>{var T,I,$;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:d===k.id?s.jsx("input",{type:"text",value:m||k.name||"",onChange:F=>x(F.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-32"}):k.name}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:d===k.id?s.jsx("input",{type:"email",value:y||k.email||"",onChange:F=>b(F.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-40"}):k.email||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:d===k.id?s.jsx("input",{type:"text",value:w||k.phone||"",onChange:F=>g(F.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-32"}):k.phone||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((T=k.workspace)==null?void 0:T.name)||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((I=k.owner)==null?void 0:I.name)||(($=k.owner)==null?void 0:$.email)||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:d===k.id?s.jsxs("select",{value:h||k.stage||"NEW",onChange:F=>v(F.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"NEW",children:"NEW"}),s.jsx("option",{value:"CONTACTED",children:"CONTACTED"}),s.jsx("option",{value:"FOLLOW_UP",children:"FOLLOW_UP"}),s.jsx("option",{value:"WON",children:"WON"}),s.jsx("option",{value:"LOST",children:"LOST"})]}):s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.stage==="WON"?"bg-green-100 text-green-800":k.stage==="LOST"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:k.stage})}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(k.createdAt).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-sm",children:d===k.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>L(k.id),disabled:N,className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{f(null),x(""),b(""),g(""),v("")},className:"px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs hover:bg-slate-300",children:"Cancel"})]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{f(k.id),x(k.name||""),b(k.email||""),g(k.phone||""),v(k.stage||"")},className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Edit"}),s.jsx("button",{onClick:()=>C(k.id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Delete"})]})})]},k.id)})})]})}),a>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>o(Math.max(1,l-1)),disabled:l===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",l," of ",a]}),s.jsx("button",{onClick:()=>o(Math.min(a,l+1)),disabled:l===a,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function VC(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(1),[a,i]=p.useState(1),[c,u]=p.useState({active:"",search:""}),[d,f]=p.useState(null),[m,x]=p.useState(""),[y,b]=p.useState(!1),[w,g]=p.useState(!1);p.useEffect(()=>{h()},[l,c.active]);async function h(){var S;try{r(!0);const E=await wC(l,20,{active:c.active?c.active==="true":void 0});let L=E.workflows||[];if(c.search){const C=c.search.toLowerCase();L=L.filter(k=>{var T,I,$;return((T=k.name)==null?void 0:T.toLowerCase().includes(C))||(($=(I=k.workspace)==null?void 0:I.name)==null?void 0:$.toLowerCase().includes(C))})}t(L),i(((S=E.pagination)==null?void 0:S.totalPages)||1)}catch(E){console.error("Failed to load workflows:",E),alert(`Failed to load workflows: ${E.message||"Unknown error"}`)}finally{r(!1)}}async function v(S){try{g(!0),await AC(S,{name:m||void 0,active:y}),alert("Workflow updated successfully!"),f(null),x(""),b(!1),await h()}catch(E){alert(`Failed to update workflow: ${E.message||"Unknown error"}`)}finally{g(!1)}}async function N(S){if(confirm("Are you sure you want to delete this workflow?"))try{await PC(S),alert("Workflow deleted successfully!"),await h()}catch(E){alert(`Failed to delete workflow: ${E.message||"Unknown error"}`)}}return n&&e.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading workflows..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4 flex gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search by name or workspace...",value:c.search,onChange:S=>u({...c,search:S.target.value}),className:"px-3 py-2 border border-slate-300 rounded text-sm flex-1"}),s.jsxs("select",{value:c.active,onChange:S=>u({...c,active:S.target.value}),className:"px-3 py-2 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"true",children:"Active"}),s.jsx("option",{value:"false",children:"Inactive"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Name"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Nodes"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Executions"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Created"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(S=>{var E,L,C;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:d===S.id?s.jsx("input",{type:"text",value:m||S.name||"",onChange:k=>x(k.target.value),className:"px-2 py-1 border border-slate-300 rounded text-sm w-40"}):S.name}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((E=S.workspace)==null?void 0:E.name)||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:d===S.id?s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:y,onChange:k=>b(k.target.checked)}),s.jsx("span",{className:"text-xs",children:"Active"})]}):s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${S.active?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:S.active?"Active":"Inactive"})}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((L=S._count)==null?void 0:L.nodes)||0}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((C=S._count)==null?void 0:C.executions)||0}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(S.createdAt).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-sm",children:d===S.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>v(S.id),disabled:w,className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{f(null),x(""),b(!1)},className:"px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs hover:bg-slate-300",children:"Cancel"})]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{f(S.id),x(S.name||""),b(S.active||!1)},className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Edit"}),s.jsx("button",{onClick:()=>N(S.id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Delete"})]})})]},S.id)})})]})}),a>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>o(Math.max(1,l-1)),disabled:l===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",l," of ",a]}),s.jsx("button",{onClick:()=>o(Math.min(a,l+1)),disabled:l===a,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function HC({subscription:e,onUpdate:t}){var u;const[n,r]=p.useState(e.status),[l,o]=p.useState(!1);async function a(){if(n!==e.status)try{o(!0),await SC(e.workspaceId,n),t()}catch(d){alert(`Failed to update status: ${d.message||"Unknown error"}`)}finally{o(!1)}}async function i(){var d;if(confirm(`Are you sure you want to suspend workspace "${(d=e.workspace)==null?void 0:d.name}"?`))try{o(!0),await kC(e.workspaceId),t()}catch(f){alert(`Failed to suspend: ${f.message||"Unknown error"}`)}finally{o(!1)}}async function c(){var d;if(confirm(`Are you sure you want to unsuspend workspace "${(d=e.workspace)==null?void 0:d.name}"?`))try{o(!0),await EC(e.workspaceId),t()}catch(f){alert(`Failed to unsuspend: ${f.message||"Unknown error"}`)}finally{o(!1)}}return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:((u=e.workspace)==null?void 0:u.name)||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:e.planType}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.status==="ACTIVE"?"bg-green-100 text-green-800":e.status==="TRIAL"?"bg-blue-100 text-blue-800":e.status==="CANCELLED"?"bg-red-100 text-red-800":e.status==="SUSPENDED"?"bg-orange-100 text-orange-800":"bg-slate-100 text-slate-800"}`,children:e.status})}),s.jsxs("td",{className:"p-4 text-sm text-slate-900 font-medium",children:["",e.amount.toFixed(2)]}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(e.startDate).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:e.endDate?new Date(e.endDate).toLocaleDateString():"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:e.isManual?s.jsx("span",{className:"text-green-600",children:"Yes"}):s.jsx("span",{className:"text-slate-400",children:"No"})}),s.jsx("td",{className:"p-4 text-sm",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("select",{value:n,onChange:d=>r(d.target.value),onBlur:a,disabled:l,className:"px-2 py-1 border border-slate-300 rounded text-xs disabled:opacity-50",children:[s.jsx("option",{value:"TRIAL",children:"TRIAL"}),s.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),s.jsx("option",{value:"CANCELLED",children:"CANCELLED"}),s.jsx("option",{value:"EXPIRED",children:"EXPIRED"}),s.jsx("option",{value:"SUSPENDED",children:"SUSPENDED"})]}),s.jsx("div",{className:"flex gap-1",children:e.status==="SUSPENDED"?s.jsx("button",{onClick:c,disabled:l,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:"Unsuspend"}):s.jsx("button",{onClick:i,disabled:l,className:"px-2 py-1 bg-orange-600 text-white text-xs rounded hover:bg-orange-700 disabled:opacity-50",children:"Suspend"})})]})})]})}function GC(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(1),[a,i]=p.useState(1),[c,u]=p.useState(""),[d,f]=p.useState("");p.useEffect(()=>{m()},[l,c,d]);async function m(){var x;try{r(!0);const y=await LC(l,20,{planType:c||void 0,status:d||void 0});t(y.subscriptions||[]),i(((x=y.pagination)==null?void 0:x.totalPages)||1)}catch(y){console.error("Failed to load subscriptions:",y),alert(`Failed to load subscriptions: ${y.message||"Unknown error"}`)}finally{r(!1)}}return n&&e.length===0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-8",children:s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading subscriptions..."})}):!n&&e.length===0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-8",children:s.jsx("div",{className:"text-center py-8 text-slate-500",children:"No subscriptions found"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4 flex gap-4",children:[s.jsxs("select",{value:c,onChange:x=>{u(x.target.value),o(1)},className:"px-3 py-2 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"",children:"All Plans"}),s.jsx("option",{value:"FREE",children:"FREE"}),s.jsx("option",{value:"STARTER",children:"STARTER"}),s.jsx("option",{value:"PROFESSIONAL",children:"PROFESSIONAL"}),s.jsx("option",{value:"BUSINESS",children:"BUSINESS"}),s.jsx("option",{value:"ENTERPRISE",children:"ENTERPRISE"})]}),s.jsxs("select",{value:d,onChange:x=>{f(x.target.value),o(1)},className:"px-3 py-2 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"TRIAL",children:"TRIAL"}),s.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),s.jsx("option",{value:"CANCELLED",children:"CANCELLED"}),s.jsx("option",{value:"EXPIRED",children:"EXPIRED"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Plan"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Start Date"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"End Date"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Manual"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(x=>s.jsx(HC,{subscription:x,onUpdate:m},x.id))})]})}),a>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>o(Math.max(1,l-1)),disabled:l===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",l," of ",a]}),s.jsx("button",{onClick:()=>o(Math.min(a,l+1)),disabled:l===a,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function YC(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(1),[a,i]=p.useState(1),[c,u]=p.useState("");p.useEffect(()=>{d()},[l,c]);async function d(){var f;try{r(!0);const m=await _C(l,20,{status:c||void 0});t(m.executions||[]),i(((f=m.pagination)==null?void 0:f.totalPages)||1)}catch(m){console.error("Failed to load executions:",m),alert(`Failed to load workflow executions: ${m.message||"Unknown error"}`)}finally{r(!1)}}return n&&e.length===0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-8",children:s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading executions..."})}):!n&&e.length===0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-8",children:s.jsx("div",{className:"text-center py-8 text-slate-500",children:"No workflow executions found"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4 flex gap-4",children:s.jsxs("select",{value:c,onChange:f=>{u(f.target.value),o(1)},className:"px-3 py-2 border border-slate-300 rounded text-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"PENDING",children:"PENDING"}),s.jsx("option",{value:"RUNNING",children:"RUNNING"}),s.jsx("option",{value:"SUCCESS",children:"SUCCESS"}),s.jsx("option",{value:"FAILED",children:"FAILED"}),s.jsx("option",{value:"CANCELLED",children:"CANCELLED"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workflow"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Started"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Completed"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Error"})]})}),s.jsx("tbody",{children:e.map(f=>{var m,x,y;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:((m=f.workflow)==null?void 0:m.name)||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((y=(x=f.workflow)==null?void 0:x.workspace)==null?void 0:y.name)||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${f.status==="SUCCESS"?"bg-green-100 text-green-800":f.status==="FAILED"?"bg-red-100 text-red-800":f.status==="RUNNING"?"bg-blue-100 text-blue-800":f.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-slate-100 text-slate-800"}`,children:f.status})}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(f.createdAt).toLocaleString()}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:f.completedAt?new Date(f.completedAt).toLocaleString():"N/A"}),s.jsx("td",{className:"p-4 text-sm text-red-600 max-w-xs truncate",children:f.error||""})]},f.id)})})]})}),a>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>o(Math.max(1,l-1)),disabled:l===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",l," of ",a]}),s.jsx("button",{onClick:()=>o(Math.min(a,l+1)),disabled:l===a,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function KC(){var o,a,i,c,u,d,f,m,x,y,b;const[e,t]=p.useState(null),[n,r]=p.useState(!0);p.useEffect(()=>{l()},[]);async function l(){try{r(!0);const w=await RC();t(w)}catch(w){console.error("Failed to load analytics:",w),alert(`Failed to load analytics: ${w.message||"Unknown error"}`)}finally{r(!1)}}return n?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-8",children:s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading analytics..."})}):e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(Ds,{title:"Total Workspaces",value:((o=e.overview)==null?void 0:o.totalWorkspaces)||0}),s.jsx(Ds,{title:"Total Users",value:((a=e.overview)==null?void 0:a.totalUsers)||0}),s.jsx(Ds,{title:"Total Leads",value:((i=e.overview)==null?void 0:i.totalLeads)||0}),s.jsx(Ds,{title:"Total Workflows",value:((c=e.overview)==null?void 0:c.totalWorkflows)||0}),s.jsx(Ds,{title:"Active Subscriptions",value:((u=e.overview)==null?void 0:u.activeSubscriptions)||0}),s.jsx(Ds,{title:"Total Revenue",value:`${(((d=e.overview)==null?void 0:d.totalRevenue)||0).toFixed(2)}`})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Leads by Stage"}),s.jsx("div",{className:"space-y-2",children:(f=e.leadsByStage)==null?void 0:f.map(w=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:w.stage}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:w.count})]},w.stage))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Users by Role"}),s.jsx("div",{className:"space-y-2",children:(m=e.usersByRole)==null?void 0:m.map(w=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:w.role}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:w.count})]},w.role))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Subscriptions by Plan"}),s.jsx("div",{className:"space-y-2",children:(x=e.subscriptionsByPlan)==null?void 0:x.map(w=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:w.plan}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:w.count})]},w.plan))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Subscriptions by Status"}),s.jsx("div",{className:"space-y-2",children:(y=e.subscriptionsByStatus)==null?void 0:y.map(w=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:w.status}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:w.count})]},w.status))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Monthly Signups"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(b=e.monthlySignups)==null?void 0:b.map(w=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:w.month}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:w.count})]},w.month))})]})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-8",children:s.jsx("div",{className:"text-center py-8 text-slate-500",children:"No analytics data available"})})}function Ds({title:e,value:t}){return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500 mb-2",children:e}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t})]})}function XC(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(1),[a,i]=p.useState(1);p.useEffect(()=>{c()},[l]);async function c(){var u;try{r(!0);const d=await vC(l,20);t(d.payments||[]),i(((u=d.pagination)==null?void 0:u.totalPages)||1)}catch(d){console.error("Failed to load payments:",d),alert(`Failed to load payments: ${d.message||"Unknown error"}`)}finally{r(!1)}}return n&&e.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading payments..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Workspace"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Method"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Transaction ID"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Date"})]})}),s.jsx("tbody",{children:e.map(u=>{var d,f;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:((f=(d=u.subscription)==null?void 0:d.workspace)==null?void 0:f.name)||"N/A"}),s.jsxs("td",{className:"p-4 text-sm text-slate-900 font-medium",children:["",u.amount.toFixed(2)," ",u.currency]}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:u.paymentMethod||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u.status==="COMPLETED"?"bg-green-100 text-green-800":u.status==="PENDING"?"bg-yellow-100 text-yellow-800":u.status==="FAILED"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:u.status})}),s.jsx("td",{className:"p-4 text-sm text-slate-600 font-mono text-xs",children:u.transactionId||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:u.paidAt?new Date(u.paidAt).toLocaleDateString():new Date(u.createdAt).toLocaleDateString()})]},u.id)})})]})}),a>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>o(Math.max(1,l-1)),disabled:l===1,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Page ",l," of ",a]}),s.jsx("button",{onClick:()=>o(Math.min(a,l+1)),disabled:l===a,className:"px-3 py-1 border border-slate-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]})}function qC(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(null),[a,i]=p.useState({individualPrice:0,organizationPrice:0,currency:"INR",billingCycle:"monthly",isActive:!0}),[c,u]=p.useState(!1),[d,f]=p.useState(null),m={FREE:"Free",STARTER:"Starter",PROFESSIONAL:"Professional",BUSINESS:"Business",ENTERPRISE:"Enterprise"};p.useEffect(()=>{x()},[]);async function x(){try{r(!0),f(null);const w=await MC();t(w)}catch(w){f(`Failed to load plan pricing: ${w.message||"Unknown error"}`)}finally{r(!1)}}async function y(w){const g=e.find(h=>h.planType===w);g&&(o(w),i({individualPrice:g.individualPrice,organizationPrice:g.organizationPrice,currency:g.currency,billingCycle:g.billingCycle,isActive:g.isActive}))}async function b(w){try{u(!0),f(null),await $C(w,a.individualPrice,a.organizationPrice,a.currency,a.billingCycle,a.isActive),f(null);const g=`Plan pricing updated successfully for ${m[w]||w}`;f(g),setTimeout(()=>f(null),5e3),o(null),await x()}catch(g){f(`Failed to update pricing: ${g.message||"Unknown error"}`)}finally{u(!1)}}return n?s.jsx(Zt,{message:"Loading plan pricing..."}):s.jsxs("div",{className:"space-y-6",children:[d&&s.jsx("div",{className:`rounded-lg border px-4 py-3 ${d.includes("success")||d.includes("updated")?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium",children:d}),s.jsx("button",{onClick:()=>f(null),className:"text-lg font-bold hover:opacity-70",children:""})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Plan Pricing Management"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Manage pricing for each plan. Changes will apply to new subscriptions immediately."}),s.jsx("div",{className:"space-y-4",children:e.map(w=>s.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:l===w.planType?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:m[w.planType]||w.planType}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:a.isActive,onChange:g=>i({...a,isActive:g.target.checked}),className:"rounded border-slate-300"}),s.jsx("span",{className:"text-slate-600",children:"Active"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Individual Price ()"}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:a.individualPrice,onChange:g=>i({...a,individualPrice:parseFloat(g.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Organization Price ()"}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:a.organizationPrice,onChange:g=>i({...a,organizationPrice:parseFloat(g.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{onClick:()=>b(w.planType),disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:c?"Saving...":"Save Changes"}),s.jsx("button",{onClick:()=>o(null),disabled:c,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:m[w.planType]||w.planType}),w.isActive?s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Active"}):s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-slate-100 text-slate-600 rounded",children:"Inactive"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Individual:"})," ",s.jsxs("span",{className:"font-semibold text-slate-900",children:["",w.individualPrice.toLocaleString("en-IN")]}),"/",w.billingCycle]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Organization:"})," ",s.jsxs("span",{className:"font-semibold text-slate-900",children:["",w.organizationPrice.toLocaleString("en-IN")]}),"/",w.billingCycle]})]})]}),s.jsx("button",{onClick:()=>y(w.planType),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Edit"})]})},w.planType))})]})]})}function QC(){var y,b,w,g,h,v,N,S,E,L;const{role:e}=sn(),[t,n]=p.useState(null),[r,l]=p.useState([]),[o,a]=p.useState([]),[i,c]=p.useState([]),[u,d]=p.useState(!0),[f,m]=p.useState("overview");p.useEffect(()=>{e==="ADMIN"&&x()},[e]);async function x(){try{d(!0);const[C,k,T,I]=await Promise.all([V("/workspace-admin/stats"),V("/workspace-admin/users"),V("/workspace-admin/payments"),V("/workspace-admin/invoices")]);n(C),l(k),a(T),c(I)}catch(C){console.error("Failed to load workspace admin data:",C),alert("Failed to load workspace admin dashboard.")}finally{d(!1)}}return e!=="ADMIN"?s.jsx(Re,{to:"/",replace:!0}):u?s.jsx(Ee,{children:s.jsx("div",{className:"max-w-7xl mx-auto p-6",children:s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"Loading workspace admin dashboard..."})})})}):s.jsx(Ee,{children:s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Workspace Admin"}),s.jsx("p",{className:"text-slate-600",children:"Manage your workspace: users, payments, and invoices"}),s.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[" To upgrade your plan, go to ",s.jsx(se,{to:"/upgrade",className:"underline font-semibold hover:text-blue-800",children:"Upgrade"})," page."]})]}),s.jsx("div",{className:"border-b border-slate-200 mb-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>m("overview"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${f==="overview"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Overview"}),s.jsx("button",{onClick:()=>m("users"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${f==="users"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Users"}),s.jsx("button",{onClick:()=>m("payments"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${f==="payments"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Payments"}),s.jsx("button",{onClick:()=>m("invoices"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${f==="invoices"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Invoices"})]})}),f==="overview"&&t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Workspace Information"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Workspace Name"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:(y=t.workspace)==null?void 0:y.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Plan"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:((b=t.workspace)==null?void 0:b.plan)||"FREE"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Status"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((w=t.subscription)==null?void 0:w.status)==="ACTIVE"?"bg-green-100 text-green-800":((g=t.subscription)==null?void 0:g.status)==="TRIAL"?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"}`,children:((h=t.subscription)==null?void 0:h.status)||"TRIAL"})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Amount"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:(v=t.subscription)!=null&&v.amount?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t.subscription.amount):"0"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Users"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:((N=t.stats)==null?void 0:N.users)||0})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Leads"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:((S=t.stats)==null?void 0:S.leads)||0})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Workflows"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:((E=t.stats)==null?void 0:E.workflows)||0})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-1",children:"Integrations"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:((L=t.stats)==null?void 0:L.integrations)||0})]})]}),t.recentPayments&&t.recentPayments.length>0&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Recent Payments"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-700",children:"Date"})]})}),s.jsx("tbody",{children:t.recentPayments.slice(0,5).map(C=>s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("td",{className:"p-2 text-sm text-slate-900 font-medium",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:C.currency==="USD"?"INR":C.currency||"INR",maximumFractionDigits:2}).format(C.amount)}),s.jsx("td",{className:"p-2 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${C.status==="COMPLETED"?"bg-green-100 text-green-800":C.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:C.status})}),s.jsx("td",{className:"p-2 text-sm text-slate-600",children:C.paidAt?new Date(C.paidAt).toLocaleDateString():new Date(C.createdAt).toLocaleDateString()})]},C.id))})]})})]})]}),f==="users"&&s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Name"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Email"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Role"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Leads"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Created"})]})}),s.jsx("tbody",{children:r.map(C=>{var k;return s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:C.name||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:C.email}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${C.role==="ADMIN"?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800"}`,children:C.role})}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:((k=C._count)==null?void 0:k.leads)||0}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(C.createdAt).toLocaleDateString()})]},C.id)})})]})}),f==="payments"&&s.jsx(ZC,{payments:o}),f==="invoices"&&s.jsx(JC,{invoices:i})]})})}function ZC({payments:e}){return e.length===0?s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No payments found"})}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Method"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Transaction ID"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Date"})]})}),s.jsx("tbody",{children:e.map(t=>s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:t.currency==="USD"?"INR":t.currency||"INR",maximumFractionDigits:2}).format(t.amount)}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:t.paymentMethod||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.status==="COMPLETED"?"bg-green-100 text-green-800":t.status==="PENDING"?"bg-yellow-100 text-yellow-800":t.status==="FAILED"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:t.status})}),s.jsx("td",{className:"p-4 text-sm text-slate-600 font-mono text-xs",children:t.transactionId||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:t.paidAt?new Date(t.paidAt).toLocaleDateString():new Date(t.createdAt).toLocaleDateString()})]},t.id))})]})})}function JC({invoices:e}){return e.length===0?s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No invoices found"})}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Invoice #"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Due Date"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Date"})]})}),s.jsx("tbody",{children:e.map(t=>s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium font-mono",children:t.invoiceNumber}),s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:t.currency==="USD"?"INR":t.currency||"INR",maximumFractionDigits:2}).format(t.amount)}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.status==="PAID"?"bg-green-100 text-green-800":t.status==="SENT"?"bg-blue-100 text-blue-800":t.status==="OVERDUE"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:t.status})}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(t.createdAt).toLocaleDateString()})]},t.id))})]})})}async function e4(){return V("/invoices/me")}function t4({isOpen:e,onClose:t,onConfirm:n}){const[r,l]=p.useState(""),[o,a]=p.useState(!1);async function i(){a(!0);try{await n(r.trim()||""),l(""),t()}finally{a(!1)}}function c(){o||(l(""),t())}return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all animate-scale-in",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Cancel Subscription"}),s.jsx("p",{className:"text-sm text-slate-600",children:"This will stop automatic renewals"})]})]}),s.jsx("p",{className:"text-slate-700 mb-3 leading-relaxed",children:"Cancelling your subscription will stop automatic renewals. You'll retain access until the end of your billing period."}),s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Please provide a reason for cancellation (optional)"}),s.jsx("textarea",{value:r,onChange:u=>l(u.target.value),placeholder:"e.g. Switching to a different tool, budget constraints...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,disabled:o}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:c,disabled:o,className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:i,disabled:o,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Cancelling...":"Confirm Cancellation"})]})]})})}):null}const po=["FREE","STARTER","PROFESSIONAL","BUSINESS"],n4={FREE:{individual:0,organization:0},STARTER:{individual:899,organization:1999},PROFESSIONAL:{individual:1599,organization:3999},BUSINESS:{individual:0,organization:7999}};function s4(){const e=jt(),t=td(),[n,r]=p.useState(null),[l,o]=p.useState([]),[a,i]=p.useState([]),[c,u]=p.useState(!0),[d,f]=p.useState("subscription"),[m,x]=p.useState(!1);p.useEffect(()=>{y()},[]);async function y(){try{u(!0);const[h,v,N]=await Promise.all([gx(),tN(),e4()]);r(h),o(v),i(N)}catch(h){console.error("Failed to load billing data:",h),t.error("Failed to load billing information")}finally{u(!1)}}function b(h){e("/upgrade")}function w(){x(!0)}async function g(h){try{await pN(h||void 0),await y(),t.success("Subscription cancelled successfully")}catch(v){throw t.error(`Failed to cancel subscription: ${v.message||"Unknown error"}`),v}}return c?s.jsx(Ee,{children:s.jsx("div",{className:"max-w-7xl mx-auto p-6",children:s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"Loading billing information..."})})})}):s.jsxs(Ee,{children:[s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Billing & Subscription"}),s.jsx("p",{className:"text-slate-600",children:"Manage your subscription, payments, and invoices"})]}),s.jsx("div",{className:"border-b border-slate-200 mb-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>f("subscription"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${d==="subscription"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Subscription"}),s.jsx("button",{onClick:()=>f("payments"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${d==="payments"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Payments"}),s.jsx("button",{onClick:()=>f("invoices"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${d==="invoices"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Invoices"})]})}),d==="subscription"&&n&&s.jsx(r4,{subscription:n,onUpgrade:b,onCancel:w}),d==="payments"&&s.jsx(l4,{payments:l}),d==="invoices"&&s.jsx(o4,{invoices:a})]}),s.jsx(t4,{isOpen:m,onClose:()=>x(!1),onConfirm:g})]})}function r4({subscription:e,onUpgrade:t,onCancel:n}){const[r,l]=p.useState({}),[o,a]=p.useState(!0);p.useEffect(()=>{i()},[]);async function i(){try{const d={};for(const f of po)try{d[f]=await hN(f)}catch(m){console.error(`Failed to load plan details for ${f}:`,m)}l(d)}catch(d){console.error("Failed to load plan details:",d)}finally{a(!1)}}const c=r[e.planType]||{name:e.planType,amount:e.amount},u=d=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(d);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Current Plan"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:c.name}),s.jsx("p",{className:"text-sm text-slate-600",children:e.amount>0?`${u(e.amount)}/${e.billingCycle||"month"}`:"Free Plan"})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.status==="ACTIVE"?"bg-green-100 text-green-800":e.status==="TRIAL"?"bg-blue-100 text-blue-800":e.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:e.status})})]}),e.endDate&&s.jsx("p",{className:"text-sm text-slate-600",children:e.status==="CANCELLED"?`Cancelled on ${new Date(e.cancelledAt||"").toLocaleDateString()}`:`Renews on ${new Date(e.endDate).toLocaleDateString()}`}),e.isManual&&s.jsx("p",{className:"text-sm text-blue-600",children:"This plan was manually assigned by an admin"})]})]}),!o&&s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Available Plans"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:po.map(d=>{const f=r[d];if(!f)return null;const m=e.planType===d,x=po.indexOf(d)>po.indexOf(e.planType),y=n4[d],b=(y==null?void 0:y.organization)||(y==null?void 0:y.individual)||f.amount;return s.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${m?"border-blue-500 bg-blue-50 shadow-md":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-md"}`,children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:f.name}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900 mb-4",children:[b>0?u(b):"Free",b>0&&s.jsx("span",{className:"text-sm font-normal text-slate-600",children:"/mo"})]}),s.jsxs("ul",{className:"space-y-2 mb-4 text-sm text-slate-600",children:[s.jsx("li",{className:"flex items-center gap-2",children:f.features.maxLeads===-1?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:"Unlimited Leads"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-4 h-4"}),s.jsxs("span",{children:[f.features.maxLeads," Leads"]})]})}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4"}),s.jsxs("span",{children:[f.features.maxUsers===-1?"Unlimited":f.features.maxUsers," Users"]})]}),s.jsx("li",{className:"flex items-center gap-2",children:f.features.workflows?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:"Workflows"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-4 h-4"}),s.jsx("span",{className:"text-slate-400",children:"Workflows"})]})}),s.jsx("li",{className:"flex items-center gap-2",children:f.features.integrations?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:"Integrations"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-4 h-4"}),s.jsx("span",{className:"text-slate-400",children:"Integrations"})]})})]}),m?s.jsx("button",{disabled:!0,className:"w-full px-4 py-2 bg-slate-200 text-slate-600 rounded-lg font-medium cursor-not-allowed",children:"Current Plan"}):s.jsx("button",{onClick:()=>t(d),disabled:!x,className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${x?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-200 text-slate-600 cursor-not-allowed"}`,children:x?"Upgrade":"Downgrade"})]},d)})})]}),e.status==="ACTIVE"&&s.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Cancel Subscription"}),s.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Cancelling your subscription will stop automatic renewals. You'll retain access until the end of your billing period."}),s.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700",children:"Cancel Subscription"})]})]})}function l4({payments:e}){const t=(n,r)=>r==="INR"||r===""?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(n):`${r} ${n.toFixed(2)}`;return e.length===0?s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No payment history found"})}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Method"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Transaction ID"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Date"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:t(n.amount,n.currency)}),s.jsx("td",{className:"p-4 text-sm text-slate-700",children:n.paymentMethod||"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.status==="COMPLETED"?"bg-green-100 text-green-800":n.status==="PENDING"?"bg-yellow-100 text-yellow-800":n.status==="FAILED"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:n.status})}),s.jsx("td",{className:"p-4 text-sm text-slate-600 font-mono text-xs",children:n.transactionId||"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:n.paidAt?new Date(n.paidAt).toLocaleDateString():new Date(n.createdAt).toLocaleDateString()})]},n.id))})]})})}function o4({invoices:e}){const t=(n,r)=>r==="INR"||r===""?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(n):`${r} ${n.toFixed(2)}`;return e.length===0?s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No invoices found"})}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Invoice #"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Amount"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Due Date"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Date"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium font-mono",children:n.invoiceNumber}),s.jsx("td",{className:"p-4 text-sm text-slate-900 font-medium",children:t(n.amount,n.currency)}),s.jsx("td",{className:"p-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.status==="PAID"?"bg-green-100 text-green-800":n.status==="SENT"?"bg-blue-100 text-blue-800":n.status==="OVERDUE"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:n.status})}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:n.dueDate?new Date(n.dueDate).toLocaleDateString():"N/A"}),s.jsx("td",{className:"p-4 text-sm text-slate-600",children:new Date(n.createdAt).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-sm",children:n.pdfUrl&&s.jsx("a",{href:n.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Download PDF"})})]},n.id))})]})})}async function a4(){return V("/reports/analytics")}async function i4(){return V("/reports/pipeline")}async function c4(e){const t=`?days=${e}`;return V(`/reports/activity-trends${t}`)}async function u4(){return V("/reports/user-performance")}function d4(){var f,m,x;const[e,t]=p.useState(null),[n,r]=p.useState([]),[l,o]=p.useState([]),[a,i]=p.useState([]),[c,u]=p.useState(!0);p.useEffect(()=>{d()},[]);async function d(){try{u(!0);const[y,b,w,g]=await Promise.all([a4(),i4(),c4(30),u4()]);t(y),r(b),o(w),i(g)}catch(y){console.error("Failed to load reports:",y),alert(`Failed to load reports: ${y.message||"Unknown error"}`)}finally{u(!1)}}return c?s.jsx(Ee,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-slate-500",children:"Loading reports..."})]})}):s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Reports & Analytics"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Insights into your sales pipeline and performance"})]}),e&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Oi,{title:"Total Leads",value:((f=e.overview)==null?void 0:f.totalLeads)||0,gradient:"from-blue-500 to-blue-600"}),s.jsx(Oi,{title:"Conversion Rate",value:`${(((m=e.overview)==null?void 0:m.conversionRate)||0).toFixed(1)}%`,gradient:"from-green-500 to-green-600"}),s.jsx(Oi,{title:"Avg Days in Pipeline",value:Math.round(((x=e.overview)==null?void 0:x.avgTimeInStage)||0),gradient:"from-purple-500 to-purple-600"})]}),n&&n.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Pipeline by Stage"}),s.jsx("div",{className:"space-y-3",children:n.map(y=>{var b;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:y.stage}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-48 bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${y.count/(((b=e==null?void 0:e.overview)==null?void 0:b.totalLeads)||1)*100}%`}})}),s.jsx("span",{className:"text-sm font-semibold text-slate-900 w-12 text-right",children:y.count})]})]},y.stage)})})]}),(e==null?void 0:e.leadsBySource)&&e.leadsBySource.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Leads by Source"}),s.jsx("div",{className:"space-y-2",children:e.leadsBySource.map(y=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:y.source||"Unknown"}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:y.count})]},y.source))})]}),a&&a.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"User Performance"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"User"}),s.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Total Leads"}),s.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Won Leads"}),s.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Conversion Rate"})]})}),s.jsx("tbody",{children:a.map(y=>s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("td",{className:"p-3 text-slate-900 font-medium",children:y.name||y.email}),s.jsx("td",{className:"p-3 text-slate-700",children:y.totalLeads}),s.jsx("td",{className:"p-3 text-slate-700",children:y.wonLeads}),s.jsxs("td",{className:"p-3 text-slate-700",children:[y.conversionRate.toFixed(1),"%"]})]},y.userId))})]})})]}),l&&l.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Activity Trends (Last 30 Days)"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map(y=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-700",children:new Date(y.date).toLocaleDateString()}),s.jsxs("span",{className:"text-sm font-medium text-slate-900",children:[y.count," activities"]})]},y.date))})]})]})})}function Oi({title:e,value:t,gradient:n}){return s.jsxs("div",{className:`bg-gradient-to-br ${n} rounded-xl p-6 text-white shadow-lg`,children:[s.jsx("div",{className:"text-3xl font-bold mb-1",children:t}),s.jsx("div",{className:"text-sm font-medium opacity-90",children:e})]})}function f4(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(new Date);p.useEffect(()=>{a()},[l]);async function a(){try{r(!0);const x=new Date(l);x.setDate(1);const y=new Date(l);y.setMonth(y.getMonth()+1),y.setDate(0);const b=await Qw(x.toISOString(),y.toISOString());t(b||[])}catch(x){console.error("Failed to load calendar:",x),alert(`Failed to load calendar: ${x.message||"Unknown error"}`)}finally{r(!1)}}const i=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),d=i.getDay(),f=x=>{const y=new Date(l.getFullYear(),l.getMonth(),x).toISOString().split("T")[0];return e.filter(b=>new Date(b.dueAt).toISOString().split("T")[0]===y)},m=x=>{o(y=>{const b=new Date(y);return x==="prev"?b.setMonth(b.getMonth()-1):b.setMonth(b.getMonth()+1),b})};return n?s.jsx(Ee,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-slate-500",children:"Loading calendar..."})]})}):s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Calendar"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"View and manage your tasks"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>m("prev"),className:"px-4 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:" Previous"}),s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:l.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>m("next"),className:"px-4 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"Next "})]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-7 gap-px bg-slate-200",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>s.jsx("div",{className:"bg-slate-50 p-3 text-center text-sm font-semibold text-slate-700",children:x},x)),Array.from({length:d}).map((x,y)=>s.jsx("div",{className:"bg-white min-h-[100px]"},`empty-${y}`)),Array.from({length:u}).map((x,y)=>{const b=y+1,w=f(b),g=new Date().toDateString()===new Date(l.getFullYear(),l.getMonth(),b).toDateString();return s.jsxs("div",{className:`bg-white min-h-[100px] p-2 border-b border-r border-slate-100 ${g?"bg-blue-50":""}`,children:[s.jsx("div",{className:`text-sm font-medium mb-1 ${g?"text-blue-600":"text-slate-700"}`,children:b}),s.jsxs("div",{className:"space-y-1",children:[w.slice(0,3).map(h=>s.jsx("div",{className:`text-xs p-1 rounded truncate ${h.completed?"bg-green-100 text-green-800 line-through":"bg-blue-100 text-blue-800"}`,title:h.title,children:h.title},h.id)),w.length>3&&s.jsxs("div",{className:"text-xs text-slate-500",children:["+",w.length-3," more"]})]})]},b)})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200/60 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Upcoming Tasks"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.filter(x=>!x.completed).sort((x,y)=>new Date(x.dueAt).getTime()-new Date(y.dueAt).getTime()).slice(0,20).map(x=>{var y;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:x.title}),s.jsxs("div",{className:"text-sm text-slate-600",children:[(y=x.lead)==null?void 0:y.name,"  ",new Date(x.dueAt).toLocaleDateString()]})]}),s.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${new Date(x.dueAt)<new Date?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:new Date(x.dueAt)<new Date?"Overdue":"Due"})]},x.id)})})]})]})})}const m4=["NEW","CONTACTED","FOLLOW_UP","WON","LOST"];function h4(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[l,o]=p.useState(null);p.useEffect(()=>{a()},[]);async function a(){try{r(!0);const f=await Pw();t(f||[])}catch(f){console.error("Failed to load kanban:",f),alert(`Failed to load kanban board: ${f.message||"Unknown error"}`)}finally{r(!1)}}async function i(f,m){try{await hx(f,m),await a()}catch(x){alert(`Failed to update lead stage: ${x.message||"Unknown error"}`)}}const c=f=>{o(f)},u=f=>{f.preventDefault()},d=async f=>{if(!l)return;const m=e.flatMap(x=>x.leads).find(x=>x.id===l);m&&m.stage!==f&&await i(l,f),o(null)};return n?s.jsx(Ee,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-slate-500",children:"Loading kanban board..."})]})}):s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Pipeline (Kanban)"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Drag and drop leads to change stages"})]}),s.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:e.map(f=>s.jsxs("div",{className:"flex-shrink-0 w-80 bg-slate-50 rounded-xl p-4",onDragOver:u,onDrop:()=>d(f.stage),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"font-semibold text-slate-900",children:f.stage}),s.jsx("span",{className:"px-2 py-1 bg-white rounded-full text-xs font-medium text-slate-700",children:f.count})]}),s.jsxs("div",{className:"space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto",children:[f.leads.map(m=>s.jsxs("div",{draggable:!0,onDragStart:()=>c(m.id),className:"bg-white rounded-lg p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow cursor-move",children:[s.jsxs(se,{to:`/leads/${m.id}`,className:"block",onClick:x=>x.stopPropagation(),children:[s.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:m.name}),s.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[m.email&&s.jsx("div",{children:m.email}),m.company&&s.jsx("div",{children:m.company}),m.owner&&s.jsxs("div",{className:"text-xs text-slate-500",children:["Owner: ",m.owner.name||m.owner.email]})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsx("select",{value:m.stage,onChange:x=>i(m.id,x.target.value),onClick:x=>x.stopPropagation(),className:"text-xs border border-slate-300 rounded px-2 py-1 bg-white",children:m4.map(x=>s.jsx("option",{value:x,children:x},x))}),s.jsx("span",{className:"text-xs text-slate-500",children:new Date(m.createdAt).toLocaleDateString()})]})]},m.id)),f.leads.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No leads in this stage"})]})]},f.stage))})]})})}function p4(){const{token:e}=sn();return s.jsxs(Lb,{children:[s.jsx(be,{path:"/login",element:s.jsx(hw,{})}),s.jsx(be,{path:"/signup",element:s.jsx(xw,{})}),s.jsx(be,{path:"/forgot-password",element:s.jsx(gw,{})}),s.jsx(be,{path:"/reset-password/:token",element:s.jsx(yw,{})}),s.jsx(be,{path:"/auth/google/callback",element:s.jsx(eN,{})}),s.jsx(be,{path:"/accept-invite/:inviteId",element:s.jsx(mN,{})}),s.jsx(be,{path:"/",element:e?s.jsx(Uw,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/team",element:e?s.jsx(gN,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/leads/:id",element:e?s.jsx(Jw,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/upgrade",element:e?s.jsx(iN,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/workflows",element:e?s.jsx(SN,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/workflows/editor",element:e?s.jsx(Rm,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/workflows/editor/:id",element:e?s.jsx(Rm,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/workflows/setup-guide",element:e?s.jsx(oC,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/workflows/configuration",element:e?s.jsx(aC,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/docs",element:s.jsx(iC,{})}),s.jsx(be,{path:"/settings",element:e?s.jsx(xC,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/admin",element:e?s.jsx(FC,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/workspace-admin",element:e?s.jsx(QC,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/billing",element:e?s.jsx(s4,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/reports",element:e?s.jsx(d4,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/calendar",element:e?s.jsx(f4,{}):s.jsx(Re,{to:"/login"})}),s.jsx(be,{path:"/kanban",element:e?s.jsx(h4,{}):s.jsx(Re,{to:"/login"})})]})}Ui.createRoot(document.getElementById("root")).render(s.jsx(U.StrictMode,{children:s.jsx(mw,{children:s.jsx(Fw,{children:s.jsx(nw,{children:s.jsx(p4,{})})})})}));
